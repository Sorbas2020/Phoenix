0001   0000             ;********************************************************************
0002   0000             ;*                                                                  *
0003   0000             ;* PHOENIX                                                          *
0004   0000             ;*                                                                  *
0005   0000             ;* (c) Amstar Electronics Corp. 1980                                *
0006   0000             ;*                                                                  *
0007   0000             ;* 20250330                                                         *
0008   0000             ;* Skipped all unused code and data.                                *
0009   0000             ;* All code and data at original offsets.                           *
0010   0000             ;* Assebled with 'Micro Z80 assembler - uz80as' (v2.02).            *
0011   0000             ;* https://github.com/jorgicor/uz80as                               *
0012   0000             ;* Usage:                                                           *
0013   0000             ;* uz80as.exe -x Phoenix.asm                                        *
0014   0000             ;********************************************************************
0015   0000             
0016   0000             ; ForegroundScreen.
0017   0000             ForegroundScreen       .EQU $4000       ;32*26 bytes for the foreground screen
0018   0000             
0019   0000             ; General storage.
0020   0000             M4350                  .EQU $4350
0021   0000             M4351                  .EQU $4351
0022   0000             M4352                  .EQU $4352
0023   0000             M4353                  .EQU $4353
0024   0000             M4354                  .EQU $4354
0025   0000             M4355                  .EQU $4355
0026   0000             M4356                  .EQU $4356
0027   0000             M4357                  .EQU $4357
0028   0000             M4358                  .EQU $4358
0029   0000             M4359                  .EQU $4359
0030   0000             M435A                  .EQU $435A
0031   0000             M435B                  .EQU $435B
0032   0000             M435E                  .EQU $435E
0033   0000             M435F                  .EQU $435F       ;8 bit counter for alien movement
0034   0000             PlayerMoved            .EQU $4360       ;Flag for: 'player moved' ($FF)
0035   0000             BulletTriggered        .EQU $4361       ;Flag for: 'bullet triggered' ($30) and counter
0036   0000             M4362                  .EQU $4362       ;Player shield animation counter
0037   0000             ParticleExplosion      .EQU $4363       ;Flag for: 'particle explosion start' and animation counter
0038   0000             M4364                  .EQU $4364
0039   0000             M4366                  .EQU $4366
0040   0000             M4367                  .EQU $4367       ;Flag for: 'Mothership partially faded in' ($FF)
0041   0000             M4368                  .EQU $4368
0042   0000             M4369                  .EQU $4369       ;Flag for:'bonus explosion' ($FF)
0043   0000             M436A                  .EQU $436A
0044   0000             M436B                  .EQU $436B       ;Flag for: 'mother ship score display' ($FF) and counter
0045   0000             M436D                  .EQU $436D
0046   0000             M436E                  .EQU $436E
0047   0000             M436F                  .EQU $436F
0048   0000             M4370                  .EQU $4370
0049   0000             M4371                  .EQU $4371
0050   0000             M4372                  .EQU $4372
0051   0000             M4373                  .EQU $4373
0052   0000             M4374                  .EQU $4374
0053   0000             M4378                  .EQU $4378       ;Animation counter for the bonus explosion
0054   0000             M4379                  .EQU $4379       ;First two digits of BCD score value for the bonus explosion (last digit is ever 0)
0055   0000             M437A                  .EQU $437A
0056   0000             M437B                  .EQU $437B
0057   0000             M437C                  .EQU $437C
0058   0000             M4380                  .EQU $4380
0059   0000             Score1high             .EQU $4381       ;Player 1 score BCD (high)
0060   0000             Score1mid              .EQU $4382       ;Player 1 score BCD (mid)
0061   0000             Score1low              .EQU $4383       ;Player 1 score BCD (low)
0062   0000             M4384                  .EQU $4384       ;Ever set to 0 (prevents overflow)
0063   0000             Score2high             .EQU $4385       ;Player 2 score BCD (high)
0064   0000             Score2mid              .EQU $4386       ;Player 2 score BCD (mid)
0065   0000             Score2low              .EQU $4387       ;Player 2 score BCD (low)
0066   0000             M4388                  .EQU $4388       ;Ever set to 0 (prevents overflow)
0067   0000             HiScorehigh            .EQU $4389
0068   0000             HiScoremid             .EQU $438A
0069   0000             HiScorelow             .EQU $438B
0070   0000             SoundControlA          .EQU $438C
0071   0000             SoundControlB          .EQU $438D
0072   0000             M438E                  .EQU $438E
0073   0000             CoinCount              .EQU $438F
0074   0000             Player1Lives           .EQU $4390
0075   0000             Player2Lives           .EQU $4391
0076   0000             M4392                  .EQU $4392
0077   0000             Counter93              .EQU $4393
0078   0000             M4394                  .EQU $4394
0079   0000             M4395                  .EQU $4395
0080   0000             M4396                  .EQU $4396
0081   0000             M4397                  .EQU $4397
0082   0000             M4398                  .EQU $4398
0083   0000             M4399                  .EQU $4399
0084   0000             Counter9A              .EQU $439A
0085   0000             M439B                  .EQU $439B
0086   0000             M439C                  .EQU $439C
0087   0000             M439D                  .EQU $439D
0088   0000             M439E                  .EQU $439E
0089   0000             M439F                  .EQU $439F
0090   0000             IN0Current             .EQU $43A0
0091   0000             IN0Previous            .EQU $43A1
0092   0000             GameOrAttract          .EQU $43A2
0093   0000             GameAndDemoOrSplash    .EQU $43A3
0094   0000             GameState              .EQU $43A4
0095   0000             CounterA5              .EQU $43A5
0096   0000             ShieldCount            .EQU $43A6
0097   0000             AnimationCounter       .EQU $43A7
0098   0000             M43A8                  .EQU $43A8
0099   0000             M43A9                  .EQU $43A9
0100   0000             M43AA                  .EQU $43AA
0101   0000             M43AB                  .EQU $43AB
0102   0000             M43AC                  .EQU $43AC
0103   0000             M43AD                  .EQU $43AD
0104   0000             M43AE                  .EQU $43AE
0105   0000             M43AF                  .EQU $43AF
0106   0000             M43B0                  .EQU $43B0
0107   0000             M43B1                  .EQU $43B1
0108   0000             M43B2                  .EQU $43B2
0109   0000             M43B3                  .EQU $43B3
0110   0000             CounterB4              .EQU $43B4
0111   0000             M43B5                  .EQU $43B5
0112   0000             M43B6                  .EQU $43B6
0113   0000             LevelAndRound          .EQU $43B8
0114   0000             CounterB9              .EQU $43B9
0115   0000             AliensLeft             .EQU $43BA
0116   0000             BirdsLeft              .EQU $43BB
0117   0000             M43BC                  .EQU $43BC
0118   0000             M43BD                  .EQU $43BD
0119   0000             BonusLivesAt           .EQU $43BE
0120   0000             M43BF                  .EQU $43BF
0121   0000             
0122   0000             ; Player and player bullets, data structure (grid).
0123   0000             PlayerState            .EQU $43C0       ;Player ship control state register
0124   0000             PlayerShape            .EQU $43C1       ;LSB for T1400 player ship character block shapes table
0125   0000             PlayerShipX            .EQU $43C2       ;Player ship, coordinate X ($0C=min.left, $64=default, $C0=max.right)
0126   0000             PlayerShipY            .EQU $43C3       ;Player ship, coordinate Y ($D8)
0127   0000             PlayerBulletState      .EQU $43C4       ;Player bullet, control state register
0128   0000             PlayerBulletShape      .EQU $43C5       ;Player bullet, character code ($50 to $57)
0129   0000             PlayerBulletX          .EQU $43C6       ;Player bullet, coordinate X
0130   0000             PlayerBulletY          .EQU $43C7       ;Player bullet, coordinate Y ($D0=min.bottom, $18=max.top)
0131   0000             AbovePlayerBulletState .EQU $43C8       ;One position above player bullet, control state register
0132   0000             AbovePlayerBulletShape .EQU $43C9       ;One position above player bullet, character code ($50 to $57)
0133   0000             AbovePlayerBulletX     .EQU $43CA       ;One position above player bullet, coordinate X
0134   0000             AbovePlayerBulletY     .EQU $43CB       ;One position above player bullet, coordinate Y
0135   0000             
0136   0000             ; Alien and bird bullets, data structure (grid).
0137   0000             AlienBullet0State      .EQU $43CC       ;Enemy bullet 0, control state register
0138   0000             AlienBullet0Shape      .EQU $43CD       ;Enemy bullet 0, character code ($58 to $5F)
0139   0000             AlienBullet0X          .EQU $43CE       ;Enemy bullet 0, coordinate X
0140   0000             AlienBullet0Y          .EQU $43CF       ;Enemy bullet 0, coordinate Y
0141   0000             AlienBullet1State      .EQU $43D0       ;Enemy bullet 1, control state register
0142   0000             AlienBullet1Shape      .EQU $43D1       ;Enemy bullet 1, character code ($58 to $5F)
0143   0000             AlienBullet1X          .EQU $43D2       ;Enemy bullet 1, coordinate X
0144   0000             AlienBullet1Y          .EQU $43D3       ;Enemy bullet 1, coordinate Y
0145   0000             AlienBullet2State      .EQU $43D4       ;Enemy bullet 2, control state register
0146   0000             AlienBullet2Shape      .EQU $43D5       ;Enemy bullet 2, character code ($58 to $5F)
0147   0000             AlienBullet2X          .EQU $43D6       ;Enemy bullet 2, coordinate X
0148   0000             AlienBullet2Y          .EQU $43D7       ;Enemy bullet 2, coordinate Y
0149   0000             AlienBullet3State      .EQU $43D8       ;Enemy bullet 3, control state register
0150   0000             AlienBullet3Shape      .EQU $43D9       ;Enemy bullet 3, character code ($58 to $5F)
0151   0000             AlienBullet3X          .EQU $43DA       ;Enemy bullet 3, coordinate X
0152   0000             AlienBullet3Y          .EQU $43DB       ;Enemy bullet 3, coordinate Y
0153   0000             AlienBullet4State      .EQU $43DC       ;Enemy bullet 4, control state register
0154   0000             AlienBullet4Shape      .EQU $43DD       ;Enemy bullet 4, character code ($58 to $5F)
0155   0000             AlienBullet4X          .EQU $43DE       ;Enemy bullet 4, coordinate X
0156   0000             AlienBullet4Y          .EQU $43DF       ;Enemy bullet 4, coordinate Y
0157   0000             
0158   0000             ; Player and player bullets, data structure (screen ram).
0159   0000             OldPlayerShipMSB       .EQU $43E0       ;Old MSB screen ram: Upper left character of player ship
0160   0000             OldPlayerShipLSB       .EQU $43E1       ;Old LSB screen ram: Upper left character of player ship
0161   0000             PlayerShipMSB          .EQU $43E2       ;MSB screen ram: Upper left character of player ship
0162   0000             PlayerShipLSB          .EQU $43E3       ;LSB screen ram: Upper left character of player ship
0163   0000             PlayerBulletMSB        .EQU $43E4       ;MSB screen ram: Player bullet
0164   0000             PlayerBulletLSB        .EQU $43E5       ;LSB screen ram: Player bullet
0165   0000             AbovePlayerBulletMSB   .EQU $43E6       ;MSB screen ram: One character above player bullet
0166   0000             AbovePlayerBulletLSB   .EQU $43E7       ;LSB screen ram: One character above player bullet
0167   0000             M43E8                  .EQU $43E8
0168   0000             M43E9                  .EQU $43E9
0169   0000             M43EA                  .EQU $43EA
0170   0000             M43EB                  .EQU $43EB
0171   0000             
0172   0000             ; Alien and bird bullets, data structure (screen ram).
0173   0000             OldAlienBullet0MSB     .EQU $43EC       ;Old MSB screen ram: Enemy bullet 0
0174   0000             OldAlienBullet0LSB     .EQU $43ED       ;Old LSB screen ram: Enemy bullet 0
0175   0000             AlienBullet0MSB        .EQU $43EE       ;MSB screen ram: Enemy bullet 0
0176   0000             AlienBullet0LSB        .EQU $43EF       ;LSB screen ram: Enemy bullet 0
0177   0000             OldAlienBullet1MSB     .EQU $43F0       ;Old MSB screen ram: Enemy bullet 1
0178   0000             OldAlienBullet1LSB     .EQU $43F1       ;Old LSB screen ram: Enemy bullet 1
0179   0000             AlienBullet1MSB        .EQU $43F2       ;MSB screen ram: Enemy bullet 1
0180   0000             AlienBullet1LSB        .EQU $43F3       ;LSB screen ram: Enemy bullet 1
0181   0000             OldAlienBullet2MSB     .EQU $43F4       ;Old MSB screen ram: Enemy bullet 2
0182   0000             OldAlienBullet2LSB     .EQU $43F5       ;Old LSB screen ram: Enemy bullet 2
0183   0000             AlienBullet2MSB        .EQU $43F6       ;MSB screen ram: Enemy bullet 2
0184   0000             AlienBullet2LSB        .EQU $43F7       ;LSB screen ram: Enemy bullet 2
0185   0000             OldAlienBullet3MSB     .EQU $43F8       ;Old MSB screen ram: Enemy bullet 3
0186   0000             OldAlienBullet3LSB     .EQU $43F9       ;Old LSB screen ram: Enemy bullet 3
0187   0000             AlienBullet3MSB        .EQU $43FA       ;MSB screen ram: Enemy bullet 3
0188   0000             AlienBullet3LSB        .EQU $43FB       ;LSB screen ram: Enemy bullet 3
0189   0000             OldAlienBullet4MSB     .EQU $43FC       ;Old MSB screen ram: Enemy bullet 4
0190   0000             OldAlienBullet4LSB     .EQU $43FD       ;Old LSB screen ram: Enemy bullet 4
0191   0000             AlienBullet4MSB        .EQU $43FE       ;MSB screen ram: Enemy bullet 4
0192   0000             AlienBullet4LSB        .EQU $43FF       ;LSB screen ram: Enemy bullet 4
0193   0000             
0194   0000             ; Background screen.
0195   0000             BackgroundScreen       .EQU $4800       ;32*26 bytes for the background screen
0196   0000             
0197   0000             ; Pointer to alien movement pattern.
0198   0000             M4B50                  .EQU $4B50       ;Alien0 movement pattern table MSB
0199   0000             M4B51                  .EQU $4B51       ;Alien0 movement pattern table LSB
0200   0000             M4B52                  .EQU $4B52       ;Alien1 movement pattern table MSB
0201   0000             M4B53                  .EQU $4B53       ;Alien1 movement pattern table LSB
0202   0000             M4B54                  .EQU $4B54       ;Alien2 movement pattern table MSB
0203   0000             M4B55                  .EQU $4B55       ;Alien2 movement pattern table LSB
0204   0000             M4B56                  .EQU $4B56       ;Alien3 movement pattern table MSB
0205   0000             M4B57                  .EQU $4B57       ;Alien3 movement pattern table LSB
0206   0000             M4B58                  .EQU $4B58       ;Alien4 movement pattern table MSB
0207   0000             M4B59                  .EQU $4B59       ;Alien4 movement pattern table LSB
0208   0000             M4B5A                  .EQU $4B5A       ;Alien5 movement pattern table MSB
0209   0000             M4B5B                  .EQU $4B5B       ;Alien5 movement pattern table LSB
0210   0000             M4B5C                  .EQU $4B5C       ;Alien6 movement pattern table MSB
0211   0000             M4B5D                  .EQU $4B5D       ;Alien6 movement pattern table LSB
0212   0000             M4B5E                  .EQU $4B5E       ;Alien7 movement pattern table MSB
0213   0000             M4B5F                  .EQU $4B5F       ;Alien7 movement pattern table LSB
0214   0000             M4B60                  .EQU $4B60       ;Alien8 movement pattern table MSB
0215   0000             M4B61                  .EQU $4B61       ;Alien8 movement pattern table LSB
0216   0000             M4B62                  .EQU $4B62       ;Alien9 movement pattern table MSB
0217   0000             M4B63                  .EQU $4B63       ;Alien9 movement pattern table LSB
0218   0000             M4B64                  .EQU $4B64       ;AlienA movement pattern table MSB
0219   0000             M4B65                  .EQU $4B65       ;AlienA movement pattern table LSB
0220   0000             M4B66                  .EQU $4B66       ;AlienB movement pattern table MSB
0221   0000             M4B67                  .EQU $4B67       ;AlienB movement pattern table LSB
0222   0000             M4B68                  .EQU $4B68       ;AlienC movement pattern table MSB
0223   0000             M4B69                  .EQU $4B69       ;AlienC movement pattern table LSB
0224   0000             M4B6A                  .EQU $4B6A       ;AlienD movement pattern table MSB
0225   0000             M4B6B                  .EQU $4B6B       ;AlienD movement pattern table LSB
0226   0000             M4B6C                  .EQU $4B6C       ;AlienE movement pattern table MSB
0227   0000             M4B6D                  .EQU $4B6D       ;AlienE movement pattern table LSB
0228   0000             M4B6E                  .EQU $4B6E       ;AlienF movement pattern table MSB
0229   0000             M4B6F                  .EQU $4B6F       ;AlienF movement pattern table LSB
0230   0000             
0231   0000             ; Alien data structure (grid).
0232   0000             ; Used for all levels with the 16 aliens.
0233   0000             ; Level: 1, 2, 5 (with mothership), 6, 7, 10(with mothership).
0234   0000             ; During 'fade in' phase, the alien control state B is holding the character code!
0235   0000             M4B70                  .EQU $4B70       ;Alien0 control state A
0236   0000             M4B71                  .EQU $4B71       ;Alien0 control state B (LSB for T14xx)
0237   0000             M4B72                  .EQU $4B72       ;Alien0 screen coordinate X
0238   0000             M4B73                  .EQU $4B73       ;Alien0 screen coordinate Y
0239   0000             M4B74                  .EQU $4B74       ;Alien1 control state A
0240   0000             M4B75                  .EQU $4B75       ;Alien1 control state B (LSB for T14xx)
0241   0000             M4B76                  .EQU $4B76       ;Alien1 screen coordinate X
0242   0000             M4B77                  .EQU $4B77       ;Alien1 screen coordinate Y
0243   0000             M4B78                  .EQU $4B78       ;Alien2 control state A
0244   0000             M4B79                  .EQU $4B79       ;Alien2 control state B (LSB for T14xx)
0245   0000             M4B7A                  .EQU $4B7A       ;Alien2 screen coordinate X
0246   0000             M4B7B                  .EQU $4B7B       ;Alien2 screen coordinate Y
0247   0000             M4B7C                  .EQU $4B7C       ;Alien3 control state A
0248   0000             M4B7D                  .EQU $4B7D       ;Alien3 control state B (LSB for T14xx)
0249   0000             M4B7E                  .EQU $4B7E       ;Alien3 screen coordinate X
0250   0000             M4B7F                  .EQU $4B7F       ;Alien3 screen coordinate Y
0251   0000             M4B80                  .EQU $4B80       ;Alien4 control state A
0252   0000             M4B81                  .EQU $4B81       ;Alien4 control state B (LSB for T14xx)
0253   0000             M4B82                  .EQU $4B82       ;Alien4 screen coordinate X
0254   0000             M4B83                  .EQU $4B83       ;Alien4 screen coordinate Y
0255   0000             M4B84                  .EQU $4B84       ;Alien5 control state A
0256   0000             M4B85                  .EQU $4B85       ;Alien5 control state B (LSB for T14xx)
0257   0000             M4B86                  .EQU $4B86       ;Alien5 screen coordinate X
0258   0000             M4B87                  .EQU $4B87       ;Alien5 screen coordinate Y
0259   0000             M4B88                  .EQU $4B88       ;Alien6 control state A
0260   0000             M4B89                  .EQU $4B89       ;Alien6 control state B (LSB for T14xx)
0261   0000             M4B8A                  .EQU $4B8A       ;Alien6 screen coordinate X
0262   0000             M4B8B                  .EQU $4B8B       ;Alien6 screen coordinate Y
0263   0000             M4B8C                  .EQU $4B8C       ;Alien7 control state A
0264   0000             M4B8D                  .EQU $4B8D       ;Alien7 control state B (LSB for T14xx)
0265   0000             M4B8E                  .EQU $4B8E       ;Alien7 screen coordinate X
0266   0000             M4B8F                  .EQU $4B8F       ;Alien7 screen coordinate Y
0267   0000             M4B90                  .EQU $4B90       ;Alien8 control state A
0268   0000             M4B91                  .EQU $4B91       ;Alien8 control state B (LSB for T14xx)
0269   0000             M4B92                  .EQU $4B92       ;Alien8 screen coordinate X
0270   0000             M4B93                  .EQU $4B93       ;Alien8 screen coordinate Y
0271   0000             M4B94                  .EQU $4B94       ;Alien9 control state A
0272   0000             M4B95                  .EQU $4B95       ;Alien9 control state B (LSB for T14xx)
0273   0000             M4B96                  .EQU $4B96       ;Alien9 screen coordinate X
0274   0000             M4B97                  .EQU $4B97       ;Alien9 screen coordinate Y
0275   0000             M4B98                  .EQU $4B98       ;AlienA control state A
0276   0000             M4B99                  .EQU $4B99       ;AlienA control state B (LSB for T14xx)
0277   0000             M4B9A                  .EQU $4B9A       ;AlienA screen coordinate X
0278   0000             M4B9B                  .EQU $4B9B       ;AlienA screen coordinate Y
0279   0000             M4B9C                  .EQU $4B9C       ;AlienB control state A
0280   0000             M4B9D                  .EQU $4B9D       ;AlienB control state B (LSB for T14xx)
0281   0000             M4B9E                  .EQU $4B9E       ;AlienB screen coordinate X
0282   0000             M4B9F                  .EQU $4B9F       ;AlienB screen coordinate Y
0283   0000             M4BA0                  .EQU $4BA0       ;AlienC control state A
0284   0000             M4BA1                  .EQU $4BA1       ;AlienC control state B (LSB for T14xx)
0285   0000             M4BA2                  .EQU $4BA2       ;AlienC screen coordinate X
0286   0000             M4BA3                  .EQU $4BA3       ;AlienC screen coordinate Y
0287   0000             M4BA4                  .EQU $4BA4       ;AlienD control state A
0288   0000             M4BA5                  .EQU $4BA5       ;AlienD control state B (LSB for T14xx)
0289   0000             M4BA6                  .EQU $4BA6       ;AlienD screen coordinate X
0290   0000             M4BA7                  .EQU $4BA7       ;AlienD screen coordinate Y
0291   0000             M4BA8                  .EQU $4BA8       ;AlienE control state A
0292   0000             M4BA9                  .EQU $4BA9       ;AlienE control state B (LSB for T14xx)
0293   0000             M4BAA                  .EQU $4BAA       ;AlienE screen coordinate X
0294   0000             M4BAB                  .EQU $4BAB       ;AlienE screen coordinate Y
0295   0000             M4BAC                  .EQU $4BAC       ;AlienF control state A
0296   0000             M4BAD                  .EQU $4BAD       ;AlienF control state B (LSB for T14xx)
0297   0000             M4BAE                  .EQU $4BAE       ;AlienF screen coordinate X
0298   0000             M4BAF                  .EQU $4BAF       ;AlienF screen coordinate Y
0299   0000             
0300   0000             ; Bird data structure.
0301   0000             ; Used for all levels with the 8 birds.
0302   0000             ; Level: 3, 4, 8, 9.
0303   0000             ; For the bird animation during intro splash, bird0 memory is used.
0304   0000             B4B70                  .EQU $4B70       ;Bird0 index character block shape
0305   0000             B4B71                  .EQU $4B71       ;Bird0 MSB initial screen address  
0306   0000             B4B72                  .EQU $4B72       ;Bird0 LSB initial screen address  
0307   0000             B4B73                  .EQU $4B73       ;Bird0 ?                           
0308   0000             B4B74                  .EQU $4B74       ;Bird0 ?                           
0309   0000             B4B75                  .EQU $4B75       ;Bird0 grid coordinate X ?         
0310   0000             B4B76                  .EQU $4B76       ;Bird0 ?                           
0311   0000             B4B77                  .EQU $4B77       ;Bird0 grid coordinate Y ?         
0312   0000             B4B78                  .EQU $4B78       ;Bird1 index character block shape 
0313   0000             B4B79                  .EQU $4B79       ;Bird1 MSB initial screen address  
0314   0000             B4B7A                  .EQU $4B7A       ;Bird1 LSB initial screen address  
0315   0000             B4B7B                  .EQU $4B7B       ;Bird1 ?                           
0316   0000             B4B7C                  .EQU $4B7C       ;Bird1 ?                           
0317   0000             B4B7D                  .EQU $4B7D       ;Bird1 grid coordinate X ?         
0318   0000             B4B7E                  .EQU $4B7E       ;Bird1 ?                           
0319   0000             B4B7F                  .EQU $4B7F       ;Bird1 grid coordinate Y ?         
0320   0000             B4B80                  .EQU $4B80       ;Bird2 index character block shape 
0321   0000             B4B81                  .EQU $4B81       ;Bird2 MSB initial screen address  
0322   0000             B4B82                  .EQU $4B82       ;Bird2 LSB initial screen address  
0323   0000             B4B83                  .EQU $4B83       ;Bird2 ?                           
0324   0000             B4B84                  .EQU $4B84       ;Bird2 ?                           
0325   0000             B4B85                  .EQU $4B85       ;Bird2 grid coordinate X ?         
0326   0000             B4B86                  .EQU $4B86       ;Bird2 ?                           
0327   0000             B4B87                  .EQU $4B87       ;Bird2 grid coordinate Y ?         
0328   0000             B4B88                  .EQU $4B88       ;Bird3 index character block shape 
0329   0000             B4B89                  .EQU $4B89       ;Bird3 MSB initial screen address  
0330   0000             B4B8A                  .EQU $4B8A       ;Bird3 LSB initial screen address  
0331   0000             B4B8B                  .EQU $4B8B       ;Bird3 ?                           
0332   0000             B4B8C                  .EQU $4B8C       ;Bird3 ?                           
0333   0000             B4B8D                  .EQU $4B8D       ;Bird3 grid coordinate X ?         
0334   0000             B4B8E                  .EQU $4B8E       ;Bird3 ?                           
0335   0000             B4B8F                  .EQU $4B8F       ;Bird3 grid coordinate Y ?         
0336   0000             B4B90                  .EQU $4B90       ;Bird4 index character block shape 
0337   0000             B4B91                  .EQU $4B91       ;Bird4 MSB initial screen address  
0338   0000             B4B92                  .EQU $4B92       ;Bird4 LSB initial screen address  
0339   0000             B4B93                  .EQU $4B93       ;Bird4 ?                           
0340   0000             B4B94                  .EQU $4B94       ;Bird4 ?                           
0341   0000             B4B95                  .EQU $4B95       ;Bird4 grid coordinate X ?         
0342   0000             B4B96                  .EQU $4B96       ;Bird4 ?                           
0343   0000             B4B97                  .EQU $4B97       ;Bird4 grid coordinate Y ?         
0344   0000             B4B98                  .EQU $4B98       ;Bird5 index character block shape 
0345   0000             B4B99                  .EQU $4B99       ;Bird5 MSB initial screen address  
0346   0000             B4B9A                  .EQU $4B9A       ;Bird5 LSB initial screen address  
0347   0000             B4B9B                  .EQU $4B9B       ;Bird5 ?                           
0348   0000             B4B9C                  .EQU $4B9C       ;Bird5 ?                           
0349   0000             B4B9D                  .EQU $4B9D       ;Bird5 grid coordinate X ?         
0350   0000             B4B9E                  .EQU $4B9E       ;Bird5 ?                           
0351   0000             B4B9F                  .EQU $4B9F       ;Bird5 grid coordinate Y ?         
0352   0000             B4BA0                  .EQU $4BA0       ;Bird6 index character block shape 
0353   0000             B4BA1                  .EQU $4BA1       ;Bird6 MSB initial screen address  
0354   0000             B4BA2                  .EQU $4BA2       ;Bird6 LSB initial screen address  
0355   0000             B4BA3                  .EQU $4BA3       ;Bird6 ?                           
0356   0000             B4BA4                  .EQU $4BA4       ;Bird6 ?                           
0357   0000             B4BA5                  .EQU $4BA5       ;Bird6 grid coordinate X ?         
0358   0000             B4BA6                  .EQU $4BA6       ;Bird6 ?                           
0359   0000             B4BA7                  .EQU $4BA7       ;Bird6 grid coordinate Y ?         
0360   0000             B4BA8                  .EQU $4BA8       ;Bird7 index character block shape 
0361   0000             B4BA9                  .EQU $4BA9       ;Bird7 MSB initial screen address  
0362   0000             B4BAA                  .EQU $4BAA       ;Bird7 LSB initial screen address  
0363   0000             B4BAB                  .EQU $4BAB       ;Bird7 ?                           
0364   0000             B4BAC                  .EQU $4BAC       ;Bird7 ?                           
0365   0000             B4BAD                  .EQU $4BAD       ;Bird7 grid coordinate X ?         
0366   0000             B4BAE                  .EQU $4BAE       ;Bird7 ?                           
0367   0000             B4BAF                  .EQU $4BAF       ;Bird7 grid coordinate Y ?         
0368   0000             
0369   0000             ; Alien data structure (screen ram)
0370   0000             M4BB0                  .EQU $4BB0       ;Old MSB screen ram adress alien0
0371   0000             M4BB1                  .EQU $4BB1       ;Old LSB screen ram adress alien0
0372   0000             M4BB2                  .EQU $4BB2       ;MSB screen ram adress alien0
0373   0000             M4BB3                  .EQU $4BB3       ;LSB screen ram adress alien0
0374   0000             M4BB4                  .EQU $4BB4       ;Old MSB screen ram adress alien1
0375   0000             M4BB5                  .EQU $4BB5       ;Old LSB screen ram adress alien1
0376   0000             M4BB6                  .EQU $4BB6       ;MSB screen ram adress alien1
0377   0000             M4BB7                  .EQU $4BB7       ;LSB screen ram adress alien1
0378   0000             M4BB8                  .EQU $4BB8       ;Old MSB screen ram adress alien2
0379   0000             M4BB9                  .EQU $4BB9       ;Old LSB screen ram adress alien2
0380   0000             M4BBA                  .EQU $4BBA       ;MSB screen ram adress alien2
0381   0000             M4BBB                  .EQU $4BBB       ;LSB screen ram adress alien2
0382   0000             M4BBC                  .EQU $4BBC       ;Old MSB screen ram adress alien3
0383   0000             M4BBD                  .EQU $4BBD       ;Old LSB screen ram adress alien3
0384   0000             M4BBE                  .EQU $4BBE       ;MSB screen ram adress alien3
0385   0000             M4BBF                  .EQU $4BBF       ;LSB screen ram adress alien3
0386   0000             M4BC0                  .EQU $4BC0       ;Old MSB screen ram adress alien4
0387   0000             M4BC1                  .EQU $4BC1       ;Old LSB screen ram adress alien4
0388   0000             M4BC2                  .EQU $4BC2       ;MSB screen ram adress alien4
0389   0000             M4BC3                  .EQU $4BC3       ;LSB screen ram adress alien4
0390   0000             M4BC4                  .EQU $4BC4       ;Old MSB screen ram adress alien5
0391   0000             M4BC5                  .EQU $4BC5       ;Old LSB screen ram adress alien5
0392   0000             M4BC6                  .EQU $4BC6       ;MSB screen ram adress alien5
0393   0000             M4BC7                  .EQU $4BC7       ;LSB screen ram adress alien5
0394   0000             M4BC8                  .EQU $4BC8       ;Old MSB screen ram adress alien6
0395   0000             M4BC9                  .EQU $4BC9       ;Old LSB screen ram adress alien6
0396   0000             M4BCA                  .EQU $4BCA       ;MSB screen ram adress alien6
0397   0000             M4BCB                  .EQU $4BCB       ;LSB screen ram adress alien6
0398   0000             M4BCC                  .EQU $4BCC       ;Old MSB screen ram adress alien7
0399   0000             M4BCD                  .EQU $4BCD       ;Old LSB screen ram adress alien7
0400   0000             M4BCE                  .EQU $4BCE       ;MSB screen ram adress alien7
0401   0000             M4BCF                  .EQU $4BCF       ;LSB screen ram adress alien7
0402   0000             M4BD0                  .EQU $4BD0       ;Old MSB screen ram adress alien8
0403   0000             M4BD1                  .EQU $4BD1       ;Old LSB screen ram adress alien8
0404   0000             M4BD2                  .EQU $4BD2       ;MSB screen ram adress alien8
0405   0000             M4BD3                  .EQU $4BD3       ;LSB screen ram adress alien8
0406   0000             M4BD4                  .EQU $4BD4       ;Old MSB screen ram adress alien9
0407   0000             M4BD5                  .EQU $4BD5       ;Old LSB screen ram adress alien9
0408   0000             M4BD6                  .EQU $4BD6       ;MSB screen ram adress alien9
0409   0000             M4BD7                  .EQU $4BD7       ;LSB screen ram adress alien9
0410   0000             M4BD8                  .EQU $4BD8       ;Old MSB screen ram adress alienA
0411   0000             M4BD9                  .EQU $4BD9       ;Old LSB screen ram adress alienA
0412   0000             M4BDA                  .EQU $4BDA       ;MSB screen ram adress alienA
0413   0000             M4BDB                  .EQU $4BDB       ;LSB screen ram adress alienA
0414   0000             M4BDC                  .EQU $4BDC       ;Old MSB screen ram adress alienB
0415   0000             M4BDD                  .EQU $4BDD       ;Old LSB screen ram adress alienB
0416   0000             M4BDE                  .EQU $4BDE       ;MSB screen ram adress alienB
0417   0000             M4BDF                  .EQU $4BDF       ;LSB screen ram adress alienB
0418   0000             M4BE0                  .EQU $4BE0       ;Old MSB screen ram adress alienC
0419   0000             M4BE1                  .EQU $4BE1       ;Old LSB screen ram adress alienC
0420   0000             M4BE2                  .EQU $4BE2       ;MSB screen ram adress alienC
0421   0000             M4BE3                  .EQU $4BE3       ;LSB screen ram adress alienC
0422   0000             M4BE4                  .EQU $4BE4       ;Old MSB screen ram adress alienD
0423   0000             M4BE5                  .EQU $4BE5       ;Old LSB screen ram adress alienD
0424   0000             M4BE6                  .EQU $4BE6       ;MSB screen ram adress alienD
0425   0000             M4BE7                  .EQU $4BE7       ;LSB screen ram adress alienD
0426   0000             M4BE8                  .EQU $4BE8       ;Old MSB screen ram adress alienE
0427   0000             M4BE9                  .EQU $4BE9       ;Old LSB screen ram adress alienE
0428   0000             M4BEA                  .EQU $4BEA       ;MSB screen ram adress alienE
0429   0000             M4BEB                  .EQU $4BEB       ;LSB screen ram adress alienE
0430   0000             M4BEC                  .EQU $4BEC       ;Old MSB screen ram adress alienF
0431   0000             M4BED                  .EQU $4BED       ;Old LSB screen ram adress alienF
0432   0000             M4BEE                  .EQU $4BEE       ;MSB screen ram adress alienF
0433   0000             M4BEF                  .EQU $4BEF       ;LSB screen ram adress alienF
0434   0000             
0435   0000             ; Bird extended storage
0436   0000             ; Used for all levels with the 8 birds.
0437   0000             B4BC0                  .EQU $4BC0
0438   0000             B4BC1                  .EQU $4BC1
0439   0000             B4BC2                  .EQU $4BC2
0440   0000             B4BC3                  .EQU $4BC3
0441   0000             B4BC4                  .EQU $4BC4
0442   0000             B4BC5                  .EQU $4BC5
0443   0000             B4BD1                  .EQU $4BD1
0444   0000             B4BD2                  .EQU $4BD2
0445   0000             B4BD3                  .EQU $4BD3
0446   0000             B4BD4                  .EQU $4BD4
0447   0000             B4BD5                  .EQU $4BD5
0448   0000             B4BD6                  .EQU $4BD6
0449   0000             B4BD7                  .EQU $4BD7
0450   0000             B4BED                  .EQU $4BED
0451   0000             B4BEE                  .EQU $4BEE
0452   0000             B4BEF                  .EQU $4BEF
0453   0000             
0454   0000             ; Stack
0455   0000             Stack                  .EQU $4BF0
0456   0000             
0457   0000             ;HW
0458   0000             videoRegister          .EQU $5000       ;Lower bit selects the RAM bank
0459   0000             scrollRegister         .EQU $5800       ;Screen scrolling
0460   0000             SOUNDCTLA              .EQU $6000       ;Sound control A
0461   0000             SOUNDCTLB              .EQU $6800       ;Sound control B
0462   0000             IN0                    .EQU $7000       ;Player inputs
0463   0000             DSW0                   .EQU $7800       ;DIP switch settings
0464   0000             
0465   0000                                    .ORG $0000
0466   0000             L0000:
0467   0000 00                                 NOP                         ; Start/restart and interrupts end up at 0008
0468   0001 00                                 NOP                         ;
0469   0002 00                                 NOP                         ;
0470   0003 00                                 NOP                         ;
0471   0004 00                                 NOP                         ;
0472   0005 00                                 NOP                         ;
0473   0006 00                                 NOP                         ;
0474   0007 00                                 NOP                         ;
0475   0008             ; 
0476   0008 31 FF 4B                           LD      SP,$4BFF            ; Top-ish of RAM
0477   000B 26 50                              LD      H,videoRegister >> 8
0478   000D 36 00                              LD      (HL),$00            ; Select the first bank of RAM
0479   000F CD 50 00                           CALL    InitSoundScreen     ; Turn sound off and clear both screen areas
0480   0012 21 00 18                           LD      HL,T1800            ; Screen draw info
0481   0015 0E 03                              LD      C,$03               ; 3 columns (rotated to 3 rows)
0482   0017 CD D0 01                           CALL    PrintTextLines      ; Draw the first 3 rows of the background (scores and coins)
0483   001A             ; Main loop begin
0484   001A             MainLoop:
0485   001A CD 80 00                           CALL    WaitVBlankCoin      ; Wait for VBlank and count any coins
0486   001D 3A A2 43                           LD      A,(GameOrAttract)   ;
0487   0020 A7                                 AND     A                   ; updates the zero flag
0488   0021 CA 2D 00                           JP      Z,L002D             ; if 'Attract mode'
0489   0024             ; Game mode
0490   0024 CD 00 04                           CALL    GameStateMachine    ; controls the flow of the game.
0491   0027 CD 00 27                           CALL    UpdateScoresAndSound
0492   002A C3 1A 00                           JP      MainLoop            ; Back to top of main loop
0493   002D             ; Attract mode (no sound, no scoreing, no manual steering)
0494   002D             L002D:
0495   002D 3E 0F                              LD      A,$0F               ; 0000_1111 mute the sound chip TMS36XX
0496   002F 26 60                              LD      H,SOUNDCTLA >> 8    ; 60xx sound A
0497   0031 77                                 LD      (HL),A              ;
0498   0032 26 68                              LD      H,SOUNDCTLB >> 8    ; 68xx sound B
0499   0034 77                                 LD      (HL),A              ;
0500   0035 CD 77 03                           CALL    UpdateSoundControlRAM
0501   0038 00                                 NOP                         ;
0502   0039 CD E0 17                           CALL    CoinChecking        ;
0503   003C A7                                 AND     A                   ; updates the zero flag
0504   003D CA 46 00                           JP      Z,L0046             ; No credits ... continue splash
0505   0040 CD 88 02                           CALL    PromptForStartGame  ;
0506   0043 C3 1A 00                           JP      MainLoop            ; Back to top of main loop
0507   0046             ; 
0508   0046             L0046:
0509   0046 CD E3 00                           CALL    SplashAndDemo       ;
0510   0049 C3 1A 00                           JP      MainLoop            ; Back to top of main loop
0511   004C             ; Main loop end.
0512   004C             
0513   0050                                    .ORG $0050
0514   0050             ;*****************************************************************************
0515   0050             ;* Initialize the sound (off) and screen (clear)
0516   0050             ;*****************************************************************************
0517   0050             InitSoundScreen:
0518   0050 26 68                              LD      H,SOUNDCTLB >> 8    ; 68xx sound B
0519   0052 36 00                              LD      (HL),$00            ; Sound off
0520   0054 26 60                              LD      H,SOUNDCTLA >> 8    ; 60xx sound A
0521   0056 36 00                              LD      (HL),$00            ; Sound off
0522   0058 26 58                              LD      H,scrollRegister >> 8
0523   005A 36 00                              LD      (HL),$00            ; First memory bank
0524   005C CD 6B 00                           CALL    ClearRAMBank        ; Clear the bank (includes screen)
0525   005F 26 50                              LD      H,videoRegister >> 8
0526   0061 36 01                              LD      (HL),$01            ; Second memory bank
0527   0063 CD 6B 00                           CALL    ClearRAMBank        ; Clear the bank (includes screen)
0528   0066 26 50                              LD      H,videoRegister >> 8
0529   0068 36 00                              LD      (HL),$00            ; Back to first memory bank
0530   006A C9                                 RET                         ; Done
0531   006B             
0532   006B             ;*****************************************************************************
0533   006B             ;* Clear a RAM Bank (bank 0 or 1)
0534   006B             ;* Set the lower bit of the video register to pick the bank before calling.
0535   006B             ;* 4000 - 4BF8
0536   006B             ;* We call this function, which means we don't want to clear the return on the stack.
0537   006B             ;* That's why we start clearing at 4BF8 instead of 4BFF.
0538   006B             ;* Since screen memory is part of this bank, we are clearing the screen too.
0539   006B             ;*****************************************************************************
0540   006B             ClearRAMBank:
0541   006B 21 F8 4B                           LD      HL,$4BF8            ; Highest point ... skip the top of the stack
0542   006E 3E 3F                              LD      A,$3F               ; Stop when H reaches 3F
0543   0070             L0070:
0544   0070 36 00                              LD      (HL),$00            ; Clear the memory
0545   0072 2B                                 DEC     HL                  ; Point to next
0546   0073 BC                                 CP      H                   ; All done?
0547   0074 C2 70 00                           JP      NZ,L0070            ; No ... go back for all
0548   0077 C9                                 RET                         ; Done
0549   0078             
0550   0078             ;*****************************************************************************
0551   0078             ;* Slow printing the static texts and filling the scroll register
0552   0078             ;* with background tiles.
0553   0078             ;* Only used at attract mode during the intro splash.
0554   0078             ;*****************************************************************************
0555   0078             SlowPrintScrollRegisterUpdate:
0556   0078 CD 96 01                           CALL    SlowPrintScoreAverageTable
0557   007B C3 F0 06                           JP      L06F0               ; update scroll register and fill background
0558   007E             
0559   0080                                    .ORG $0080
0560   0080             ;*****************************************************************************
0561   0080             ;* Wait for the vertical blanking and then handle coin counting
0562   0080             ;*****************************************************************************
0563   0080             WaitVBlankCoin:
0564   0080 26 78                              LD      H,DSW0 >> 8         ; 78xx DSW0 Check ...
0565   0082 7E                                 LD      A,(HL)              ; ... screen blanking flag
0566   0083 E6 80                              AND     $80                 ; Wait for it ...
0567   0085 CA 80 00                           JP      Z,WaitVBlankCoin    ; ... to set
0568   0088             ; 
0569   0088             L0088:
0570   0088 7E                                 LD      A,(HL)              ; Check screen blanking flag
0571   0089 E6 80                              AND     $80                 ; Wait for it ...
0572   008B C2 88 00                           JP      NZ,L0088            ; ... to clear (0=in blanking)
0573   008E 26 70                              LD      H,IN0 >> 8          ; 70xx IN0 Current value ...
0574   0090 7E                                 LD      A,(HL)              ; ... of IN0 inputs
0575   0091 21 A0 43                           LD      HL,IN0Current       ; Value from ...
0576   0094 46                                 LD      B,(HL)              ; ... last read
0577   0095 77                                 LD      (HL),A              ; Store new value
0578   0096 2C                                 INC     L                   ; To 43A1
0579   0097 70                                 LD      (HL),B              ; Store old value
0580   0098 2E 9B                              LD      L,$9B               ; Bump the ...
0581   009A CD 00 02                           CALL    AddOneToMem         ; ... ?? counter
0582   009D 2E 8F                              LD      L,$8F               ; Get number ...
0583   009F 7E                                 LD      A,(HL)              ; ... of coins
0584   00A0             ;
0585   00A0             ; !! There are two digits for "coins" on the screen, but only the one's digit is
0586   00A0             ; !! changed. Once you get to 9, the code stops counting. It takes the coin
0587   00A0             ; !! from you, but it doesn't give you credit.
0588   00A0             ;
0589   00A0 FE 09                              CP      $09                 ; Already 9?
0590   00A2 C8                                 RET     Z                   ; Yes ... nothing more to check
0591   00A3 D2 00 00                           JP      NC,L0000            ; More than 9? OOPS -- soft reset
0592   00A6 06 01                              LD      B,$01               ; Coin bit of the input register
0593   00A8 CD BB 00                           CALL    CheckInputBits      ; Has the coin input gone from 1 to 0?
0594   00AB C8                                 RET     Z                   ; No ... no coins inserted ... done
0595   00AC 2E 8F                              LD      L,$8F               ; Add one ...
0596   00AE 34                                 INC     (HL)                ; ... to coin count
0597   00AF 7E                                 LD      A,(HL)              ; Current value ...
0598   00B0 C6 20                              ADD     $20                 ; ... to number tile
0599   00B2 32 42 41                           LD      ($4142),A           ; Change number of coins on screen
0600   00B5 C9                                 RET                         ; Done
0601   00B6             
0602   00BB                                    .ORG $00BB
0603   00BB             ;*****************************************************************************
0604   00BB             ;* Check to see if a particular bit(s) in the input register has changed
0605   00BB             ;* from 1 to 0 since last we checked. Return NZ if transitioned from 1 to 0.
0606   00BB             ;*****************************************************************************
0607   00BB             CheckInputBits:
0608   00BB 21 A0 43                           LD      HL,IN0Current       ; Get current ...
0609   00BE 7E                                 LD      A,(HL)              ; ... input value
0610   00BF 2F                                 CPL                         ; Flip the current bits
0611   00C0 A0                                 AND     B                   ; Mask off all but the ones we are checking
0612   00C1 2C                                 INC     L                   ; Point to last input value
0613   00C2 A6                                 AND     (HL)                ; Zero unles new bit is 0 and old is 1
0614   00C3 C9                                 RET                         ; Return state
0615   00C4             
0616   00C4             ;*****************************************************************************
0617   00C4             ;* Prints the number pointed to by HL (points to the end of the number) to the screen pointed
0618   00C4             ;* to by DE (points to the end of the screen area). B is the number of digits to print.
0619   00C4             ;*****************************************************************************
0620   00C4             PrintNumber:
0621   00C4 7E                                 LD      A,(HL)              ; Get the two digits
0622   00C5 E6 0F                              AND     $0F                 ; Keep the LSB
0623   00C7 F6 20                              OR      $20                 ; Offset to number tile
0624   00C9 12                                 LD      (DE),A              ; Store the number tile to screen memory
0625   00CA CD 10 02                           CALL    LeftOneColumn       ; next screen position
0626   00CD 05                                 DEC     B                   ; All done?
0627   00CE C8                                 RET     Z                   ; Yes ... out
0628   00CF 7E                                 LD      A,(HL)              ; Keep the ...
0629   00D0 0F                                 RRCA                        ; ...
0630   00D1 0F                                 RRCA                        ; ...
0631   00D2 0F                                 RRCA                        ; ...
0632   00D3 0F                                 RRCA                        ; ...
0633   00D4 E6 0F                              AND     $0F                 ; ... LSB
0634   00D6 F6 20                              OR      $20                 ; Offset to number tile
0635   00D8 12                                 LD      (DE),A              ; Store the number tile to screen memory
0636   00D9 CD 10 02                           CALL    LeftOneColumn       ; next screen position
0637   00DC 2B                                 DEC     HL                  ; Next data position
0638   00DD 05                                 DEC     B                   ; All digits done?
0639   00DE C2 C4 00                           JP      NZ,PrintNumber      ; No ... keep going
0640   00E1 C9                                 RET                         ; Yes ... out
0641   00E2             
0642   00E3                                    .ORG $00E3
0643   00E3             ;*****************************************************************************
0644   00E3             ;* Handles the intro splash and the game demo.
0645   00E3             ;*****************************************************************************
0646   00E3             SplashAndDemo:
0647   00E3 21 99 43                           LD      HL,M4399            ; starts with 0
0648   00E6 CD 00 02                           CALL    AddOneToMem         ; increases it by one
0649   00E9 01 01 00                           LD      BC,$0001            ;
0650   00EC CD 58 02                           CALL    CompareBCtoMem      ;
0651   00EF CA E1 01                           JP      Z,PrintCopyright    ; do if $4398:$4399 is >= 00 01
0652   00F2 01 02 00                           LD      BC,$0002            ;
0653   00F5 11 1F 01                           LD      DE,$011F            ; used as delay counter
0654   00F8 CD 60 02                           CALL    SubtractIfEnough    ;
0655   00FB D2 96 01                           JP      NC,SlowPrintScoreAverageTable
0656   00FE 01 20 01                           LD      BC,$0120            ; for a longer break
0657   0101 CD 58 02                           CALL    CompareBCtoMem      ;
0658   0104 CA CA 0B                           JP      Z,DrawScoreAverageTableTiles
0659   0107 0E B0                              LD      C,$B0               ; for a short break
0660   0109 CD 58 02                           CALL    CompareBCtoMem      ;
0661   010C CA E1 01                           JP      Z,PrintCopyright    ; do if $4398:$4399 is >= 01 B0
0662   010F 0E B8                              LD      C,$B8               ;
0663   0111 CD 58 02                           CALL    CompareBCtoMem      ;
0664   0114 CA 80 05                           JP      Z,InitGlobalLevelData
0665   0117 0E C0                              LD      C,$C0               ; for a short break
0666   0119 11 DF 02                           LD      DE,$02DF            ;
0667   011C CD 60 02                           CALL    SubtractIfEnough    ;
0668   011F D2 78 00                           JP      NC,SlowPrintScrollRegisterUpdate
0669   0122 01 00 03                           LD      BC,$0300            ;
0670   0125 11 AF 03                           LD      DE,$03AF            ;
0671   0128 CD 60 02                           CALL    SubtractIfEnough    ;
0672   012B D2 DC 21                           JP      NC,DrawIntroBirdAnimationFrame
0673   012E 01 E6 03                           LD      BC,$03E6            ;
0674   0131 11 FF FF                           LD      DE,$FFFF            ;
0675   0134 CD 60 02                           CALL    SubtractIfEnough    ;
0676   0137 D2 B0 03                           JP      NC,GameDemo         ; do if $4398:$4399 is >= 03 E6
0677   013A C9                                 RET                         ;
0678   013B             
0679   0140                                    .ORG $0140
0680   0140             ;*****************************************************************************
0681   0140             ;* Clears foreground and background but leaves the 3 score rows.
0682   0140             ;*****************************************************************************
0683   0140             ClearForeAndBackground:
0684   0140 CD A0 03                           CALL    ClearBackground     ; Clear the background
0685   0143 CD 80 00                           CALL    WaitVBlankCoin      ; Wait for VBlank
0686   0146 CD 80 03                           CALL    ClearForeground     ; Clear the foreground (leave the 3 score rows)
0687   0149 21 A3 43                           LD      HL,GameAndDemoOrSplash
0688   014C 36 02                              LD      (HL),$02            ; set to: 'Intro splash'
0689   014E 2C                                 INC     L                   ; GameState
0690   014F 36 00                              LD      (HL),$00            ; to 0
0691   0151 00                                 NOP                         ; Old command removed or space for a future replace patch
0692   0152 00                                 NOP                         ; ..
0693   0153 00                                 NOP                         ; ..
0694   0154 2E B8                              LD      L,$B8               ; LevelAndRound, $43B9, AliensLeft, BirdsLeft, $43BC, $43BD, BonusLivesAt, $43BF to 0
0695   0156 06 08                              LD      B,$08               ; number of bytes to clear
0696   0158 CD D8 05                           CALL    ClearBbytesAtHL     ;
0697   015B 2E BA                              LD      L,$BA               ; Set AliensLeft
0698   015D 36 10                              LD      (HL),$10            ; to 16 aliens left in wave
0699   015F 2E BE                              LD      L,$BE               ;
0700   0161 3A 00 78                           LD      A,(DSW0)            ; 78xx DSW0, get DIP switch settings
0701   0164 E6 0C                              AND     $0C                 ; mask out 0000_1100 the Bonus lives
0702   0166 07                                 RLCA                        ; rotate left ..
0703   0167 07                                 RLCA                        ; .. to 0011_0000
0704   0168 C6 30                              ADD     $30                 ; $30, $40, $50, or $60
0705   016A 77                                 LD      (HL),A              ; save to BonusLivesAt
0706   016B 26 58                              LD      H,scrollRegister >> 8
0707   016D 36 00                              LD      (HL),$00            ; init screen scrolling
0708   016F CD 80 00                           CALL    WaitVBlankCoin      ;
0709   0172 C9                                 RET                         ;
0710   0173             
0711   0173             ;*****************************************************************************
0712   0173             ;* Used for the game demo during attract mode.
0713   0173             ;* Returning the bits for feeding the IN0Current for the simulated player inputs.
0714   0173             ;* Resulting values are depending on $4398:$4399 .
0715   0173             ;* Counter value goes from $03E6 to $1510 during the demo.
0716   0173             ;* 1010_1110...move left
0717   0173             ;* 1100_1110...move right
0718   0173             ;* 1111_1110...push fire
0719   0173             ;* 0111_1110...push shield
0720   0173             ;*****************************************************************************
0721   0173             GetPlayerInputsForDemo:
0722   0173 7E                                 LD      A,(HL)              ; get $4399 (LSB from 16 bit counter)
0723   0174 E6 7F                              AND     $7F                 ; mask out 0111_1111, (counter goes from 00 to $7F)
0724   0176 06 CE                              LD      B,$CE               ; return : 1100_1110...move right
0725   0178 FE 1F                              CP      $1F                 ; 1st trigger point of demo
0726   017A D8                                 RET     C                   ; return if greater
0727   017B 06 FE                              LD      B,$FE               ; 1111_1110...push fire
0728   017D C8                                 RET     Z                   ; return if equal
0729   017E 06 AE                              LD      B,$AE               ; 1010_1110...move left
0730   0180 FE 5F                              CP      $5F                 ; 2nd trigger point of demo
0731   0182 D8                                 RET     C                   ; return if greater
0732   0183 06 FE                              LD      B,$FE               ; 1111_1110...push fire
0733   0185 C8                                 RET     Z                   ; return if equal
0734   0186 06 CE                              LD      B,$CE               ; 1100_1110...move right
0735   0188 FE 7F                              CP      $7F                 ; 3rd trigger point of demo
0736   018A D8                                 RET     C                   ; return if greater
0737   018B 06 FE                              LD      B,$FE               ; 1111_1110...push fire
0738   018D 2D                                 DEC     L                   ;
0739   018E 7E                                 LD      A,(HL)              ; get $4398 (MSB from 16 bit counter)
0740   018F FE 09                              CP      $09                 ; 4rd trigger point of demo
0741   0191 C0                                 RET     NZ                  ; return if not equal
0742   0192 06 7E                              LD      B,$7E               ; 0111_1110...push shield
0743   0194 C9                                 RET                         ;
0744   0195             
0745   0196                                    .ORG $0196
0746   0196             ;*****************************************************************************
0747   0196             ;* Slow printing the static texts for the score average table 
0748   0196             ;* and the big letters of phoenix title.
0749   0196             ;*****************************************************************************
0750   0196             SlowPrintScoreAverageTable:
0751   0196 7E                                 LD      A,(HL)              ; get actual index for slow print ($4399)
0752   0197 E6 1F                              AND     $1F                 ; mask out 0001_1111
0753   0199 FE 06                              CP      $06                 ; reached state 6 ?
0754   019B D8                                 RET     C                   ; no..return
0755   019C 5F                                 LD      E,A                 ; save the state
0756   019D 7E                                 LD      A,(HL)              ; get actual index for slow print ($4399)
0757   019E E6 E0                              AND     $E0                 ; mask out 1110_0000
0758   01A0 4F                                 LD      C,A                 ; save bits 5,6,7
0759   01A1 2D                                 DEC     L                   ;
0760   01A2 46                                 LD      B,(HL)              ; get zero reference from $4398
0761   01A3 2E A8                              LD      L,$A8               ; ..and..
0762   01A5 70                                 LD      (HL),B              ; save it to $43A8
0763   01A6 2C                                 INC     L                   ;
0764   01A7 71                                 LD      (HL),C              ; save bits 5,6,7 to $43A9
0765   01A8 01 60 18                           LD      BC,T1860            ; data block starting with 'INSERT  COIN' text
0766   01AB CD 06 02                           CALL    AddBCtoMem          ; stores MSB LSB
0767   01AE 7E                                 LD      A,(HL)              ;
0768   01AF 2D                                 DEC     L                   ;
0769   01B0 66                                 LD      H,(HL)              ;
0770   01B1 6F                                 LD      L,A                 ;
0771   01B2 7B                                 LD      A,E                 ;
0772   01B3 56                                 LD      D,(HL)              ; get the data
0773   01B4 2C                                 INC     L                   ;
0774   01B5 5E                                 LD      E,(HL)              ;
0775   01B6 2D                                 DEC     L                   ;
0776   01B7 4F                                 LD      C,A                 ;
0777   01B8 85                                 ADD     A,L                 ;
0778   01B9 6F                                 LD      L,A                 ;
0779   01BA 79                                 LD      A,C                 ;
0780   01BB D6 06                              SUB     $06                 ;
0781   01BD 4F                                 LD      C,A                 ;
0782   01BE CA C8 01                           JP      Z,L01C8             ;
0783   01C1             L01C1:
0784   01C1 CD 17 02                           CALL    RightOneColumn      ; move to next screen position
0785   01C4 0D                                 DEC     C                   ;
0786   01C5 C2 C1 01                           JP      NZ,L01C1            ;
0787   01C8             L01C8:
0788   01C8 7E                                 LD      A,(HL)              ;
0789   01C9 12                                 LD      (DE),A              ; print one character on the screen
0790   01CA C3 E0 14                           JP      L14E0               ; check for coin event
0791   01CD             
0792   01D0                                    .ORG $01D0
0793   01D0             ;*****************************************************************************
0794   01D0             ;* Print the top 3 lines (scores, lives, coins)
0795   01D0             ;*****************************************************************************
0796   01D0             PrintTextLines:
0797   01D0 56                                 LD      D,(HL)              ; Get ...
0798   01D1 2C                                 INC     L                   ; ... the ...
0799   01D2 5E                                 LD      E,(HL)              ; ... screen coord
0800   01D3 7D                                 LD      A,L                 ; Add 5 ...
0801   01D4 C6 05                              ADD     $05                 ; ... go get ...
0802   01D6 6F                                 LD      L,A                 ; ... data
0803   01D7 06 1A                              LD      B,$1A               ; 26 columns
0804   01D9 CD ED 01                           CALL    DrawRow             ; Draw next row
0805   01DC 0D                                 DEC     C                   ; All lines done?
0806   01DD C2 D0 01                           JP      NZ,PrintTextLines   ; No ... draw all rows
0807   01E0 C9                                 RET                         ; Done
0808   01E1             
0809   01E1             ;*****************************************************************************
0810   01E1             ;* Print the copyright lines (bottom 3 lines)
0811   01E1             ;*****************************************************************************
0812   01E1             PrintCopyright:
0813   01E1 CD 40 01                           CALL    ClearForeAndBackground
0814   01E4             L01E4:
0815   01E4 21 60 19                           LD      HL,T1960            ; "PHOENIX ... U.S.A"
0816   01E7 0E 03                              LD      C,$03               ; 3 lines at the bottom
0817   01E9 C3 D0 01                           JP      PrintTextLines      ; Print the copyright
0818   01EC             
0819   01ED                                    .ORG $01ED
0820   01ED             ;*****************************************************************************
0821   01ED             ;* Remember the screen is rotated.
0822   01ED             ;* This draws a column in screen memory (row on the screen)
0823   01ED             ;*****************************************************************************
0824   01ED             DrawRow:
0825   01ED 7E                                 LD      A,(HL)              ; Copy the data ...
0826   01EE 12                                 LD      (DE),A              ; .. to the screen
0827   01EF 23                                 INC     HL                  ; Next in data
0828   01F0 CD 17 02                           CALL    RightOneColumn      ; Move DE to next row
0829   01F3 05                                 DEC     B                   ; All drawn?
0830   01F4 C2 ED 01                           JP      NZ,DrawRow          ; Draw them all
0831   01F7 C9                                 RET                         ; Done
0832   01F8             
0833   0200                                    .ORG $0200
0834   0200             ;*****************************************************************************
0835   0200             ;* Two-byte +1 to (HL-1) : (HL).
0836   0200             ;*****************************************************************************
0837   0200             AddOneToMem:
0838   0200 34                                 INC     (HL)                ; Add one to LSB
0839   0201 C0                                 RET     NZ                  ; We didn't overflow ... done
0840   0202 2D                                 DEC     L                   ; Back up to MSB
0841   0203 34                                 INC     (HL)                ; Carry into the MSB
0842   0204 2C                                 INC     L                   ; Restore point to LSB
0843   0205 C9                                 RET                         ; Done
0844   0206             
0845   0206             ;*****************************************************************************
0846   0206             ;* Two-byte addition. BC is added to (HL-1) : (HL).
0847   0206             ;*****************************************************************************
0848   0206             AddBCtoMem:
0849   0206 7E                                 LD      A,(HL)              ; Get the lower byte
0850   0207 81                                 ADD     A,C                 ; Add C to the lower
0851   0208 77                                 LD      (HL),A              ; Store the new lower
0852   0209 2D                                 DEC     L                   ; Back up to upper byte
0853   020A 7E                                 LD      A,(HL)              ; Add B and carry ...
0854   020B 88                                 ADC     A,B                 ; ... to upper byte
0855   020C 77                                 LD      (HL),A              ; Store the new upper byte
0856   020D 2C                                 INC     L                   ; Restore pointer to LSB
0857   020E C9                                 RET                         ; Done
0858   020F             
0859   0210                                    .ORG $0210
0860   0210             ;*****************************************************************************
0861   0210             ;* Add 32 (left one column on the rotated screen) to DE (two bytes)
0862   0210             ;*****************************************************************************
0863   0210             LeftOneColumn:
0864   0210 7B                                 LD      A,E                 ; Add ...
0865   0211 C6 20                              ADD     $20                 ; ... 32 to ...
0866   0213 5F                                 LD      E,A                 ; ... E
0867   0214 D0                                 RET     NC                  ; No carry ... we are done
0868   0215 14                                 INC     D                   ; Carry into D
0869   0216 C9                                 RET                         ; Done
0870   0217             
0871   0217             ;*****************************************************************************
0872   0217             ;* Subtract 32 (right one column on the rotated screen) from DE (two bytes)
0873   0217             ;*****************************************************************************
0874   0217             RightOneColumn:
0875   0217 7B                                 LD      A,E                 ; Subtract ...
0876   0218 D6 20                              SUB     $20                 ; ... 32 from ...
0877   021A 5F                                 LD      E,A                 ; ... E
0878   021B D0                                 RET     NC                  ; No borrow ... we are done
0879   021C 15                                 DEC     D                   ; Borrow from D
0880   021D C9                                 RET                         ; Done
0881   021E             
0882   0220                                    .ORG $0220
0883   0220             ;*****************************************************************************
0884   0220             ;* 3-byte (6 digit) BCD addition. Add BC*10 to (HL-2):(HL-1):(HL).
0885   0220             ;* The games keeps the lowest digit of the scores to 0.
0886   0220             ;*****************************************************************************
0887   0220             AddToScore:
0888   0220 AF                                 XOR     A                   ; !! Pointless. We are about to change A and the flags
0889   0221 7E                                 LD      A,(HL)              ; Lowest 2 digits
0890   0222 81                                 ADD     A,C                 ; Add C to score
0891   0223 27                                 DAA                         ; Adjust for binary coded decimal
0892   0224 77                                 LD      (HL),A              ; Update lowest 2 digits
0893   0225 2D                                 DEC     L                   ; Point to middle 2 digits
0894   0226 7E                                 LD      A,(HL)              ; Add B to ...
0895   0227 88                                 ADC     A,B                 ; ... score
0896   0228 27                                 DAA                         ; Adjust for BCD
0897   0229 77                                 LD      (HL),A              ; Store the middle 2 digits
0898   022A 2D                                 DEC     L                   ; Point to the upper 2 digits
0899   022B 7E                                 LD      A,(HL)              ; Add in ...
0900   022C CE 00                              ADC     $00                 ; ... any carry
0901   022E 27                                 DAA                         ; Adjust for binary coded decimal
0902   022F 77                                 LD      (HL),A              ; Store the upper 2 digits
0903   0230 2C                                 INC     L                   ; Restore ...
0904   0231 2C                                 INC     L                   ; ... pointer
0905   0232 C9                                 RET                         ; Done
0906   0233             
0907   0258                                    .ORG $0258
0908   0258             ;*****************************************************************************
0909   0258             ;* Two byte compare of BC to memory at (HL-1):(HL)
0910   0258             ;*****************************************************************************
0911   0258             CompareBCtoMem:
0912   0258 7E                                 LD      A,(HL)              ; Value from memory
0913   0259 B9                                 CP      C                   ; Are the lower values the same?
0914   025A C0                                 RET     NZ                  ; No ... return not-zero
0915   025B 2D                                 DEC     L                   ; Point to MSB
0916   025C 7E                                 LD      A,(HL)              ; Get the MSB value
0917   025D 2C                                 INC     L                   ; Restore the pointer
0918   025E B8                                 CP      B                   ; Compare the MSBs
0919   025F C9                                 RET                         ; Return the flags
0920   0260             
0921   0260             ;*****************************************************************************
0922   0260             ;* Subtract DE from memory if memory is greater/equal to BC.
0923   0260             ;*****************************************************************************
0924   0260             SubtractIfEnough:
0925   0260 CD 70 02                           CALL    SubtractFromMemory  ; Try subtraction. Is memory larger (or equal) to BC?
0926   0263 D8                                 RET     C                   ; No ... ignore request
0927   0264 CD 77 02                           CALL    SubtractToMemory    ; Yes ... subtract DE from memory
0928   0267 C9                                 RET                         ; Done
0929   0268             
0930   0270                                    .ORG $0270
0931   0270             ;*****************************************************************************
0932   0270             ;* Two byte subtraction of memory from BC. BC = BC -  (HL-1):(HL)
0933   0270             ;*****************************************************************************
0934   0270             SubtractFromMemory:
0935   0270 7E                                 LD      A,(HL)              ; Get the low byte
0936   0271 91                                 SUB     C                   ; Subtract from C
0937   0272 2D                                 DEC     L                   ; Point to upper byte
0938   0273 7E                                 LD      A,(HL)              ; Get the upper byte
0939   0274 98                                 SBC     B                   ; Subtract from B (with borrow)
0940   0275 2C                                 INC     L                   ; Restore pointer
0941   0276 C9                                 RET                         ; Done
0942   0277             
0943   0277             ;*****************************************************************************
0944   0277             ;* Two byte subtraction of DE from memory. (HL-1):(HL) = (HL-1):(HL) - DE
0945   0277             ;*****************************************************************************
0946   0277             SubtractToMemory:
0947   0277 7B                                 LD      A,E                 ; Lower byte
0948   0278 96                                 SUB     (HL)                ; Subtract it from memory
0949   0279 2D                                 DEC     L                   ; Point to upper byte
0950   027A 7A                                 LD      A,D                 ; Value to A
0951   027B 9E                                 SBC     (HL)                ; Subtract upper byte from memory (with borrow)
0952   027C 2C                                 INC     L                   ; Restore pointer
0953   027D C9                                 RET                         ; Done
0954   027E             
0955   0280                                    .ORG $0280
0956   0280             ;*****************************************************************************
0957   0280             ;* Two byte compare of HL to BC
0958   0280             ;*****************************************************************************
0959   0280             CompareHLtoBC:
0960   0280 7D                                 LD      A,L                 ; Compare lower ...
0961   0281 B9                                 CP      C                   ; ... bytes
0962   0282 C0                                 RET     NZ                  ; Not the same ... return NZ
0963   0283 7C                                 LD      A,H                 ; Compare upper ...
0964   0284 B8                                 CP      B                   ; ... bytes
0965   0285 C9                                 RET                         ; Return the check
0966   0286             
0967   0288                                    .ORG $0288
0968   0288             ;*****************************************************************************
0969   0288             ;* Start game screen
0970   0288             ;*****************************************************************************
0971   0288             PromptForStartGame:
0972   0288 CD 40 01                           CALL    ClearForeAndBackground
0973   028B 21 C0 19                           LD      HL,T19C0            ; 
0974   028E 0E 02                              LD      C,$02               ; print two lines: 'PUSH ONLY...1PLAYER BUTTON'
0975   0290 CD D0 01                           CALL    PrintTextLines      ;
0976   0293 0E 02                              LD      C,$02               ;
0977   0295 CD E0 17                           CALL    CoinChecking        ;
0978   0298 FE 02                              CP      $02                 ; 2 player mode possible if credit > 1
0979   029A DA A7 02                           JP      C,L02A7             ;
0980   029D 21 A0 1B                           LD      HL,T1BA0            ;
0981   02A0 0E 01                              LD      C,$01               ; print one line: '1 OR 2PLAYERS BUTTON'
0982   02A2 CD D0 01                           CALL    PrintTextLines      ;
0983   02A5 0E 06                              LD      C,$06               ;
0984   02A7             L02A7:
0985   02A7 3A 00 70                           LD      A,(IN0)             ; 70xx IN0  Get the bits...
0986   02AA 2F                                 CPL                         ; ...for the two...
0987   02AB A1                                 AND     C                   ; ...start buttons and...
0988   02AC C8                                 RET     Z                   ; ...ret if no start button was pressed.
0989   02AD CD CB 02                           CALL    DecrementCoins      ; (GameOrAttract will be affected here as well)
0990   02B0 CD F0 02                           CALL    UpdateHiScore       ;
0991   02B3 CD 2E 03                           CALL    ClearAndPrintScores ;
0992   02B6 CD 50 03                           CALL    GetPlayerLivesFromDip
0993   02B9 CD 40 01                           CALL    ClearForeAndBackground
0994   02BC 26 50                              LD      H,videoRegister >> 8
0995   02BE 36 01                              LD      (HL),$01            ;
0996   02C0 CD 40 01                           CALL    ClearForeAndBackground
0997   02C3 26 50                              LD      H,videoRegister >> 8
0998   02C5 36 00                              LD      (HL),$00            ;
0999   02C7 C9                                 RET                         ;
1000   02C8             
1001   02CB                                    .ORG $02CB
1002   02CB             ;*****************************************************************************
1003   02CB             ;* Coin handling
1004   02CB             ;*****************************************************************************
1005   02CB             DecrementCoins:
1006   02CB 0E 01                              LD      C,$01               ; Value for 'one player game mode'
1007   02CD FE 02                              CP      $02                 ; A register holds the value of start buttons
1008   02CF CA D4 02                           JP      Z,L02D4             ; jump if 'start 1' was pressed.
1009   02D2 0E 02                              LD      C,$02               ; Value for 'two players game mode'
1010   02D4             L02D4:
1011   02D4 21 A2 43                           LD      HL,GameOrAttract    ; 
1012   02D7 71                                 LD      (HL),C              ; set it to 1 or 2 and leave the attract mode.
1013   02D8 3A 00 78                           LD      A,(DSW0)            ; 78xx DSW0
1014   02DB E6 10                              AND     $10                 ; mask for coinage 0001_0000
1015   02DD CA E3 02                           JP      Z,L02E3             ;
1016   02E0 79                                 LD      A,C                 ;
1017   02E1 07                                 RLCA                        ; Multiply by 2
1018   02E2 4F                                 LD      C,A                 ;
1019   02E3             L02E3:
1020   02E3 2E 8F                              LD      L,CoinCount & $FF   ; LSB of CoinCount
1021   02E5 7E                                 LD      A,(HL)              ; get CoinCount value
1022   02E6 91                                 SUB     C                   ; decrement coins
1023   02E7 77                                 LD      (HL),A              ; save it
1024   02E8 C6 20                              ADD     $20                 ; map value to character code
1025   02EA 32 42 41                           LD      (ForegroundScreen+$142),A ; updates the number of coins on the screen
1026   02ED C9                                 RET                         ;
1027   02EE             
1028   02F0                                    .ORG $02F0
1029   02F0             ;*****************************************************************************
1030   02F0             ;* Copy the score to hi score if greater
1031   02F0             ;*****************************************************************************
1032   02F0             UpdateHiScore:
1033   02F0 11 83 43                           LD      DE,Score1low        ; score of player 1
1034   02F3 21 8B 43                           LD      HL,HiScorelow       ; current hi score
1035   02F6 CD 14 03                           CALL    L0314               ;
1036   02F9 D4 20 03                           CALL    NC,L0320            ;
1037   02FC 1E 87                              LD      E,Score2low & $FF   ; LSB of Score2low
1038   02FE 2E 8B                              LD      L,HiScorelow & $FF  ; LSB of HiScorelow
1039   0300 CD 14 03                           CALL    L0314               ;
1040   0303 D4 20 03                           CALL    NC,L0320            ;
1041   0306 2E 8B                              LD      L,HiScorelow & $FF  ; LSB of HiScorelow
1042   0308 11 41 41                           LD      DE,$4141            ; High-score Screen coordinates (LSB)
1043   030B 06 06                              LD      B,$06               ; 6 digits
1044   030D CD C4 00                           CALL    PrintNumber         ; Print the 6-digit number
1045   0310 C9                                 RET                         ; Done
1046   0311             
1047   0314                                    .ORG $0314
1048   0314             L0314:
1049   0314 1A                                 LD      A,(DE)              ;
1050   0315 96                                 SUB     (HL)                ;
1051   0316 1D                                 DEC     E                   ;
1052   0317 2D                                 DEC     L                   ;
1053   0318 1A                                 LD      A,(DE)              ;
1054   0319 9E                                 SBC     (HL)                ;
1055   031A 1D                                 DEC     E                   ;
1056   031B 2D                                 DEC     L                   ;
1057   031C 1A                                 LD      A,(DE)              ;
1058   031D 9E                                 SBC     (HL)                ;
1059   031E C9                                 RET                         ;
1060   031F             
1061   0320                                    .ORG $0320
1062   0320             L0320:
1063   0320 1A                                 LD      A,(DE)              ;
1064   0321 77                                 LD      (HL),A              ;
1065   0322 13                                 INC     DE                  ;
1066   0323 23                                 INC     HL                  ;
1067   0324 1A                                 LD      A,(DE)              ;
1068   0325 77                                 LD      (HL),A              ;
1069   0326 13                                 INC     DE                  ;
1070   0327 23                                 INC     HL                  ;
1071   0328 1A                                 LD      A,(DE)              ;
1072   0329 77                                 LD      (HL),A              ;
1073   032A C9                                 RET                         ;
1074   032B             
1075   032E                                    .ORG $032E
1076   032E             ;*****************************************************************************
1077   032E             ;* Update of the score values on screen.
1078   032E             ;*****************************************************************************
1079   032E             ClearAndPrintScores:
1080   032E 21 80 43                           LD      HL,M4380            ; Clear scores..
1081   0331             L0331:
1082   0331 36 00                              LD      (HL),$00            ; ..from $4380..
1083   0333 23                                 INC     HL                  ;
1084   0334 7D                                 LD      A,L                 ;
1085   0335 FE 88                              CP      $88                 ; ..to $4387
1086   0337 C2 31 03                           JP      NZ,L0331            ;
1087   033A 2E 83                              LD      L,Score1low & $FF   ; print player 1 score
1088   033C 11 61 42                           LD      DE,$4261            ; Score1 screen coordinates (LSB)
1089   033F 06 06                              LD      B,$06               ; 6 digits
1090   0341 CD C4 00                           CALL    PrintNumber         ;
1091   0344 2E 87                              LD      L,Score2low & $FF   ; print player 2 score
1092   0346 11 21 40                           LD      DE,$4021            ; Score2 screen coordinates (LSB)
1093   0349 06 06                              LD      B,$06               ; 6 digits
1094   034B CD C4 00                           CALL    PrintNumber         ;
1095   034E C9                                 RET                         ; Done
1096   034F             
1097   0350                                    .ORG $0350
1098   0350             ;*****************************************************************************
1099   0350             ;* Gets the DIP switch settings for player lives.
1100   0350             ;*****************************************************************************
1101   0350             GetPlayerLivesFromDip:
1102   0350 3A 00 78                           LD      A,(DSW0)            ; 78xx DSW0, get DIP switch settings
1103   0353 E6 03                              AND     $03                 ; mask out 0000_0011 number of lives
1104   0355 C6 03                              ADD     $03                 ; to get : 03, 04, 05 or 06
1105   0357 47                                 LD      B,A                 ;
1106   0358 21 90 43                           LD      HL,Player1Lives     ;
1107   035B 70                                 LD      (HL),B              ; save it
1108   035C 2E A2                              LD      L,GameOrAttract & $FF
1109   035E 7E                                 LD      A,(HL)              ; load GameOrAttract and ..
1110   035F FE 01                              CP      $01                 ; check if one or two players mode
1111   0361 CA 67 03                           JP      Z,UpdateLivesScreen ;
1112   0364 2E 91                              LD      L,Player2Lives & $FF
1113   0366 70                                 LD      (HL),B              ; save it to Player2Lives
1114   0367             
1115   0367             ;*****************************************************************************
1116   0367             ;* Updates the number of lives on the screen
1117   0367             ;*****************************************************************************
1118   0367             UpdateLivesScreen:
1119   0367 2E 90                              LD      L,Player1Lives & $FF
1120   0369 7E                                 LD      A,(HL)              ; load Player1Lives
1121   036A F6 20                              OR      $20                 ; map value to character code
1122   036C 32 A2 42                           LD      (ForegroundScreen+$2A2),A ; number of lives, for player 1 at screen ram
1123   036F 2C                                 INC     L                   ;
1124   0370 7E                                 LD      A,(HL)              ; load Player2Lives
1125   0371 F6 20                              OR      $20                 ; map value to character code
1126   0373 32 62 40                           LD      (ForegroundScreen+$62),A ; number of lives, for player 2 at screen ram
1127   0376 C9                                 RET                         ;
1128   0377             
1129   0377             ;*****************************************************************************
1130   0377             ;* Update the sound control RAM registers
1131   0377             ;*****************************************************************************
1132   0377             UpdateSoundControlRAM:
1133   0377 21 8C 43                           LD      HL,SoundControlA    ;
1134   037A 77                                 LD      (HL),A              ;
1135   037B 2C                                 INC     L                   ; and update ..
1136   037C 77                                 LD      (HL),A              ; .. SoundControlB
1137   037D C9                                 RET                         ;
1138   037E             
1139   0380                                    .ORG $0380
1140   0380             ;*****************************************************************************
1141   0380             ;* Clears the foreground except for the top 3 rows (the scores)
1142   0380             ;*****************************************************************************
1143   0380             ClearForeground:
1144   0380 21 3F 43                           LD      HL,ForegroundScreen+$33F       ; End of foreground screen
1145   0383 11 1F 00                           LD      DE,$001F            ; 00 for clear and 1F for finding end of a column
1146   0386 01 3F 03                           LD      BC,$033F            ; 03 for leaving top 3 rows and 3F for find the beginning of screen memory
1147   0389             L0389:
1148   0389 72                                 LD      (HL),D              ; Clear the screen
1149   038A 2B                                 DEC     HL                  ; Next location
1150   038B 72                                 LD      (HL),D              ; Clear the screen
1151   038C 2B                                 DEC     HL                  ; Next location
1152   038D 7D                                 LD      A,L                 ; Keep lower 5 ...
1153   038E A3                                 AND     E                   ; ... bits (32 bytes in a column)
1154   038F B8                                 CP      B                   ; At the top of the column?
1155   0390 C2 89 03                           JP      NZ,L0389            ; No ... keep clearing the column
1156   0393 72                                 LD      (HL),D              ; Clear the 4th column from the top
1157   0394 2B                                 DEC     HL                  ; To ...
1158   0395 2B                                 DEC     HL                  ; ... top ...
1159   0396 2B                                 DEC     HL                  ; ... of the ...
1160   0397 2B                                 DEC     HL                  ; ... row
1161   0398 7C                                 LD      A,H                 ; Have we reached ...
1162   0399 B9                                 CP      C                   ; ... 3FFF ?
1163   039A C2 89 03                           JP      NZ,L0389            ; No ... clear all columns
1164   039D C9                                 RET                         ; Done
1165   039E             
1166   03A0                                    .ORG $03A0
1167   03A0             ;*****************************************************************************
1168   03A0             ;* Clears the background screen.
1169   03A0             ;*****************************************************************************
1170   03A0             ClearBackground:
1171   03A0 21 3F 4B                           LD      HL,BackgroundScreen+$33F       ; End of background screen memory
1172   03A3 11 47 00                           LD      DE,$0047            ; 00 for clear and 47 to find the beginning of screen memory
1173   03A6             L03A6:
1174   03A6 72                                 LD      (HL),D              ; Clear the screen
1175   03A7 2B                                 DEC     HL                  ; Next location
1176   03A8 72                                 LD      (HL),D              ; Clear the screen
1177   03A9 2B                                 DEC     HL                  ; Next location
1178   03AA 7C                                 LD      A,H                 ; Have we reached ...
1179   03AB BB                                 CP      E                   ; HL = 47FF ?
1180   03AC C2 A6 03                           JP      NZ,L03A6            ; No ... keep clearing
1181   03AF C9                                 RET                         ; Done
1182   03B0             
1183   03B0             ;*****************************************************************************
1184   03B0             ;* The game demo is using the real game code with simulated player inputs.
1185   03B0             ;* The timeline of the game demo, as part of the attract mode,
1186   03B0             ;* is covered by a 16 bit counter $4398:$4399.
1187   03B0             ;* 1st demo from value: $03E6 to $07A0.
1188   03B0             ;* 2nd demo from value: $0800 to $0B60.
1189   03B0             ;* 3rd demo from value: $0C00 to $1510.
1190   03B0             ;*****************************************************************************
1191   03B0             GameDemo:
1192   03B0 01 A0 07                           LD      BC,$07A0            ;
1193   03B3 CD 70 02                           CALL    SubtractFromMemory  ;
1194   03B6 DA CE 03                           JP      C,L03CE             ;
1195   03B9 CD 58 02                           CALL    CompareBCtoMem      ;
1196   03BC CA EB 03                           JP      Z,L03EB             ;
1197   03BF 01 60 0B                           LD      BC,$0B60            ;
1198   03C2 CD 70 02                           CALL    SubtractFromMemory  ;
1199   03C5 DA CE 03                           JP      C,L03CE             ;
1200   03C8 CD 58 02                           CALL    CompareBCtoMem      ;
1201   03CB CA E2 03                           JP      Z,L03E2             ;
1202   03CE             L03CE:
1203   03CE CD 73 01                           CALL    GetPlayerInputsForDemo
1204   03D1 21 A0 43                           LD      HL,IN0Current       ;
1205   03D4 7E                                 LD      A,(HL)              ;
1206   03D5 E6 01                              AND     $01                 ; mask out real button presses, but leave the coin event.
1207   03D7 B0                                 OR      B                   ; feed the IN0Current with movement data
1208   03D8 77                                 LD      (HL),A              ; for the game demo.
1209   03D9 C3 00 04                           JP      GameStateMachine    ;
1210   03DC             
1211   03E2                                    .ORG $03E2
1212   03E2             ; Used for changing the game demo level at attract mode.
1213   03E2             L03E2:
1214   03E2 01 08 01                           LD      BC,$0108            ; Next interval game state is 1, set LevelAndRound to 1st round, level 8 (mothership wave)
1215   03E5 11 00 10                           LD      DE,$1000            ; set AliensLeft to 1 and BirdsLeft to 0 ?
1216   03E8 C3 F1 03                           JP      L03F1               ; 
1217   03EB             
1218   03EB             ; Used for changing the game demo level at attract mode.
1219   03EB             L03EB:
1220   03EB 01 04 01                           LD      BC,$0104            ;
1221   03EE 11 08 00                           LD      DE,$0008            ;
1222   03F1             L03F1:
1223   03F1 21 A4 43                           LD      HL,GameState        ; Next interval game state ...
1224   03F4 70                                 LD      (HL),B              ; ... is 1 (flashing of score)
1225   03F5 2E B8                              LD      L,$B8               ;
1226   03F7 71                                 LD      (HL),C              ; set LevelAndRound to 1st round, level 4 (blue birds wave)
1227   03F8 2E BA                              LD      L,$BA               ;
1228   03FA 72                                 LD      (HL),D              ; set AliensLeft to 0
1229   03FB 2C                                 INC     L                   ;
1230   03FC 73                                 LD      (HL),E              ; set BirdsLeft to 8
1231   03FD C9                                 RET                         ;
1232   03FE             
1233   0400                                    .ORG $0400
1234   0400             ;*****************************************************************************
1235   0400             ;* Game state machine.
1236   0400             ;* Jump to function by number in GameState.
1237   0400             ;*****************************************************************************
1238   0400             GameStateMachine:
1239   0400 21 0E 04                           LD      HL,T040E            ; Jump table
1240   0403 3A A4 43                           LD      A,(GameState)       ;
1241   0406 07                                 RLCA                        ; *2
1242   0407 85                                 ADD     A,L                 ; Offset ...
1243   0408 6F                                 LD      L,A                 ; ... into the table
1244   0409 7E                                 LD      A,(HL)              ; MSB of destination
1245   040A 2C                                 INC     L                   ; Get the
1246   040B 6E                                 LD      L,(HL)              ; ... LSB of destination
1247   040C 67                                 LD      H,A                 ; Now point to function
1248   040D E9                                 JP      (HL)                ; Jump to function
1249   040E             
1250   040E             ; Notice these addresses are MSB:LSB (backwards from the processor's endianness)
1251   040E             T040E:
1252   040E                                    .MSFIRST
1253   040E 04 30                              .DW L0430                   ; game state 0: called once at 'new game start'
1254   0410 04 AC                              .DW L04AC                   ; game state 1: called for each frame during 'flashing of score1 or 2'
1255   0412 05 15                              .DW L0515                   ; game state 2: called once for initialization of game and level data
1256   0414 08 00                              .DW L0800                   ; game state 3: called for each frame of normal game play
1257   0416 0A EA                              .DW L0AEA                   ; game state 4: called for each frame of 'player ship partikel explosion'
1258   0418 0B 60                              .DW L0B60                   ; game state 5: called for each frame during 'GAME OVER' text
1259   041A 24 00                              .DW L2400                   ; game state 6: called for each frame during 'mother ship partikel explosion'
1260   041C 24 4C                              .DW L244C                   ; game state 7: called for each frame during 'mother ship score display'
1261   041E             
1262   041E             ;*****************************************************************************
1263   041E             ;* Set lower bits of video register,
1264   041E             ;* for the color palette, memory bank, and the screen flipping at cocktail mode.
1265   041E             ;*****************************************************************************
1266   041E             SetBitsVideoRegister:
1267   041E 3A A3 43                           LD      A,(GameAndDemoOrSplash)
1268   0421 E6 01                              AND     $01                 ; mask out 0000_0001 for 'memory bank'
1269   0423 47                                 LD      B,A                 ;
1270   0424 3A B8 43                           LD      A,(LevelAndRound)   ;
1271   0427 E6 02                              AND     $02                 ; masc out 0000_0010 for 'color palette'
1272   0429 B0                                 OR      B                   ; set the bits at...
1273   042A 32 00 50                           LD      (videoRegister),A   ; 50xx video register
1274   042D C9                                 RET                         ;
1275   042E             
1276   0430                                    .ORG $0430
1277   0430             ;*****************************************************************************
1278   0430             ;* Game state 0.
1279   0430             ;* New game start.
1280   0430             ;*****************************************************************************
1281   0430             L0430:
1282   0430 21 A4 43                           LD      HL,GameState        ; Next interval game state ...
1283   0433 36 01                              LD      (HL),$01            ; ... is 1 (flashing of score)
1284   0435 2C                                 INC     L                   ;
1285   0436 36 80                              LD      (HL),$80            ; Set value for CounterA5 (score flash time)
1286   0438 2E A3                              LD      L,GameAndDemoOrSplash & $FF   ; save the value of..
1287   043A 7E                                 LD      A,(HL)              ; .. GameAndDemoOrSplash
1288   043B 36 00                              LD      (HL),$00            ; set it to game demo / game play
1289   043D FE 02                              CP      $02                 ;
1290   043F C8                                 RET     Z                   ; return if it was 'Intro splash' before.
1291   0440 77                                 LD      (HL),A              ; set GameAndDemoOrSplash to 'Game and demo for player 1'
1292   0441 2D                                 DEC     L                   ;
1293   0442 7E                                 LD      A,(HL)              ; get GameOrAttract
1294   0443 FE 01                              CP      $01                 ;
1295   0445 C8                                 RET     Z                   ; return if 'One player game mode'
1296   0446 2C                                 INC     L                   ;
1297   0447 7E                                 LD      A,(HL)              ; get GameAndDemoOrSplash
1298   0448 A7                                 AND     A                   ; updates the zero flag
1299   0449 CA A0 04                           JP      Z,L04A0             ; if 'Game and demo'
1300   044C 2E 90                              LD      L,$90               ;
1301   044E 7E                                 LD      A,(HL)              ; get Player1Lives
1302   044F A7                                 AND     A                   ; updates the zero flag
1303   0450 C8                                 RET     Z                   ; return if no lives left.
1304   0451 2E A3                              LD      L,$A3               ;
1305   0453 36 00                              LD      (HL),$00            ; set GameAndDemoOrSplash to 'Game and demo for player 1'
1306   0455 01 00 01                           LD      BC,$0100            ; from bank 1 to bank 0
1307   0458 CD 60 04                           CALL    CopyMemoryBank      ; to toggle the player
1308   045B C9                                 RET                         ;
1309   045C             
1310   0460                                    .ORG $0460
1311   0460             ;*****************************************************************************
1312   0460             ;* Copy memory bank to bank
1313   0460             ;* B=from bank number, C=to bank number
1314   0460             ;* Starts at 4320
1315   0460             ;*****************************************************************************
1316   0460             CopyMemoryBank:
1317   0460 21 00 50                           LD      HL,videoRegister    ; 50xx video register
1318   0463 11 20 43                           LD      DE,ForegroundScreen+$320; 1st row 1st line
1319   0466             L0466:
1320   0466 70                                 LD      (HL),B              ;
1321   0467 1A                                 LD      A,(DE)              ;
1322   0468 71                                 LD      (HL),C              ;
1323   0469 12                                 LD      (DE),A              ;
1324   046A 1C                                 INC     E                   ;
1325   046B 7B                                 LD      A,E                 ;
1326   046C E6 03                              AND     $03                 ;
1327   046E C2 66 04                           JP      NZ,L0466            ;
1328   0471 7B                                 LD      A,E                 ;
1329   0472 E6 F0                              AND     $F0                 ;
1330   0474 D6 20                              SUB     $20                 ;
1331   0476 5F                                 LD      E,A                 ;
1332   0477 D2 66 04                           JP      NC,L0466            ;
1333   047A 15                                 DEC     D                   ;
1334   047B 7A                                 LD      A,D                 ;
1335   047C FE 3F                              CP      $3F                 ;
1336   047E C2 66 04                           JP      NZ,L0466            ;
1337   0481 11 80 43                           LD      DE,M4380            ;
1338   0484             L0484:
1339   0484 70                                 LD      (HL),B              ;
1340   0485 1A                                 LD      A,(DE)              ;
1341   0486 71                                 LD      (HL),C              ;
1342   0487 12                                 LD      (DE),A              ;
1343   0488 1C                                 INC     E                   ;
1344   0489 7B                                 LD      A,E                 ;
1345   048A FE B8                              CP      $B8                 ;
1346   048C C2 84 04                           JP      NZ,L0484            ;
1347   048F 11 C0 4B                           LD      DE,M4BC0            ;
1348   0492             L0492:
1349   0492 70                                 LD      (HL),B              ;
1350   0493 1A                                 LD      A,(DE)              ;
1351   0494 71                                 LD      (HL),C              ;
1352   0495 12                                 LD      (DE),A              ;
1353   0496 1C                                 INC     E                   ;
1354   0497 7B                                 LD      A,E                 ;
1355   0498 FE 00                              CP      $00                 ;
1356   049A C2 92 04                           JP      NZ,L0492            ;
1357   049D C9                                 RET                         ;
1358   049E             
1359   04A0                                    .ORG $04A0
1360   04A0             L04A0:
1361   04A0 2E A3                              LD      L,$A3               ; set GameAndDemoOrSplash
1362   04A2 36 01                              LD      (HL),$01            ; to 'Game for player 2'
1363   04A4 01 01 00                           LD      BC,$0001            ; from bank 0 to bank 1
1364   04A7 CD 60 04                           CALL    CopyMemoryBank      ; to toggle the player
1365   04AA C9                                 RET                         ;
1366   04AB             
1367   04AC                                    .ORG $04AC
1368   04AC             ;*****************************************************************************
1369   04AC             ;* Game state 1.
1370   04AC             ;* Flashing of score1 or 2.
1371   04AC             ;*****************************************************************************
1372   04AC             L04AC:
1373   04AC 21 A5 43                           LD      HL,CounterA5        ;
1374   04AF 35                                 DEC     (HL)                ; decrement counter
1375   04B0 7E                                 LD      A,(HL)              ; save value
1376   04B1 2D                                 DEC     L                   ; HL=A3A4 next game state ..
1377   04B2 36 02                              LD      (HL),$02            ; .. is 2
1378   04B4 A7                                 AND     A                   ; ret if ..
1379   04B5 C8                                 RET     Z                   ; counter 0
1380   04B6 36 01                              LD      (HL),$01            ; set game state to 1
1381   04B8 FE 7F                              CP      $7F                 ; 0111_1111
1382   04BA CA F0 07                           JP      Z,L07F0             ;
1383   04BD 2E 9A                              LD      L,$9A               ;
1384   04BF 36 00                              LD      (HL),$00            ; reset Counter9A MSB
1385   04C1 2C                                 INC     L                   ; and ..
1386   04C2 36 00                              LD      (HL),$00            ; LSB
1387   04C4 E6 08                              AND     $08                 ; 0000_1000
1388   04C6 C2 E6 04                           JP      NZ,L04E6            ;
1389   04C9 CD E8 06                           CALL    L06E8               ;
1390   04CC 00                                 NOP                         ;
1391   04CD 21 A3 43                           LD      HL,GameAndDemoOrSplash
1392   04D0 7E                                 LD      A,(HL)              ;
1393   04D1 A7                                 AND     A                   ; updates the zero flag
1394   04D2 2E 83                              LD      L,$83               ; LSB of Score1low adress
1395   04D4 11 61 42                           LD      DE,$4261            ; screen ram addr. of lowest score digit player 1
1396   04D7 CA DF 04                           JP      Z,L04DF             ; 
1397   04DA 2E 87                              LD      L,$87               ; LSB of Score2low adress
1398   04DC 11 21 40                           LD      DE,$4021            ; screen ram addr. of lowest score digit player 2
1399   04DF             L04DF:
1400   04DF 06 06                              LD      B,$06               ; number of digits to print
1401   04E1 CD C4 00                           CALL    PrintNumber         ;
1402   04E4 C9                                 RET                         ;
1403   04E5             
1404   04E6                                    .ORG $04E6
1405   04E6             L04E6:
1406   04E6 21 A3 43                           LD      HL,GameAndDemoOrSplash
1407   04E9 7E                                 LD      A,(HL)              ;
1408   04EA A7                                 AND     A                   ; updates the zero flag
1409   04EB 11 61 42                           LD      DE,$4261            ; screen ram addr. of lowest score digit player 1
1410   04EE CA F4 04                           JP      Z,L04F4             ;
1411   04F1 11 21 40                           LD      DE,$4021            ; screen ram addr. of lowest score digit player 2
1412   04F4             L04F4:
1413   04F4 06 06                              LD      B,$06               ; number of digits to delete
1414   04F6 CD FB 04                           CALL    L04FB               ;
1415   04F9 C9                                 RET                         ;
1416   04FA             
1417   04FB                                    .ORG $04FB
1418   04FB             L04FB:
1419   04FB 3E 00                              LD      A,$00               ; delete ..
1420   04FD 12                                 LD      (DE),A              ; ..one digit
1421   04FE CD 10 02                           CALL    LeftOneColumn       ;
1422   0501 05                                 DEC     B                   ; decrement number of digits
1423   0502 C2 FB 04                           JP      NZ,L04FB            ; ..until
1424   0505 C9                                 RET                         ; ..done
1425   0506             
1426   0506             ;
1427   0506             L0506:
1428   0506 21 92 43                           LD      HL,M4392            ;
1429   0509 06 06                              LD      B,$06               ; number of bytes to clear
1430   050B CD D8 05                           CALL    ClearBbytesAtHL     ;
1431   050E 3A 50 4B                           LD      A,(M4B50)           ;
1432   0511 32 94 43                           LD      (M4394),A           ;
1433   0514 C9                                 RET                         ;
1434   0515             
1435   0515             ;*****************************************************************************
1436   0515             ;* Game state 2.
1437   0515             ;* Initialization of game and level data.
1438   0515             ;*****************************************************************************
1439   0515             L0515:
1440   0515 CD 1E 04                           CALL    SetBitsVideoRegister; set color palette according to LevelAndRound
1441   0518 21 A4 43                           LD      HL,GameState        ; Next interval game state ...
1442   051B 36 03                              LD      (HL),$03            ; ... is 3 (normal game play)
1443   051D CD 80 05                           CALL    InitGlobalLevelData ;
1444   0520 CD 47 05                           CALL    InitPlayerDataStructure
1445   0523 CD A0 09                           CALL    L09A0               ; get screen ram adress for player ship position
1446   0526             L0526:
1447   0526 CD 32 05                           CALL    L0532               ; init alien data for a new level and round
1448   0529 CD 6C 0A                           CALL    L0A6C               ; get screen ram adress for all aliens
1449   052C CD 06 05                           CALL    L0506               ; clear 4392 to 4397, init 4394
1450   052F C3 B0 32                           JP      L32B0               ;
1451   0532             
1452   0532             ;*****************************************************************************
1453   0532             ;* Init alien data for a new level and round
1454   0532             ;*****************************************************************************
1455   0532             L0532:
1456   0532 21 50 4B                           LD      HL,M4B50            ;
1457   0535 06 A0                              LD      B,$A0               ; clear $4B50 to $4BEF
1458   0537 CD D8 05                           CALL    ClearBbytesAtHL     ;
1459   053A CD EC 05                           CALL    InitAlienControlStates
1460   053D CD 50 06                           CALL    L0650               ; copy init values for 16 aliens to $4B50-$4B6F
1461   0540 CD 10 06                           CALL    InitAlienPositions  ; load alien screen coordinates (X,Y grid), for a new level and round
1462   0543 C9                                 RET                         ;
1463   0544             
1464   0547                                    .ORG $0547
1465   0547             ;*****************************************************************************
1466   0547             ;* Copy 32 byte from $0560 to $43C0 Player and bullets data structure (grid)
1467   0547             ;* and clear 32 bytes of player and bullets data structure (screen ram).
1468   0547             ;*****************************************************************************
1469   0547             InitPlayerDataStructure:
1470   0547 21 60 05                           LD      HL,T0560            ;
1471   054A 11 C0 43                           LD      DE,PlayerState      ; base of data structure (grid)
1472   054D 06 20                              LD      B,$20               ;
1473   054F CD E0 05                           CALL    CopyBbytesHLtoDE    ;
1474   0552 21 E0 43                           LD      HL,OldPlayerShipMSB ;
1475   0555 06 20                              LD      B,$20               ;
1476   0557 CD D8 05                           CALL    ClearBbytesAtHL     ;
1477   055A C9                                 RET                         ;
1478   055B             
1479   0560                                    .ORG $0560
1480   0560             ; Data copied to $43C0-$43DF
1481   0560             ; Default values for player and bullets data structure (grid).
1482   0560             T0560:
1483   0560 0C 10 64 D8                        .DB $0C, $10, $64, $D8       ; PlayerState, PlayerShape, PlayerShipX, PlayerShipY
1484   0564 00 50 00 D0                        .DB $00, $50, $00, $D0       ; PlayerBulletState, PlayerBulletShape, PlayerBulletX, PlayerBulletY
1485   0568 00 50 00 D0                        .DB $00, $50, $00, $D0       ; AbovePlayerBulletState, AbovePlayerBulletShape, AbovePlayerBulletX, AbovePlayerBulletY
1486   056C 00 58 00 20                        .DB $00, $58, $00, $20       ; AlienBullet0State, AlienBullet0Shape, AlienBullet0X, AlienBullet0Y
1487   0570 00 58 00 20                        .DB $00, $58, $00, $20       ; AlienBullet1State, AlienBullet1Shape, AlienBullet1X, AlienBullet1Y
1488   0574 00 58 00 20                        .DB $00, $58, $00, $20       ; AlienBullet2State, AlienBullet2Shape, AlienBullet2X, AlienBullet2Y
1489   0578 00 58 00 20                        .DB $00, $58, $00, $20       ; AlienBullet3State, AlienBullet3Shape, AlienBullet3X, AlienBullet3Y
1490   057C 00 58 00 20                        .DB $00, $58, $00, $20       ; AlienBullet4State, AlienBullet4Shape, AlienBullet4X, AlienBullet4Y
1491   0580             
1492   0580             ;*****************************************************************************
1493   0580             ;* Init of global level data, dependent on level and round.
1494   0580             ;*****************************************************************************
1495   0580             InitGlobalLevelData:
1496   0580 21 98 05                           LD      HL,T0598            ;
1497   0583 3A B8 43                           LD      A,(LevelAndRound)   ;
1498   0586 E6 0F                              AND     $0F                 ;
1499   0588 85                                 ADD     A,L                 ;
1500   0589 6F                                 LD      L,A                 ;
1501   058A 6E                                 LD      L,(HL)              ;
1502   058B 26 05                              LD      H,$05               ;
1503   058D 11 AB 43                           LD      DE,M43AB            ;
1504   0590 06 0C                              LD      B,$0C               ; number of bytes to copy
1505   0592 CD E0 05                           CALL    CopyBbytesHLtoDE    ;
1506   0595 C9                                 RET                         ;
1507   0596             
1508   0598                                    .ORG $0598
1509   0598             ; Table for the global level data, over game levels.
1510   0598             ; Bit0 - bit3 of $43B8 is the table index.
1511   0598             ; Data will be fetched two times. Once before and once after the 'spiral fill' animation.
1512   0598             T0598:
1513   0598 A8 A8                              .DB T05A8 & $FF, T05A8 & $FF    ;init values for 1st alien wave (pointer to $05A8, $05A8)
1514   059A C0 C0                              .DB T05C0 & $FF, T05C0 & $FF    ;init values for 2st alien wave (pointer to $05C0, $05C0)
1515   059C A8 A8                              .DB T05A8 & $FF, T05A8 & $FF    ;init values for blue birds wave (pointer to $05A8, $05A8)
1516   059E A8 A8                              .DB T05A8 & $FF, T05A8 & $FF    ;init values for pink birds wave (pointer to $05A8, $05A8)
1517   05A0 B4 CC                              .DB T05B4 & $FF, T05CC & $FF    ;init values for mothership wave (pointer to $05B4, $05CC)
1518   05A2 B4 B4                              .DB T05B4 & $FF, T05B4 & $FF    ;init values for mothership wave (pointer to $05B4, $05B4)
1519   05A4 A8 A8                              .DB T05A8 & $FF, T05A8 & $FF    ;not used? pointer to $05A8, $05A8
1520   05A6 A8 A8                              .DB T05A8 & $FF, T05A8 & $FF    ;not used? pointer to $05A8, $05A8
1521   05A8             ;
1522   05A8             ; e.g.:counter values, timer values, T1C00, T1D00, T1F00, ..
1523   05A8             ; Data copied to $43AB-$43B6
1524   05A8             T05A8:
1525   05A8 80 7F 00 00                        .DB $80, $7F, $00, $00, $40, $3F, $00, T1C00 >> 8, T1C00 & $FF, $FF, $FF, $FF
1525   05AC 40 3F 00 1C 
1525   05B0 00 FF FF FF 
1526   05B4             T05B4:
1527   05B4 60 5F 01 02                        .DB $60, $5F, $01, $02, $30, $2F, $00, T1C00 >> 8, T1C00 & $FF, $C0, $FF, $FF
1527   05B8 30 2F 00 1C 
1527   05BC 00 C0 FF FF 
1528   05C0             T05C0:
1529   05C0 80 7F 03 04                        .DB $80, $7F, $03, $04, $40, $3F, $00, T1F00 >> 8, T1F00 & $FF, $A0, $FF, $FF
1529   05C4 40 3F 00 1F 
1529   05C8 00 A0 FF FF 
1530   05CC             T05CC:
1531   05CC 60 60 05 06                        .DB $60, $60, $05, $06, $50, $30, $00, T1D00 >> 8, T1D00 & $FF, $48, $FF, $FF
1531   05D0 50 30 00 1D 
1531   05D4 00 48 FF FF 
1532   05D8             
1533   05D8             ;*****************************************************************************
1534   05D8             ;* Clears B memories starting at HL.
1535   05D8             ;*****************************************************************************
1536   05D8             ClearBbytesAtHL:
1537   05D8 AF                                 XOR     A                   ; A=0
1538   05D9             L05D9:
1539   05D9 77                                 LD      (HL),A              ; store
1540   05DA 23                                 INC     HL                  ; next
1541   05DB 05                                 DEC     B                   ; decrease counter.
1542   05DC C2 D9 05                           JP      NZ,L05D9            ;
1543   05DF C9                                 RET                         ;
1544   05E0             
1545   05E0             ;*****************************************************************************
1546   05E0             ;* Copy number of bytes (B register) from DE to HL.
1547   05E0             ;*****************************************************************************
1548   05E0             CopyBbytesHLtoDE:
1549   05E0 7E                                 LD      A,(HL)              ; Copy to HL ...
1550   05E1 12                                 LD      (DE),A              ; ... from DE
1551   05E2 23                                 INC     HL                  ; Next destination
1552   05E3 13                                 INC     DE                  ; Next source
1553   05E4 05                                 DEC     B                   ; All done?
1554   05E5 C2 E0 05                           JP      NZ,CopyBbytesHLtoDE ; no ... keep going
1555   05E8 C9                                 RET                         ; Out
1556   05E9             
1557   05EC                                    .ORG $05EC
1558   05EC             ;*****************************************************************************
1559   05EC             ;* Init all alien control states for a given level and round.
1560   05EC             ;*****************************************************************************
1561   05EC             InitAlienControlStates:
1562   05EC 21 00 15                           LD      HL,T1500            ;
1563   05EF 3A B8 43                           LD      A,(LevelAndRound)   ;
1564   05F2 E6 0F                              AND     $0F                 ;
1565   05F4 07                                 RLCA                        ; Multiply by 2
1566   05F5 85                                 ADD     A,L                 ;
1567   05F6 6F                                 LD      L,A                 ;
1568   05F7 56                                 LD      D,(HL)              ;
1569   05F8 23                                 INC     HL                  ;
1570   05F9 5E                                 LD      E,(HL)              ;
1571   05FA             ;
1572   05FA             L05FA:
1573   05FA 21 70 4B                           LD      HL,M4B70            ;
1574   05FD 3A BA 43                           LD      A,(AliensLeft)      ;
1575   0600 47                                 LD      B,A                 ;
1576   0601 A7                                 AND     A                   ; updates the zero flag
1577   0602 C8                                 RET     Z                   ; if no AliensLeft
1578   0603             ;
1579   0603             L0603:
1580   0603 72                                 LD      (HL),D              ; set control state A
1581   0604 2C                                 INC     L                   ;
1582   0605 73                                 LD      (HL),E              ; set control state B
1583   0606 2C                                 INC     L                   ;
1584   0607 2C                                 INC     L                   ;
1585   0608 2C                                 INC     L                   ;
1586   0609 05                                 DEC     B                   ; number of aliens left
1587   060A C2 03 06                           JP      NZ,L0603            ;
1588   060D C9                                 RET                         ;
1589   060E             
1590   0610                                    .ORG $0610
1591   0610             ;*****************************************************************************
1592   0610             ;* Load alien screen coordinates for a given level and round to $4B70 - $4BAF.
1593   0610             ;*****************************************************************************
1594   0610             InitAlienPositions:
1595   0610 21 3A 06                           LD      HL,T063A            ;
1596   0613 3A B8 43                           LD      A,(LevelAndRound)   ;
1597   0616 0F                                 RRCA                        ;
1598   0617 E6 0F                              AND     $0F                 ; mask out 0000_1111
1599   0619 85                                 ADD     A,L                 ;
1600   061A 6F                                 LD      L,A                 ;
1601   061B 00                                 NOP                         ; Old command removed or space for a future replace patch
1602   061C 00                                 NOP                         ; ..
1603   061D 00                                 NOP                         ; ..
1604   061E 6E                                 LD      L,(HL)              ;
1605   061F 26 15                              LD      H,T1540 >> 8        ; MSB for T1540-T15E0
1606   0621 11 72 4B                           LD      DE,M4B72            ;
1607   0624 3A BA 43                           LD      A,(AliensLeft)      ;
1608   0627 47                                 LD      B,A                 ;
1609   0628 A7                                 AND     A                   ; updates the zero flag
1610   0629 C8                                 RET     Z                   ; if no AliensLeft
1611   062A             ;
1612   062A             L062A:
1613   062A 7E                                 LD      A,(HL)              ; get value from table
1614   062B 12                                 LD      (DE),A              ; save to alien screen coordinate
1615   062C 23                                 INC     HL                  ;
1616   062D 13                                 INC     DE                  ;
1617   062E 7E                                 LD      A,(HL)              ;
1618   062F 12                                 LD      (DE),A              ;
1619   0630 23                                 INC     HL                  ;
1620   0631 13                                 INC     DE                  ;
1621   0632 13                                 INC     DE                  ;
1622   0633 13                                 INC     DE                  ;
1623   0634 05                                 DEC     B                   ;
1624   0635 C2 2A 06                           JP      NZ,L062A            ; loop for all AliensLeft
1625   0638 C9                                 RET                         ;
1626   0639             
1627   063A                                    .ORG $063A
1628   063A             ; Init data for 1st game round.
1629   063A             ; LSB's for T1560, T1540, T15E0.
1630   063A             T063A:
1631   063A 60 40 E0 E0                        .DB T1560 & $FF, T1540 & $FF, T15E0 & $FF, T15E0 & $FF, T15E0 & $FF, T15E0 & $FF, $FF, $FF
1631   063E E0 E0 FF FF 
1632   0642             ; Init data for 2nd game round.
1633   0642             ; LSB's for T15C0, T15A0, T1580.
1634   0642 C0 A0 80 80                        .DB T15C0 & $FF, T15A0 & $FF, T1580 & $FF, T1580 & $FF, T1580 & $FF, T1580 & $FF, $FF, $FF
1634   0646 80 80 FF FF 
1635   064A             
1636   0650                                    .ORG $0650
1637   0650             L0650:
1638   0650 21 20 15                           LD      HL,T1520            ;
1639   0653 3A B8 43                           LD      A,(LevelAndRound)   ;
1640   0656 E6 0F                              AND     $0F                 ; mask out 0000_1111
1641   0658 07                                 RLCA                        ; Multiply by 2
1642   0659 85                                 ADD     A,L                 ;
1643   065A 6F                                 LD      L,A                 ;
1644   065B 56                                 LD      D,(HL)              ;
1645   065C 23                                 INC     HL                  ;
1646   065D 5E                                 LD      E,(HL)              ;
1647   065E 21 50 4B                           LD      HL,M4B50            ;
1648   0661 3A BA 43                           LD      A,(AliensLeft)      ;
1649   0664 47                                 LD      B,A                 ;
1650   0665 A7                                 AND     A                   ; updates the zero flag
1651   0666 C8                                 RET     Z                   ; if no AliensLeft
1652   0667             L0667:
1653   0667 72                                 LD      (HL),D              ;
1654   0668 2C                                 INC     L                   ;
1655   0669 73                                 LD      (HL),E              ;
1656   066A 2C                                 INC     L                   ;
1657   066B 05                                 DEC     B                   ;
1658   066C C2 67 06                           JP      NZ,L0667            ; loop for all AliensLeft
1659   066F C9                                 RET                         ;
1660   0670             
1661   067A                                    .ORG $067A
1662   067A             ;*****************************************************************************
1663   067A             ;* Scroll down the background screen one pixel.
1664   067A             ;*****************************************************************************
1665   067A             StarsScrollDown:
1666   067A 21 B9 43                           LD      HL,CounterB9        ;
1667   067D 7E                                 LD      A,(HL)              ;
1668   067E 35                                 DEC     (HL)                ; decrement the backwards counter
1669   067F 32 00 58                           LD      (scrollRegister),A  ; 58xx scroll register
1670   0682 E6 07                              AND     $07                 ; mask out 0000_0111
1671   0684 C0                                 RET     NZ                  ; continue after 8 pixels...
1672   0685             ; Fill the background with stars or mothership.
1673   0685 01 47 20                           LD      BC,$2047            ;
1674   0688 11 21 4B                           LD      DE,$4B21            ; get character from the background screen (1st row, 2nd line)
1675   068B 7E                                 LD      A,(HL)              ; get $43B9 free running 8 bit backwards counter value
1676   068C 0F                                 RRCA                        ;
1677   068D 0F                                 RRCA                        ;
1678   068E 0F                                 RRCA                        ;
1679   068F E6 1F                              AND     $1F                 ; mask out 0001_1111
1680   0691 83                                 ADD     A,E                 ;
1681   0692 5F                                 LD      E,A                 ;
1682   0693 2E B2                              LD      L,$B2               ;
1683   0695 7E                                 LD      A,(HL)              ; get $43B2 (MSB of T1C00 or T1D00 or T1F00)
1684   0696 2C                                 INC     L                   ;
1685   0697 6E                                 LD      L,(HL)              ; get $43B3 (LSB of T1C00 or T1D00 or T1F00)
1686   0698 67                                 LD      H,A                 ;
1687   0699             L0699:
1688   0699 7E                                 LD      A,(HL)              ;
1689   069A 12                                 LD      (DE),A              ; to background screen
1690   069B 2C                                 INC     L                   ;
1691   069C 7B                                 LD      A,E                 ;
1692   069D 90                                 SUB     B                   ;
1693   069E 5F                                 LD      E,A                 ;
1694   069F D2 99 06                           JP      NC,L0699            ;
1695   06A2 15                                 DEC     D                   ;
1696   06A3 7A                                 LD      A,D                 ;
1697   06A4 B9                                 CP      C                   ;
1698   06A5 C2 99 06                           JP      NZ,L0699            ;
1699   06A8 7D                                 LD      A,L                 ;
1700   06A9 32 B3 43                           LD      (M43B3),A           ;
1701   06AC C9                                 RET                         ;
1702   06AD             
1703   06B0                                    .ORG $06B0
1704   06B0             ;*****************************************************************************
1705   06B0             ;* Fill the background with (2x2) planets.
1706   06B0             ;*****************************************************************************
1707   06B0             AddPlanetsToBackground:
1708   06B0 21 AB 43                           LD      HL,M43AB            ; counter value for (2x2) planets
1709   06B3 3A B9 43                           LD      A,(CounterB9)       ;
1710   06B6 4F                                 LD      C,A                 ;
1711   06B7 BE                                 CP      (HL)                ;
1712   06B8 C0                                 RET     NZ                  ;
1713   06B9 7E                                 LD      A,(HL)              ;
1714   06BA 2C                                 INC     L                   ;
1715   06BB 86                                 ADD     A,(HL)              ;
1716   06BC 2D                                 DEC     L                   ;
1717   06BD 77                                 LD      (HL),A              ;
1718   06BE 2C                                 INC     L                   ;
1719   06BF 2C                                 INC     L                   ;
1720   06C0 34                                 INC     (HL)                ;
1721   06C1 46                                 LD      B,(HL)              ;
1722   06C2 2C                                 INC     L                   ;
1723   06C3 34                                 INC     (HL)                ;
1724   06C4 7E                                 LD      A,(HL)              ;
1725   06C5 21 20 1E                           LD      HL,T1E20            ; MSB's of screen ram for planets
1726   06C8 E6 1F                              AND     $1F                 ;
1727   06CA 85                                 ADD     A,L                 ;
1728   06CB 6F                                 LD      L,A                 ;
1729   06CC 56                                 LD      D,(HL)              ;
1730   06CD C6 20                              ADD     $20                 ;
1731   06CF 6F                                 LD      L,A                 ;
1732   06D0 5E                                 LD      E,(HL)              ;
1733   06D1 79                                 LD      A,C                 ;
1734   06D2 0F                                 RRCA                        ;
1735   06D3 0F                                 RRCA                        ;
1736   06D4 0F                                 RRCA                        ;
1737   06D5 E6 1E                              AND     $1E                 ;
1738   06D7 83                                 ADD     A,E                 ;
1739   06D8 C6 02                              ADD     $02                 ;
1740   06DA 5F                                 LD      E,A                 ;
1741   06DB 21 60 1E                           LD      HL,T1E60            ; LSB's of screen ram for planets
1742   06DE 78                                 LD      A,B                 ;
1743   06DF E6 1F                              AND     $1F                 ;
1744   06E1 85                                 ADD     A,L                 ;
1745   06E2 6F                                 LD      L,A                 ;
1746   06E3 6E                                 LD      L,(HL)              ;
1747   06E4 CD DC 07                           CALL    L07DC               ; draw the characters at background
1748   06E7 C9                                 RET                         ;
1749   06E8             ;
1750   06E8             L06E8:
1751   06E8 21 00 18                           LD      HL,T1800            ; base addr. table for 'screen ram adresses and static texts'
1752   06EB 0E 01                              LD      C,$01               ; 1 column (rotated to 1 row)
1753   06ED C3 D0 01                           JP      PrintTextLines      ;
1754   06F0             
1755   06F0             ; Update scroll register and fill background
1756   06F0             L06F0:
1757   06F0 CD 7A 06                           CALL    StarsScrollDown     ;
1758   06F3 CD 40 20                           CALL    AddGalaxiesToBackground
1759   06F6 C3 B0 06                           JP      AddPlanetsToBackground
1760   06F9             
1761   0700                                    .ORG $0700
1762   0700             ;*****************************************************************************
1763   0700             ;* Controller for player data structure.
1764   0700             ;* Handles: PlayerState, $43E0, PlayerBulletState, $43E4, AbovePlayerBulletState, $43E8
1765   0700             ;*****************************************************************************
1766   0700             PlayerDataController:
1767   0700 01 C0 43                           LD      BC,PlayerState      ; Player data structure (grid)
1768   0703 11 E0 43                           LD      DE,OldPlayerShipMSB ; Player data structure (screen ram)
1769   0706             L0706:
1770   0706 CD 18 07                           CALL    UpdateScreenObjects ;
1771   0709 79                                 LD      A,C                 ;
1772   070A C6 04                              ADD     $04                 ;
1773   070C 4F                                 LD      C,A                 ;
1774   070D C6 20                              ADD     $20                 ;
1775   070F 5F                                 LD      E,A                 ;
1776   0710 50                                 LD      D,B                 ;
1777   0711 FE EC                              CP      $EC                 ;
1778   0713 C2 06 07                           JP      NZ,L0706            ; loop until $43EC
1779   0716 C9                                 RET                         ;
1780   0717             
1781   0718                                    .ORG $0718
1782   0718             ;*****************************************************************************
1783   0718             ;* Draw or delete screen objects dep. on control state of player, alien and bullet.
1784   0718             ;*****************************************************************************
1785   0718             UpdateScreenObjects:
1786   0718 CD 20 07                           CALL    Bit4Controller      ; for deleting screen objects
1787   071B C3 40 07                           JP      Bit3Controller      ; for drawing screen objects
1788   071E             
1789   0720                                    .ORG $0720
1790   0720             ;*****************************************************************************
1791   0720             ;* Handles the bit4 actions for deleting screen objects.
1792   0720             ;*****************************************************************************
1793   0720             Bit4Controller:
1794   0720 0A                                 LD      A,(BC)              ; get value from data structure (grid)
1795   0721 67                                 LD      H,A                 ; save the bits
1796   0722 E6 10                              AND     $10                 ; mask out 0001_0000 (bit4 of control state A)
1797   0724 C8                                 RET     Z                   ; ret if bit not set.
1798   0725 7C                                 LD      A,H                 ; restore the bits
1799   0726 E6 EF                              AND     $EF                 ; mask out 1110_1111
1800   0728 02                                 LD      (BC),A              ; save to control state A
1801   0729 07                                 RLCA                        ; Multiply by 8 ..
1802   072A 07                                 RLCA                        ; ..
1803   072B 07                                 RLCA                        ; ..
1804   072C E6 07                              AND     $07                 ; mask out 0000_0111
1805   072E C6 38                              ADD     $38                 ; add to base for jump table
1806   0730 6F                                 LD      L,A                 ;
1807   0731 26 07                              LD      H,T0735 >> 8        ; MSB for jump table
1808   0733 6E                                 LD      L,(HL)              ;
1809   0734 E9                                 JP      (HL)                ; jump to control function
1810   0735             
1811   0735             ; LSB jump table:
1812   0735             ;.....not used
1813   0735             ;........not used
1814   0735             ;...........not used
1815   0735             ;..............0763..................control state A: 0001_xxxx...Delete 1x1 screen objects.
1816   0735             ;.................0779...............control state A: 0011_xxxx...Delete 2x1 screen objects.
1817   0735             ;....................not used
1818   0735             ;.......................079E.........control state A: 0111_xxxx...Delete 1x2 screen objects.
1819   0735             ;..........................07BE......control state A: 1001_xxxx...Delete 2x2 screen objects.
1820   0735             T0735:
1821   0735 00 00 00 63                        .DB $00, $00, $00, L0763 & $FF, L0779 & $FF, $00, L079E & $FF, L07BE & $FF
1821   0739 79 00 9E BE 
1822   073D             
1823   0740                                    .ORG $0740
1824   0740             ;*****************************************************************************
1825   0740             ;* Handles the bit3 actions for drawing screen objects.
1826   0740             ;*****************************************************************************
1827   0740             Bit3Controller:
1828   0740 0A                                 LD      A,(BC)              ; get value from data structure (grid)
1829   0741 67                                 LD      H,A                 ; save it
1830   0742 E6 08                              AND     $08                 ; mask out 0000_1000 (bit3 of control state A)
1831   0744 C8                                 RET     Z                   ; ret if bit not set.
1832   0745 7C                                 LD      A,H                 ; restore the bits
1833   0746 E6 07                              AND     $07                 ; mask out 0000_0111
1834   0748 67                                 LD      H,A                 ; save it
1835   0749 0F                                 RRCA                        ; Divide by 8 ..
1836   074A 0F                                 RRCA                        ; ..
1837   074B 0F                                 RRCA                        ; ..
1838   074C B4                                 OR      H                   ; add original bits
1839   074D F6 18                              OR      $18                 ; set 0001_1000 flag
1840   074F 02                                 LD      (BC),A              ; set the bits at control state A
1841   0750 03                                 INC     BC                  ; go to control state B
1842   0751 7C                                 LD      A,H                 ;
1843   0752 C6 5B                              ADD     $5B                 ; add to base for jump table
1844   0754 6F                                 LD      L,A                 ;
1845   0755 26 07                              LD      H,T0759 >> 8        ; MSB for jump table
1846   0757 6E                                 LD      L,(HL)              ;
1847   0758 E9                                 JP      (HL)                ; jump to control function
1848   0759             
1849   0759             ; LSB jump table:
1850   0759             ;.....not used
1851   0759             ;........not used
1852   0759             ;...........076D.....................control state A: xxxx_1000...Draw 1x1 screen objects.
1853   0759             ;..............0788..................control state A: xxxx_1001...Draw 2x1 screen objects.
1854   0759             ;.................not used
1855   0759             ;....................07AA............control state A: xxxx_1011...Draw 1x2 screen objects.
1856   0759             ;.......................07D2.........control state A: xxxx_1100...Draw 2x2 screen objects.
1857   0759             ;..........................not used
1858   0759             T0759:
1859   0759 00 00 6D 88                        .DB $00, $00, L076D & $FF, L0788 & $FF, $00, L07AA & $FF, L07D2 & $FF
1859   075D 00 AA D2 
1860   0760             
1861   0763                                    .ORG $0763
1862   0763             ;*****************************************************************************
1863   0763             ;* Bit4 control function 63:
1864   0763             ;* If control state A: 0001_xxxx
1865   0763             ;* Delete 1x1 screen objects (bullet, alien).
1866   0763             ;*****************************************************************************
1867   0763             L0763:
1868   0763 EB                                 EX      DE,HL               ;
1869   0764 56                                 LD      D,(HL)              ; get screen ram adress MSB
1870   0765 23                                 INC     HL                  ;
1871   0766 5E                                 LD      E,(HL)              ; get screen ram adress LSB
1872   0767 2B                                 DEC     HL                  ; restore pointer
1873   0768 AF                                 XOR     A                   ; A=0
1874   0769 12                                 LD      (DE),A              ; delete at screen
1875   076A EB                                 EX      DE,HL               ;
1876   076B C9                                 RET                         ;
1877   076C             
1878   076D                                    .ORG $076D
1879   076D             ;*****************************************************************************
1880   076D             ;* Bit3 control function 6D:
1881   076D             ;* If control state A: xxxx_1000
1882   076D             ;* Set alien control state B value to screen ram.
1883   076D             ;* Draw 1x1 screen objects (used at 'fade in' animation).
1884   076D             ;*****************************************************************************
1885   076D             L076D:
1886   076D EB                                 EX      DE,HL               ;
1887   076E 23                                 INC     HL                  ;
1888   076F 23                                 INC     HL                  ;
1889   0770 56                                 LD      D,(HL)              ; get MSB screen ram adress of alien
1890   0771 23                                 INC     HL                  ;
1891   0772 5E                                 LD      E,(HL)              ; get LSB screen ram adress of alien
1892   0773 0A                                 LD      A,(BC)              ; get alien control state B
1893   0774 12                                 LD      (DE),A              ; set at screen ram
1894   0775 0B                                 DEC     BC                  ; move to alien control state A
1895   0776 C9                                 RET                         ;
1896   0777             
1897   0779                                    .ORG $0779
1898   0779             ;*****************************************************************************
1899   0779             ;* Bit4 control function 79:
1900   0779             ;* If control state A: 0011_xxxx
1901   0779             ;* Delete 2x1 screen objects (alien).
1902   0779             ;*****************************************************************************
1903   0779             L0779:
1904   0779 EB                                 EX      DE,HL               ;
1905   077A 56                                 LD      D,(HL)              ;
1906   077B 23                                 INC     HL                  ;
1907   077C 5E                                 LD      E,(HL)              ;
1908   077D 2B                                 DEC     HL                  ; restore pointer
1909   077E AF                                 XOR     A                   ; A=0
1910   077F 12                                 LD      (DE),A              ; delete at screen, left part
1911   0780 CD 17 02                           CALL    RightOneColumn      ; 
1912   0783 AF                                 XOR     A                   ; A=0
1913   0784 12                                 LD      (DE),A              ; delete at screen, right part
1914   0785 EB                                 EX      DE,HL               ;
1915   0786 C9                                 RET                         ;
1916   0787             
1917   0788                                    .ORG $0788
1918   0788             ;*****************************************************************************
1919   0788             ;* Bit3 control function 88:
1920   0788             ;* If control state A: xxxx_1001
1921   0788             ;* Map alien control state B to shape and draw it.
1922   0788             ;* Draw 2x1 screen objects (alien).
1923   0788             ;*****************************************************************************
1924   0788             L0788:
1925   0788 EB                                 EX      DE,HL               ;
1926   0789 23                                 INC     HL                  ;
1927   078A 23                                 INC     HL                  ;
1928   078B 56                                 LD      D,(HL)              ;
1929   078C 23                                 INC     HL                  ;
1930   078D 5E                                 LD      E,(HL)              ;
1931   078E 0A                                 LD      A,(BC)              ; get alien control state B
1932   078F 6F                                 LD      L,A                 ; as offset for...
1933   0790 26 14                              LD      H,T1420 >> 8        ; get alien character block shapes table
1934   0792 7E                                 LD      A,(HL)              ;
1935   0793 12                                 LD      (DE),A              ; draw alien character left part
1936   0794 23                                 INC     HL                  ; next character
1937   0795 CD 17 02                           CALL    RightOneColumn      ;
1938   0798 7E                                 LD      A,(HL)              ;
1939   0799 12                                 LD      (DE),A              ; draw alien character right part
1940   079A 0B                                 DEC     BC                  ;
1941   079B C9                                 RET                         ;
1942   079C             
1943   079E                                    .ORG $079E
1944   079E             ;*****************************************************************************
1945   079E             ;* Bit4 control function 9E:
1946   079E             ;* If control state A: 0111_xxxx
1947   079E             ;* Delete 1x2 screen objects (alien).
1948   079E             ;*****************************************************************************
1949   079E             L079E:
1950   079E EB                                 EX      DE,HL               ;
1951   079F 56                                 LD      D,(HL)              ; get MSB of screen ram
1952   07A0 23                                 INC     HL                  ;
1953   07A1 5E                                 LD      E,(HL)              ; get LSB of screen ram
1954   07A2 2B                                 DEC     HL                  ; restore pointer
1955   07A3 AF                                 XOR     A                   ; A=0
1956   07A4 12                                 LD      (DE),A              ; delete at screen, upper part
1957   07A5 13                                 INC     DE                  ;
1958   07A6 12                                 LD      (DE),A              ; delete at screen, lower part
1959   07A7 EB                                 EX      DE,HL               ;
1960   07A8 C9                                 RET                         ;
1961   07A9             
1962   07AA                                    .ORG $07AA
1963   07AA             ;*****************************************************************************
1964   07AA             ;* Bit3 control function AA:
1965   07AA             ;* If control state A: xxxx_1011
1966   07AA             ;* Draw 1x2 screen objects (alien).
1967   07AA             ;*****************************************************************************
1968   07AA             L07AA:
1969   07AA EB                                 EX      DE,HL               ;
1970   07AB 23                                 INC     HL                  ;
1971   07AC 23                                 INC     HL                  ;
1972   07AD 56                                 LD      D,(HL)              ;
1973   07AE 23                                 INC     HL                  ;
1974   07AF 5E                                 LD      E,(HL)              ;
1975   07B0 0A                                 LD      A,(BC)              ;
1976   07B1 6F                                 LD      L,A                 ;
1977   07B2 26 14                              LD      H,T1420 >> 8        ; get alien character block shapes table
1978   07B4 7E                                 LD      A,(HL)              ;
1979   07B5 12                                 LD      (DE),A              ; draw upper part on screen
1980   07B6 23                                 INC     HL                  ;
1981   07B7 13                                 INC     DE                  ;
1982   07B8 7E                                 LD      A,(HL)              ;
1983   07B9 12                                 LD      (DE),A              ; draw lower part on screen
1984   07BA 0B                                 DEC     BC                  ;
1985   07BB C9                                 RET                         ;
1986   07BC             
1987   07BE                                    .ORG $07BE
1988   07BE             ;*****************************************************************************
1989   07BE             ;* Bit4 control function BE:
1990   07BE             ;* If control state A: 1001_xxxx
1991   07BE             ;* Delete 2x2 screen objects (player ship, alien).
1992   07BE             ;*****************************************************************************
1993   07BE             L07BE:
1994   07BE EB                                 EX      DE,HL               ;
1995   07BF 56                                 LD      D,(HL)              ;
1996   07C0 23                                 INC     HL                  ;
1997   07C1 5E                                 LD      E,(HL)              ;
1998   07C2 2B                                 DEC     HL                  ;
1999   07C3 AF                                 XOR     A                   ; A=0
2000   07C4 12                                 LD      (DE),A              ; delete upper left part
2001   07C5 13                                 INC     DE                  ;
2002   07C6 12                                 LD      (DE),A              ; delete upper right part
2003   07C7 CD 17 02                           CALL    RightOneColumn      ;
2004   07CA AF                                 XOR     A                   ; A=0
2005   07CB 12                                 LD      (DE),A              ; delete lower left part
2006   07CC 1B                                 DEC     DE                  ;
2007   07CD 12                                 LD      (DE),A              ; delete lower right part
2008   07CE EB                                 EX      DE,HL               ;
2009   07CF C9                                 RET                         ;
2010   07D0             
2011   07D2                                    .ORG $07D2
2012   07D2             ;*****************************************************************************
2013   07D2             ;* Bit3 control function D2:
2014   07D2             ;* If control state A: xxxx_1100
2015   07D2             ;* Draw 2x2 screen objects (player ship, alien, planets).
2016   07D2             ;*****************************************************************************
2017   07D2             L07D2:
2018   07D2 EB                                 EX      DE,HL               ;
2019   07D3 23                                 INC     HL                  ;
2020   07D4 23                                 INC     HL                  ;
2021   07D5 56                                 LD      D,(HL)              ; get MSB from player data structure (screen ram)
2022   07D6 23                                 INC     HL                  ;
2023   07D7 5E                                 LD      E,(HL)              ; get LSB from player data structure (screen ram)
2024   07D8 0A                                 LD      A,(BC)              ; get value from player data structure (grid)
2025   07D9 6F                                 LD      L,A                 ;
2026   07DA 26 14                              LD      H,T1400 >> 8        ; get player ship character block shapes table
2027   07DC             L07DC:
2028   07DC 7E                                 LD      A,(HL)              ; Entry point for general draw
2029   07DD 12                                 LD      (DE),A              ; draw upper left part
2030   07DE 23                                 INC     HL                  ;
2031   07DF 13                                 INC     DE                  ;
2032   07E0 7E                                 LD      A,(HL)              ;
2033   07E1 12                                 LD      (DE),A              ; draw upper right part
2034   07E2 23                                 INC     HL                  ;
2035   07E3 1B                                 DEC     DE                  ;
2036   07E4 CD 17 02                           CALL    RightOneColumn      ;
2037   07E7 7E                                 LD      A,(HL)              ;
2038   07E8 12                                 LD      (DE),A              ; draw lower left part
2039   07E9 23                                 INC     HL                  ;
2040   07EA 13                                 INC     DE                  ;
2041   07EB 7E                                 LD      A,(HL)              ;
2042   07EC 12                                 LD      (DE),A              ; draw lower right part
2043   07ED 0B                                 DEC     BC                  ;
2044   07EE C9                                 RET                         ;
2045   07EF             
2046   07F0                                    .ORG $07F0
2047   07F0             L07F0:
2048   07F0 3A B9 43                           LD      A,(CounterB9)       ;
2049   07F3 32 00 58                           LD      (scrollRegister),A  ; 58xx scroll register
2050   07F6 CD 80 03                           CALL    ClearForeground     ;
2051   07F9 C3 1E 04                           JP      SetBitsVideoRegister
2052   07FC             
2053   0800                                    .ORG $0800
2054   0800             ;*****************************************************************************
2055   0800             ;* Game state 3.
2056   0800             ;* Normal game play.
2057   0800             ;*****************************************************************************
2058   0800             L0800:
2059   0800 21 14 08                           LD      HL,T0814            ;
2060   0803 3A B8 43                           LD      A,(LevelAndRound)   ; bit0 - 3: game level, bit4 - 7: game round
2061   0806 07                                 RLCA                        ; Multiply by 2 to get a 2 byte offset
2062   0807 E6 1E                              AND     $1E                 ; mask out 0001_1110 game level
2063   0809 85                                 ADD     A,L                 ; add offset ...
2064   080A 6F                                 LD      L,A                 ; ... to base of table
2065   080B 7E                                 LD      A,(HL)              ; MSB of destination
2066   080C 2C                                 INC     L                   ; Get the
2067   080D 6E                                 LD      L,(HL)              ; ... LSB of destination
2068   080E 67                                 LD      H,A                 ; Now point to function
2069   080F E9                                 JP      (HL)                ; jump to corresponding function according to LevelAndRound.
2070   0810             
2071   0814                                    .ORG $0814
2072   0814             T0814:
2073   0814                                    .MSFIRST
2074   0814 08 34                              .DW L0834       ;Game level 0: called for each frame during stars scrolling down and 'aliens fade in'
2075   0816 20 00                              .DW L2000       ;Game level 1: called for each frame during 'player alife' with aliens, after 'fade in'
2076   0818 08 34                              .DW L0834       ;Game level 2: called for each frame during stars scrolling down and 'aliens fade in'
2077   081A 20 00                              .DW L2000       ;Game level 3: called for each frame during 'player alife' with aliens, after 'fade in'
2078   081C 22 30                              .DW L2230       ;Game level 4: called for each frame during 'spiral fill'
2079   081E 34 00                              .DW L3400       ;Game level 5: called for each frame during birds level including 'fade in'
2080   0820 22 30                              .DW L2230       ;Game level 6: called for each frame during 'spiral fill'
2081   0822 34 00                              .DW L3400       ;Game level 7: called for each frame during birds level including 'fade in'
2082   0824 22 30                              .DW L2230       ;Game level 8: called for each frame during 'spiral fill'
2083   0826 22 B4                              .DW L22B4       ;Game level 9: called for each frame during mothership 'fade in'
2084   0828 22 CA                              .DW L22CA       ;Game level A: called for each frame during mothership and aliens 'fade in'
2085   082A 20 00                              .DW L2000       ;Game level B: called for each frame during 'player alife' with aliens and mothership, after 'fade in'
2086   082C             
2087   0834                                    .ORG $0834
2088   0834             ;*****************************************************************************
2089   0834             ;* Game level 0 and 2:
2090   0834             ;* Stars scrolling down and 'aliens fade in'
2091   0834             ;*****************************************************************************
2092   0834             L0834:
2093   0834 CD F0 06                           CALL    L06F0               ; update scroll register and fill background
2094   0837 21 B4 43                           LD      HL,CounterB4        ; 
2095   083A 35                                 DEC     (HL)                ; decrement the counter
2096   083B 7E                                 LD      A,(HL)              ;
2097   083C FE 15                              CP      $15                 ;
2098   083E D0                                 RET     NC                  ;
2099   083F CD 5A 08                           CALL    GetAnimationChrs    ; for 'aliens fade in'
2100   0842 CD FA 05                           CALL    L05FA               ; init all alien control states
2101   0845 CD 50 0A                           CALL    AlienDataController ;
2102   0848             L0848:
2103   0848 21 B4 43                           LD      HL,CounterB4        ;
2104   084B 7E                                 LD      A,(HL)              ;
2105   084C A7                                 AND     A                   ; updates the zero flag
2106   084D C0                                 RET     NZ                  ; if CounterB4 is 0.
2107   084E 2E B8                              LD      L,$B8               ;
2108   0850 34                                 INC     (HL)                ; increment game level $43B8
2109   0851 2E A4                              LD      L,$A4               ; Next interval game state ...
2110   0853 36 02                              LD      (HL),$02            ; .. is 2
2111   0855 C9                                 RET                         ;
2112   0856             
2113   085A                                    .ORG $085A
2114   085A             ;*****************************************************************************
2115   085A             ;* The 'aliens fade in' animation sequence is:
2116   085A             ;* 6C, 6D, 6E, 6F, 68, from foreground tiles.
2117   085A             ;*****************************************************************************
2118   085A             GetAnimationChrs:
2119   085A 11 6C 08                           LD      DE,$086C            ;
2120   085D FE 11                              CP      $11                 ;
2121   085F D0                                 RET     NC                  ;
2122   0860 1E 6D                              LD      E,$6D               ;
2123   0862 FE 0D                              CP      $0D                 ;
2124   0864 D0                                 RET     NC                  ;
2125   0865 1E 6E                              LD      E,$6E               ;
2126   0867 FE 09                              CP      $09                 ;
2127   0869 D0                                 RET     NC                  ;
2128   086A 1E 6F                              LD      E,$6F               ;
2129   086C FE 05                              CP      $05                 ;
2130   086E D0                                 RET     NC                  ;
2131   086F 1E 68                              LD      E,$68               ;
2132   0871 C9                                 RET                         ;
2133   0872             
2134   0876                                    .ORG $0876
2135   0876             ;*****************************************************************************
2136   0876             ; Updates the player ship, player bullet and the shield.
2137   0876             ;*****************************************************************************
2138   0876             PlayerUpdate:
2139   0876 CD 00 07                           CALL    PlayerDataController
2140   0879 CD 86 08                           CALL    L0886               ; copy current player data to old player data ?
2141   087C CD A0 08                           CALL    L08A0               ; update player position, bullet and shield
2142   087F CD A0 09                           CALL    L09A0               ; get screen ram adress for player ship position
2143   0882 CD 7A 09                           CALL    L097A               ; map player ship position to $439E $439F
2144   0885 C9                                 RET                         ;
2145   0886             
2146   0886             ;*****************************************************************************
2147   0886             ; Copy current player data to old player data.
2148   0886             ;*****************************************************************************
2149   0886             L0886:
2150   0886 21 EB 43                           LD      HL,M43EB            ;
2151   0889 06 03                              LD      B,$03               ;
2152   088B             L088B:
2153   088B 56                                 LD      D,(HL)              ;
2154   088C 2B                                 DEC     HL                  ;
2155   088D 5E                                 LD      E,(HL)              ;
2156   088E 2B                                 DEC     HL                  ;
2157   088F 72                                 LD      (HL),D              ;
2158   0890 2B                                 DEC     HL                  ;
2159   0891 73                                 LD      (HL),E              ;
2160   0892 2B                                 DEC     HL                  ;
2161   0893 05                                 DEC     B                   ;
2162   0894 C2 8B 08                           JP      NZ,L088B            ;
2163   0897 C9                                 RET                         ;
2164   0898             
2165   08A0                                    .ORG $08A0
2166   08A0             L08A0:
2167   08A0 CD C4 08                           CALL    MovePlayer          ;
2168   08A3 21 C4 43                           LD      HL,PlayerBulletState
2169   08A6 CD 30 09                           CALL    L0930               ; get the assigned player bullet tile if fire button was pressed
2170   08A9 3A B8 43                           LD      A,(LevelAndRound)   ;
2171   08AC E6 0F                              AND     $0F                 ; 0000_1111
2172   08AE FE 03                              CP      $03                 ;
2173   08B0 C0                                 RET     NZ                  ; return if not game level 3 (2nd alien wave)
2174   08B1 21 C8 43                           LD      HL,AbovePlayerBulletState
2175   08B4 CD 30 09                           CALL    L0930               ; get the assigned player bullet tile if fire button was pressed
2176   08B7 C9                                 RET                         ;
2177   08B8             
2178   08C4                                    .ORG $08C4
2179   08C4             ;*****************************************************************************
2180   08C4             ;* Player ship, shield and bullets handler.
2181   08C4             ;*****************************************************************************
2182   08C4             MovePlayer:
2183   08C4 21 C0 43                           LD      HL,PlayerState      ;
2184   08C7 7E                                 LD      A,(HL)              ;
2185   08C8 E6 08                              AND     $08                 ; mask out 0000_1000
2186   08CA CA A0 0A                           JP      Z,DrawShields       ; Draw shields
2187   08CD 2E A6                              LD      L,$A6               ;
2188   08CF 7E                                 LD      A,(HL)              ; get ShieldCount
2189   08D0 A7                                 AND     A                   ; updates the zero flag
2190   08D1 C2 EA 08                           JP      NZ,L08EA            ; if ShieldCount not 0.
2191   08D4 06 80                              LD      B,$80               ; 1000_0000 (bit7='shield')
2192   08D6 CD BB 00                           CALL    CheckInputBits      ;
2193   08D9 CA EB 08                           JP      Z,L08EB             ;
2194   08DC 2E 62                              LD      L,$62               ;
2195   08DE 36 40                              LD      (HL),$40            ; set bit6 at $4362
2196   08E0 2E C0                              LD      L,$C0               ;
2197   08E2 7E                                 LD      A,(HL)              ; get $43C0 PlayerState
2198   08E3 E6 F7                              AND     $F7                 ; mask out 1111_0111
2199   08E5 77                                 LD      (HL),A              ;
2200   08E6 2E A6                              LD      L,$A6               ;
2201   08E8 36 FF                              LD      (HL),$FF            ;
2202   08EA             L08EA:
2203   08EA 35                                 DEC     (HL)                ; decrement ShieldCount
2204   08EB             L08EB:
2205   08EB 2E C2                              LD      L,PlayerShipX & $FF ; LSB of $43C2 PlayerShipX
2206   08ED CD 00 09                           CALL    L0900               ; Update the player ship x coordinate.
2207   08F0 01 00 16                           LD      BC,T1600            ;
2208   08F3 C3 26 09                           JP      L0926               ; get player ship animation frame values, mapped with T1600/T1620
2209   08F6             
2210   0900                                    .ORG $0900
2211   0900             ;*****************************************************************************
2212   0900             ;* Update the player ship x coordinate.
2213   0900             ;*****************************************************************************
2214   0900             L0900:
2215   0900 3A A0 43                           LD      A,(IN0Current)      ;
2216   0903 2F                                 CPL                         ; flip the current bits
2217   0904 E6 60                              AND     $60                 ; mask out 0110_0000
2218   0906 C8                                 RET     Z                   ; if no button pressed
2219   0907 E6 40                              AND     $40                 ; mask out 0100_0000
2220   0909 CA 17 09                           JP      Z,L0917             ;
2221   090C 7E                                 LD      A,(HL)              ; get $43C2 PlayerShipX
2222   090D FE 0D                              CP      $0D                 ;
2223   090F D8                                 RET     C                   ; if left boundary reached
2224   0910 35                                 DEC     (HL)                ; 'left' button: dec $43C2 PlayerShipX
2225   0911 3E FF                              LD      A,$FF               ;
2226   0913 32 60 43                           LD      (PlayerMoved),A     ; set 'player moved' flag
2227   0916 C9                                 RET                         ;
2228   0917             L0917:
2229   0917 7E                                 LD      A,(HL)              ; get $43C2 PlayerShipX
2230   0918 FE C0                              CP      $C0                 ;
2231   091A D0                                 RET     NC                  ; if right boundary reached
2232   091B 34                                 INC     (HL)                ; 'right' button: inc $43C2 PlayerShipX
2233   091C 3E FF                              LD      A,$FF               ;
2234   091E 32 60 43                           LD      (PlayerMoved),A     ; set 'player moved' flag
2235   0921 C9                                 RET                         ;
2236   0922             
2237   0926                                    .ORG $0926
2238   0926             ;*****************************************************************************
2239   0926             ;* Get player ship animation frame values, mapped with T1600/T1620.
2240   0926             ;*****************************************************************************
2241   0926             L0926:
2242   0926 7E                                 LD      A,(HL)              ;
2243   0927 E6 07                              AND     $07                 ; mask out 0000_0111
2244   0929 81                                 ADD     A,C                 ;
2245   092A 4F                                 LD      C,A                 ;
2246   092B 0A                                 LD      A,(BC)              ; get data from table
2247   092C 2D                                 DEC     L                   ;
2248   092D 77                                 LD      (HL),A              ;
2249   092E C9                                 RET                         ;
2250   092F             
2251   0930                                    .ORG $0930
2252   0930             ;*****************************************************************************
2253   0930             ;* Get the assigned player bullet tile if fire button was pressed.
2254   0930             ;*****************************************************************************
2255   0930             L0930:
2256   0930 7E                                 LD      A,(HL)              ;
2257   0931 E6 08                              AND     $08                 ; mask out 0000_1000
2258   0933 C2 64 09                           JP      NZ,L0964            ; update PlayerBulletY (grid) and PlayerBulletState
2259   0936 EB                                 EX      DE,HL               ;
2260   0937 06 10                              LD      B,$10               ; 0001_0000 (bit4='fire')
2261   0939 CD BB 00                           CALL    CheckInputBits      ;
2262   093C C8                                 RET     Z                   ; return if button not pressed
2263   093D 7E                                 LD      A,(HL)              ;
2264   093E E6 EF                              AND     $EF                 ; mask out 1110_1111
2265   0940 77                                 LD      (HL),A              ;
2266   0941 1A                                 LD      A,(DE)              ;
2267   0942 F6 08                              OR      $08                 ; set bit3 at..
2268   0944 12                                 LD      (DE),A              ; $43C4 PlayerBulletState
2269   0945 13                                 INC     DE                  ;
2270   0946 13                                 INC     DE                  ;
2271   0947 3A C2 43                           LD      A,(PlayerShipX)     ;
2272   094A C6 04                              ADD     $04                 ; mask out 0000_0100
2273   094C 12                                 LD      (DE),A              ;
2274   094D 13                                 INC     DE                  ;
2275   094E 3A C3 43                           LD      A,(PlayerShipY)     ; $D8
2276   0951 D6 08                              SUB     $08                 ;
2277   0953 12                                 LD      (DE),A              ;
2278   0954 1B                                 DEC     DE                  ;
2279   0955 EB                                 EX      DE,HL               ;
2280   0956 01 20 16                           LD      BC,T1620            ; get character for player bullets
2281   0959 CD 26 09                           CALL    L0926               ; get player ship animation frame values, mapped with T1600/T1620
2282   095C 3E 30                              LD      A,$30               ; 0011_0000
2283   095E 32 61 43                           LD      (BulletTriggered),A ; set 'bullet triggered' flag
2284   0961 C9                                 RET                         ;
2285   0962             
2286   0964                                    .ORG $0964
2287   0964             ;*****************************************************************************
2288   0964             ;* Update PlayerBulletY (grid) and PlayerBulletState.
2289   0964             ;*****************************************************************************
2290   0964             L0964:
2291   0964 2C                                 INC     L                   ;
2292   0965 2C                                 INC     L                   ;
2293   0966 2C                                 INC     L                   ;
2294   0967 7E                                 LD      A,(HL)              ; get $43C7 PlayerBulletY (grid)
2295   0968 D6 08                              SUB     $08                 ; move bullet ($08 represents the bullet speed)
2296   096A 77                                 LD      (HL),A              ;
2297   096B FE 1F                              CP      $1F                 ; top of the screen reached?
2298   096D D0                                 RET     NC                  ; if not reached
2299   096E             L096E:
2300   096E 2D                                 DEC     L                   ;
2301   096F 2D                                 DEC     L                   ;
2302   0970 2D                                 DEC     L                   ;
2303   0971 7E                                 LD      A,(HL)              ; get $43C4 PlayerBulletState
2304   0972 E6 F7                              AND     $F7                 ; 1111_0111
2305   0974 77                                 LD      (HL),A              ; del bit3 at PlayerBulletState
2306   0975 C9                                 RET                         ;
2307   0976             
2308   097A                                    .ORG $097A
2309   097A             ;*****************************************************************************
2310   097A             ;* Player ship X position mapping.
2311   097A             ;*****************************************************************************
2312   097A             L097A:
2313   097A 3A C2 43                           LD      A,(PlayerShipX)     ;
2314   097D 47                                 LD      B,A                 ; save it
2315   097E E6 07                              AND     $07                 ; mask out 0000_0111
2316   0980 07                                 RLCA                        ;
2317   0981 21 38 0B                           LD      HL,T0B38            ; mapping table
2318   0984 85                                 ADD     A,L                 ;
2319   0985 6F                                 LD      L,A                 ;
2320   0986 78                                 LD      A,B                 ; restore it
2321   0987 96                                 SUB     (HL)                ;
2322   0988 32 9E 43                           LD      (M439E),A           ; Mapped player ship position, left part
2323   098B 23                                 INC     HL                  ;
2324   098C 78                                 LD      A,B                 ;
2325   098D 86                                 ADD     A,(HL)              ;
2326   098E 32 9F 43                           LD      (M439F),A           ; Mapped player ship position, right part
2327   0991 C9                                 RET                         ;
2328   0992             
2329   09A0                                    .ORG $09A0
2330   09A0             ;*****************************************************************************
2331   09A0             ;* Get screen ram adress for player and bullet positions.
2332   09A0             ;* from: 43C2:43C3, 43C6:43C7, 43CA:43CB
2333   09A0             ;* ......PlayerShipX
2334   09A0             ;* ...........PlayerShipY
2335   09A0             ;* .................PlayerBulletX
2336   09A0             ;* ......................PlayerBulletY
2337   09A0             ;* ............................AbovePlayerBulletX
2338   09A0             ;* .................................AbovePlayerBulletY
2339   09A0             ;* to:   43E2:43E3, 43E6:43E7, 43EA:43EB
2340   09A0             ;*****************************************************************************
2341   09A0             L09A0:
2342   09A0 01 C2 43                           LD      BC,PlayerShipX      ;
2343   09A3 11 E2 43                           LD      DE,PlayerShipMSB    ;
2344   09A6             L09A6:
2345   09A6 CD BA 09                           CALL    GetScreenRamAddress ;
2346   09A9 03                                 INC     BC                  ;
2347   09AA 03                                 INC     BC                  ;
2348   09AB 03                                 INC     BC                  ;
2349   09AC 13                                 INC     DE                  ;
2350   09AD 13                                 INC     DE                  ;
2351   09AE 13                                 INC     DE                  ;
2352   09AF 79                                 LD      A,C                 ;
2353   09B0 FE CE                              CP      $CE                 ; end of data structure
2354   09B2 C2 A6 09                           JP      NZ,L09A6            ;
2355   09B5 C9                                 RET                         ;
2356   09B6             
2357   09BA                                    .ORG $09BA
2358   09BA             ;*****************************************************************************
2359   09BA             ;* Mapping of 'grid values' to screen ram address.
2360   09BA             ;*****************************************************************************
2361   09BA             GetScreenRamAddress:
2362   09BA 21 00 0A                           LD      HL,T0A00            ; Screen ram addresses for the top row (left to right)
2363   09BD 0A                                 LD      A,(BC)              ; get the coordinate
2364   09BE E6 F8                              AND     $F8                 ; 1111_1000
2365   09C0 0F                                 RRCA                        ; 0111_1100
2366   09C1 0F                                 RRCA                        ; 0011_1110
2367   09C2 85                                 ADD     A,L                 ;
2368   09C3 6F                                 LD      L,A                 ;
2369   09C4 7E                                 LD      A,(HL)              ; get MSB of screen ram address for row
2370   09C5 12                                 LD      (DE),A              ; save it
2371   09C6 03                                 INC     BC                  ;
2372   09C7 13                                 INC     DE                  ;
2373   09C8 23                                 INC     HL                  ; move to LSB for T0A00
2374   09C9 0A                                 LD      A,(BC)              ; get the coordinate
2375   09CA E6 F8                              AND     $F8                 ; 1111_1000
2376   09CC 0F                                 RRCA                        ; 0111_1100
2377   09CD 0F                                 RRCA                        ; 0011_1110
2378   09CE 0F                                 RRCA                        ; 0001_1111
2379   09CF 86                                 ADD     A,(HL)              ; add to LSB of screen ram address for row
2380   09D0 12                                 LD      (DE),A              ; save it
2381   09D1 C9                                 RET                         ;
2382   09D2             
2383   0A00                                    .ORG $0A00
2384   0A00             ; Screen ram addresses for the top row (left to right)
2385   0A00             ; Notice these addresses are MSB:LSB (backwards from the processors endianness)
2386   0A00             T0A00:
2387   0A00                                    .MSFIRST
2388   0A00 43 20                              .DW ForegroundScreen+$320  ; Upper left corner of rotated screen
2389   0A02 43 00                              .DW ForegroundScreen+$300
2390   0A04 42 E0                              .DW ForegroundScreen+$2E0
2391   0A06 42 C0                              .DW ForegroundScreen+$2C0
2392   0A08 42 A0                              .DW ForegroundScreen+$2A0
2393   0A0A 42 80                              .DW ForegroundScreen+$280
2394   0A0C 42 60                              .DW ForegroundScreen+$260
2395   0A0E 42 40                              .DW ForegroundScreen+$240
2396   0A10 42 20                              .DW ForegroundScreen+$220
2397   0A12 42 00                              .DW ForegroundScreen+$200
2398   0A14 41 E0                              .DW ForegroundScreen+$1E0
2399   0A16 41 C0                              .DW ForegroundScreen+$1C0
2400   0A18 41 A0                              .DW ForegroundScreen+$1A0
2401   0A1A 41 80                              .DW ForegroundScreen+$180
2402   0A1C 41 60                              .DW ForegroundScreen+$160
2403   0A1E 41 40                              .DW ForegroundScreen+$140
2404   0A20 41 20                              .DW ForegroundScreen+$120
2405   0A22 41 00                              .DW ForegroundScreen+$100
2406   0A24 40 E0                              .DW ForegroundScreen+$E0
2407   0A26 40 C0                              .DW ForegroundScreen+$C0
2408   0A28 40 A0                              .DW ForegroundScreen+$A0
2409   0A2A 40 80                              .DW ForegroundScreen+$80
2410   0A2C 40 60                              .DW ForegroundScreen+$60
2411   0A2E 40 40                              .DW ForegroundScreen+$40
2412   0A30 40 20                              .DW ForegroundScreen+$20
2413   0A32 40 00                              .DW ForegroundScreen       ; Upper right corner of rotated screen
2414   0A34             ; not used ?
2415   0A34 00 00                              .DB $00, $00
2416   0A36 00 00                              .DB $00, $00
2417   0A38 00 00                              .DB $00, $00
2418   0A3A 00 00                              .DB $00, $00
2419   0A3C 00 00                              .DB $00, $00
2420   0A3E 00 00                              .DB $00, $00
2421   0A40             ;
2422   0A40             T0A40:
2423   0A40 AA BA AB BB                        .DB $AA, $BA, $AB, $BB     ;alien shape #37 (set A)
2424   0A44 80 90 81 91                        .DB $80, $90, $81, $91     ;alien shape #34 (set A)
2425   0A48             T0A48:
2426   0A48 74 7C 75 7D                        .DB $74, $7C, $75, $7D     ;alien pilot shape (set B)
2427   0A4C             
2428   0A50                                    .ORG $0A50
2429   0A50             ;*****************************************************************************
2430   0A50             ;* Handle alien control states for all aliens.
2431   0A50             ;*****************************************************************************
2432   0A50             AlienDataController:
2433   0A50 01 70 4B                           LD      BC,M4B70            ; alien data structure (grid)
2434   0A53 11 B0 4B                           LD      DE,M4BB0            ; alien data structure (screen ram)
2435   0A56             L0A56:
2436   0A56 C5                                 PUSH    BC                  ;
2437   0A57 CD 18 07                           CALL    UpdateScreenObjects ;
2438   0A5A C1                                 POP     BC                  ;
2439   0A5B 79                                 LD      A,C                 ;
2440   0A5C C6 04                              ADD     $04                 ;
2441   0A5E 4F                                 LD      C,A                 ;
2442   0A5F C6 40                              ADD     $40                 ;
2443   0A61 5F                                 LD      E,A                 ;
2444   0A62 50                                 LD      D,B                 ;
2445   0A63 A7                                 AND     A                   ; updates the zero flag
2446   0A64 C2 56 0A                           JP      NZ,L0A56            ;
2447   0A67 C9                                 RET                         ;
2448   0A68             
2449   0A6C                                    .ORG $0A6C
2450   0A6C             ;*****************************************************************************
2451   0A6C             ;* Get screen ram adress for all aliens.
2452   0A6C             ;*****************************************************************************
2453   0A6C             L0A6C:
2454   0A6C 01 70 4B                           LD      BC,M4B70            ; data structure for alien control and screen coordinate
2455   0A6F 11 B3 4B                           LD      DE,M4BB3            ; data structure for alien screen ram address
2456   0A72             L0A72:
2457   0A72 C5                                 PUSH    BC                  ;
2458   0A73 D5                                 PUSH    DE                  ;
2459   0A74 0A                                 LD      A,(BC)              ;
2460   0A75 E6 18                              AND     $18                 ; mask out 0001_1000
2461   0A77 CA 8A 0A                           JP      Z,L0A8A             ; if 0 then skip the mapping
2462   0A7A EB                                 EX      DE,HL               ;
2463   0A7B 56                                 LD      D,(HL)              ;
2464   0A7C 2B                                 DEC     HL                  ;
2465   0A7D 5E                                 LD      E,(HL)              ;
2466   0A7E 2B                                 DEC     HL                  ;
2467   0A7F 72                                 LD      (HL),D              ;
2468   0A80 2B                                 DEC     HL                  ;
2469   0A81 73                                 LD      (HL),E              ;
2470   0A82 EB                                 EX      DE,HL               ;
2471   0A83 13                                 INC     DE                  ;
2472   0A84 13                                 INC     DE                  ;
2473   0A85 03                                 INC     BC                  ;
2474   0A86 03                                 INC     BC                  ;
2475   0A87 CD BA 09                           CALL    GetScreenRamAddress ;
2476   0A8A             L0A8A:
2477   0A8A D1                                 POP     DE                  ;
2478   0A8B C1                                 POP     BC                  ;
2479   0A8C 79                                 LD      A,C                 ;
2480   0A8D C6 04                              ADD     $04                 ;
2481   0A8F 4F                                 LD      C,A                 ;
2482   0A90 7B                                 LD      A,E                 ;
2483   0A91 C6 04                              ADD     $04                 ;
2484   0A93 5F                                 LD      E,A                 ;
2485   0A94 FE 03                              CP      $03                 ;
2486   0A96 C2 72 0A                           JP      NZ,L0A72            ;
2487   0A99 C9                                 RET                         ;
2488   0A9A             
2489   0AA0                                    .ORG $0AA0
2490   0AA0             ;*****************************************************************************
2491   0AA0             ;* Handler for the player shield.
2492   0AA0             ;*****************************************************************************
2493   0AA0             DrawShields:
2494   0AA0 2E E2                              LD      L,PlayerShipMSB & $FF     ; HL=43E2 Player's screen memory location
2495   0AA2 56                                 LD      D,(HL)              ; Get the PlayerScreenRamMSB
2496   0AA3 23                                 INC     HL                  ; Get the ... PlayerScreenRamLSB
2497   0AA4 5E                                 LD      E,(HL)              ; ... LSB (ignore any fine bit shifting of the player)
2498   0AA5 CD 10 02                           CALL    LeftOneColumn       ; Shield pictures begin one column to the left of the ship
2499   0AA8 1B                                 DEC     DE                  ; Shield pictures begin one row above the ship
2500   0AA9 01 04 04                           LD      BC,$0404            ; Shiled images are 4x4
2501   0AAC 2E A6                              LD      L,ShieldCount & $FF ; Decrement the ...
2502   0AAE 35                                 DEC     (HL)                ; ... shield counter
2503   0AAF 7E                                 LD      A,(HL)              ; Current shield counter value
2504   0AB0 21 F0 17                           LD      HL,FourByFourEmpty  ; Blank 4x4
2505   0AB3 FE C0                              CP      $C0                 ; Shield time done?
2506   0AB5 CA 48 0B                           JP      Z,ShieldsExpired    ; Yes ... turn shields off
2507   0AB8 21 70 17                           LD      HL,T1770            ; Four shield-active pictures
2508   0ABB E6 0C                              AND     $0C                 ; Drop lower 2 bits (0000_1100). Images change every 4 ticks.
2509   0ABD 07                                 RLCA                        ; Multiply by 4 ...
2510   0ABE 07                                 RLCA                        ; ... to get a 16-byte offest (4x4 pictures)
2511   0ABF 85                                 ADD     A,L                 ; Point to the ...
2512   0AC0 6F                                 LD      L,A                 ; ... correct image
2513   0AC1 C3 D6 0A                           JP      DrawImageCbyB       ; Draw the new shield image
2514   0AC4             
2515   0AD6                                    .ORG $0AD6
2516   0AD6             ;*****************************************************************************
2517   0AD6             ; B is number of rows
2518   0AD6             ; C is number of columns
2519   0AD6             ; HL is the data
2520   0AD6             ; DE is the pointer to the screen
2521   0AD6             ;*****************************************************************************
2522   0AD6             DrawImageCbyB:
2523   0AD6 D5                                 PUSH    DE                  ; Hold screen pointer
2524   0AD7 C5                                 PUSH    BC                  ; Hold width/Height
2525   0AD8             L0AD8:
2526   0AD8 7E                                 LD      A,(HL)              ; Character to ...
2527   0AD9 12                                 LD      (DE),A              ; ... the screen
2528   0ADA 23                                 INC     HL                  ; Next in data
2529   0ADB 13                                 INC     DE                  ; Next column on screen
2530   0ADC 05                                 DEC     B                   ; All rows done in this column?
2531   0ADD C2 D8 0A                           JP      NZ,L0AD8            ; No ... finish the rows
2532   0AE0 C1                                 POP     BC                  ; Restore the counters
2533   0AE1 D1                                 POP     DE                  ; Restore the screen pointer
2534   0AE2 CD 17 02                           CALL    RightOneColumn      ; Move over one column
2535   0AE5 0D                                 DEC     C                   ; All columns done?
2536   0AE6 C2 D6 0A                           JP      NZ,DrawImageCbyB    ; No ... do all columns
2537   0AE9 C9                                 RET                         ; Done
2538   0AEA             
2539   0AEA             ;*****************************************************************************
2540   0AEA             ;* Game state 4.
2541   0AEA             ;* Player ship partikel explosion.
2542   0AEA             ;*****************************************************************************
2543   0AEA             L0AEA:
2544   0AEA 21 B9 43                           LD      HL,CounterB9        ;
2545   0AED 7E                                 LD      A,(HL)              
2546   0AEE E6 F8                              AND     $F8                 
2547   0AF0 77                                 LD      (HL),A              
2548   0AF1 32 00 58                           LD      (scrollRegister),A  ; 58xx scroll register
2549   0AF4 2E E2                              LD      L,$E2               
2550   0AF6 56                                 LD      D,(HL)              
2551   0AF7 2C                                 INC     L                   
2552   0AF8 5E                                 LD      E,(HL)              
2553   0AF9 CD 10 02                           CALL    LeftOneColumn       ;
2554   0AFC 1B                                 DEC     DE                  
2555   0AFD 00                                 NOP                         
2556   0AFE 2E A5                              LD      L,$A5               
2557   0B00 35                                 DEC     (HL)                
2558   0B01 7E                                 LD      A,(HL)              
2559   0B02 CA 15 0B                           JP      Z,L0B15             ;
2560   0B05 FE 20                              CP      $20                 
2561   0B07 DA A0 0B                           JP      C,L0BA0             ;
2562   0B0A CA 80 03                           JP      Z,ClearForeground   ;
2563   0B0D C3 BA 0B                           JP      L0BBA               ;
2564   0B10             
2565   0B15                                    .ORG $0B15
2566   0B15             L0B15:
2567   0B15 2D                                 DEC     L                   ;
2568   0B16 36 05                              LD      (HL),$05            
2569   0B18 2D                                 DEC     L                   
2570   0B19 7E                                 LD      A,(HL)              
2571   0B1A C6 90                              ADD     $90                 
2572   0B1C 6F                                 LD      L,A                 
2573   0B1D 7E                                 LD      A,(HL)              
2574   0B1E A7                                 AND     A                   ; updates the zero flag
2575   0B1F C8                                 RET     Z                   
2576   0B20 35                                 DEC     (HL)                
2577   0B21 E5                                 PUSH    HL                  
2578   0B22 CD 67 03                           CALL    UpdateLivesScreen   ;
2579   0B25 E1                                 POP     HL                  
2580   0B26 7E                                 LD      A,(HL)              
2581   0B27 A7                                 AND     A                   ; updates the zero flag
2582   0B28 C8                                 RET     Z                   
2583   0B29 2E A4                              LD      L,$A4               
2584   0B2B 36 00                              LD      (HL),$00            
2585   0B2D C9                                 RET                         
2586   0B2E             
2587   0B38                                    .ORG $0B38
2588   0B38             ; Player ship X position mapping table
2589   0B38             T0B38:
2590   0B38 00 08                              .DB $00, $08
2591   0B3A 01 09                              .DB $01, $09
2592   0B3C 02 0A                              .DB $02, $0A
2593   0B3E 03 0B                              .DB $03, $0B
2594   0B40 03 0B                              .DB $03, $0B
2595   0B42 02 0A                              .DB $02, $0A
2596   0B44 01 09                              .DB $01, $09
2597   0B46 00 08                              .DB $00, $08
2598   0B48             ;
2599   0B48             ShieldsExpired:
2600   0B48 CD D6 0A                           CALL    DrawImageCbyB       ;
2601   0B4B 21 C0 43                           LD      HL,PlayerState      ;
2602   0B4E 36 0C                              LD      (HL),$0C            
2603   0B50 2C                                 INC     L                   
2604   0B51 36 0C                              LD      (HL),$0C            
2605   0B53 2C                                 INC     L                   
2606   0B54 7E                                 LD      A,(HL)              
2607   0B55 E6 F8                              AND     $F8                 
2608   0B57 F6 03                              OR      $03                 
2609   0B59 77                                 LD      (HL),A              
2610   0B5A C9                                 RET                         
2611   0B5B             
2612   0B60                                    .ORG $0B60
2613   0B60             ;*****************************************************************************
2614   0B60             ;* Game state 5.
2615   0B60             ;* 'GAME OVER'.
2616   0B60             ;*****************************************************************************
2617   0B60             L0B60:
2618   0B60 21 A5 43                           LD      HL,CounterA5        ;
2619   0B63 34                                 INC     (HL)                
2620   0B64 7E                                 LD      A,(HL)              
2621   0B65 FE 40                              CP      $40                 
2622   0B67 CA A0 03                           JP      Z,ClearBackground   ;
2623   0B6A 21 00 1A                           LD      HL,T1A00            ; "        GAME  OVER        "
2624   0B6D 0E 01                              LD      C,$01               
2625   0B6F FE 80                              CP      $80                 
2626   0B71 C2 95 0B                           JP      NZ,L0B95            ; 
2627   0B74 21 A4 43                           LD      HL,GameState        ; Next interval game state ...
2628   0B77 36 00                              LD      (HL),$00            ; ... is 0 (new game start)
2629   0B79 2E 90                              LD      L,$90               
2630   0B7B 7E                                 LD      A,(HL)              
2631   0B7C 2C                                 INC     L                   
2632   0B7D B6                                 OR      (HL)                
2633   0B7E C0                                 RET     NZ                  
2634   0B7F AF                                 XOR     A                   ; A=0
2635   0B80 2E 98                              LD      L,$98               
2636   0B82 77                                 LD      (HL),A              
2637   0B83 2C                                 INC     L                   
2638   0B84 77                                 LD      (HL),A              
2639   0B85 2E A2                              LD      L,$A2               
2640   0B87 77                                 LD      (HL),A              
2641   0B88 2C                                 INC     L                   
2642   0B89 7E                                 LD      A,(HL)              
2643   0B8A A7                                 AND     A                   ; updates the zero flag
2644   0B8B C8                                 RET     Z                   
2645   0B8C 36 00                              LD      (HL),$00            
2646   0B8E 01 00 01                           LD      BC,$0100            ; from bank 1 to bank 0
2647   0B91 CD 60 04                           CALL    CopyMemoryBank      ;
2648   0B94 C9                                 RET                         
2649   0B95             ;
2650   0B95             L0B95:
2651   0B95 CD D0 01                           CALL    PrintTextLines      ;
2652   0B98 CD E4 01                           CALL    L01E4               ; Print the copyright lines
2653   0B9B C3 F0 1D                           JP      L1DF0               ;
2654   0B9E             
2655   0BA0                                    .ORG $0BA0
2656   0BA0             ;
2657   0BA0             L0BA0:
2658   0BA0 21 B8 43                           LD      HL,LevelAndRound    ;
2659   0BA3 7E                                 LD      A,(HL)              ;
2660   0BA4 E6 0F                              AND     $0F                 ; mask out 0000_1111
2661   0BA6 FE 04                              CP      $04                 ;
2662   0BA8 D8                                 RET     C                   ; return if < game level 4 (alien waves)
2663   0BA9 FE 09                              CP      $09                 ;
2664   0BAB D0                                 RET     NC                  ; return if > game level 9 (mothership)
2665   0BAC 2C                                 INC     L                   ; CounterB9
2666   0BAD AF                                 XOR     A                   ; A=0
2667   0BAE 77                                 LD      (HL),A              ; CounterB9 to 0
2668   0BAF 32 00 58                           LD      (scrollRegister),A  ; reset the 58xx scroll register
2669   0BB2 C3 A0 03                           JP      ClearBackground     ;
2670   0BB5             
2671   0BBA                                    .ORG $0BBA
2672   0BBA             ;
2673   0BBA             L0BBA:
2674   0BBA 47                                 LD      B,A                 ;
2675   0BBB 0F                                 RRCA                        ;
2676   0BBC D2 C0 0F                           JP      NC,L0FC0            ; Handle animations for killed aliens
2677   0BBF 0F                                 RRCA                        ;
2678   0BC0 78                                 LD      A,B                 ;
2679   0BC1 DA 70 20                           JP      C,L2070             ;
2680   0BC4 C3 E8 20                           JP      L20E8               ;
2681   0BC7             
2682   0BCA                                    .ORG $0BCA
2683   0BCA             ;*****************************************************************************
2684   0BCA             ;* Draws the character tiles for the score average table.
2685   0BCA             ;*****************************************************************************
2686   0BCA             DrawScoreAverageTableTiles:
2687   0BCA 21 D0 42                           LD      HL,$42D0            ; upper left corner screen ram position
2688   0BCD 01 DF FF                           LD      BC,$FFDF            ; Screen offset constant -33 right one column (-1), up one row (-32)
2689   0BD0 36 64                              LD      (HL),$64            ; left part of alien shape #3
2690   0BD2 09                                 ADD     HL,BC               ;
2691   0BD3 23                                 INC     HL                  ;
2692   0BD4 36 65                              LD      (HL),$65            ; right part of alien shape #3
2693   0BD6 21 F2 42                           LD      HL,$42F2            ; screen ram position for
2694   0BD9 11 40 0A                           LD      DE,T0A40            ; T0A40 alien shape #37 and alien shape #34
2695   0BDC CD 38 35                           CALL    Draw4x2             ;
2696   0BDF 21 15 4B                           LD      HL,$4B15            ; screen ram position for
2697   0BE2 11 00 3C                           LD      DE,T3C00            ; bird shape #24 (Object 3C00)
2698   0BE5 CD 28 35                           CALL    Draw6x2             ;
2699   0BE8 21 D8 4A                           LD      HL,$4AD8            ; screen ram position for
2700   0BEB 11 48 0A                           LD      DE,T0A48            ; T0A48 alien pilot shape
2701   0BEE CD 48 35                           CALL    Draw2x2             ;
2702   0BF1 C9                                 RET                         ;
2703   0BF2             
2704   0C00                                    .ORG $0C00
2705   0C00             L0C00:
2706   0C00 E5                                 PUSH    HL                  
2707   0C01 7D                                 LD      A,L                 
2708   0C02 D6 72                              SUB     $72                 
2709   0C04 0F                                 RRCA                        
2710   0C05 C6 50                              ADD     $50                 
2711   0C07 6F                                 LD      L,A                 
2712   0C08 7E                                 LD      A,(HL)              
2713   0C09 2C                                 INC     L                   
2714   0C0A 6E                                 LD      L,(HL)              
2715   0C0B 67                                 LD      H,A                 
2716   0C0C 11 04 0C                           LD      DE,$0C04            
2717   0C0F 7E                                 LD      A,(HL)              
2718   0C10 E1                                 POP     HL                  
2719   0C11 FE 07                              CP      $07                 
2720   0C13 DA A4 0E                           JP      C,L0EA4             ;
2721   0C16 FE 09                              CP      $09                 
2722   0C18 D2 A4 0E                           JP      NC,L0EA4            ;
2723   0C1B 11 20 10                           LD      DE,$1020            ; set E reg. for bonus explosion score 200
2724   0C1E 3E FF                              LD      A,$FF               ; set bonus explosion flag
2725   0C20 32 69 43                           LD      (M4369),A           ;
2726   0C23 C3 A4 0E                           JP      L0EA4               ;
2727   0C26             
2728   0C40                                    .ORG $0C40
2729   0C40             ;
2730   0C40             L0C40:
2731   0C40 21 FF 43                           LD      HL,AlienBullet4LSB  ; 
2732   0C43 06 05                              LD      B,$05               
2733   0C45 CD 8B 08                           CALL    L088B               ; 
2734   0C48 CD 56 0C                           CALL    L0C56               ; 
2735   0C4B CD 6B 0C                           CALL    L0C6B               ; 
2736   0C4E CD D8 0C                           CALL    L0CD8               ; 
2737   0C51 C9                                 RET                         
2738   0C52             
2739   0C56                                    .ORG $0C56
2740   0C56             L0C56:
2741   0C56 21 CC 43                           LD      HL,AlienBullet0State; 
2742   0C59             L0C59:
2743   0C59 E5                                 PUSH    HL                  
2744   0C5A CD 84 0C                           CALL    L0C84               ; 
2745   0C5D E1                                 POP     HL                  
2746   0C5E 7D                                 LD      A,L                 
2747   0C5F C6 04                              ADD     $04                 
2748   0C61 6F                                 LD      L,A                 
2749   0C62 FE E0                              CP      $E0                 
2750   0C64 C2 59 0C                           JP      NZ,L0C59            ; 
2751   0C67 C9                                 RET                         
2752   0C68             
2753   0C6B                                    .ORG $0C6B
2754   0C6B             L0C6B:
2755   0C6B 01 CE 43                           LD      BC,AlienBullet0X    ; 
2756   0C6E 11 EE 43                           LD      DE,AlienBullet0MSB  ; 
2757   0C71             L0C71:
2758   0C71 CD BA 09                           CALL    GetScreenRamAddress ; 
2759   0C74 03                                 INC     BC                  
2760   0C75 03                                 INC     BC                  
2761   0C76 03                                 INC     BC                  
2762   0C77 13                                 INC     DE                  
2763   0C78 13                                 INC     DE                  
2764   0C79 13                                 INC     DE                  
2765   0C7A 79                                 LD      A,C                 
2766   0C7B FE E2                              CP      $E2                 
2767   0C7D C2 71 0C                           JP      NZ,L0C71            ; 
2768   0C80 C9                                 RET                         
2769   0C81             
2770   0C84                                    .ORG $0C84
2771   0C84             L0C84:
2772   0C84 7E                                 LD      A,(HL)              
2773   0C85 E6 08                              AND     $08                 
2774   0C87 C8                                 RET     Z                   
2775   0C88 00                                 NOP                         
2776   0C89 00                                 NOP                         
2777   0C8A 2C                                 INC     L                   
2778   0C8B 7E                                 LD      A,(HL)              
2779   0C8C EE 04                              XOR     $04                 
2780   0C8E 77                                 LD      (HL),A              
2781   0C8F 2C                                 INC     L                   
2782   0C90 2C                                 INC     L                   
2783   0C91 7E                                 LD      A,(HL)              
2784   0C92 C6 04                              ADD     $04                 
2785   0C94 77                                 LD      (HL),A              
2786   0C95 FE F9                              CP      $F9                 
2787   0C97 D2 6E 09                           JP      NC,L096E            ; 
2788   0C9A 2D                                 DEC     L                   
2789   0C9B CD B4 0C                           CALL    L0CB4               ; 
2790   0C9E 54                                 LD      D,H                 
2791   0C9F 7D                                 LD      A,L                 
2792   0CA0 C6 20                              ADD     $20                 
2793   0CA2 5F                                 LD      E,A                 
2794   0CA3 EB                                 EX      DE,HL               
2795   0CA4 46                                 LD      B,(HL)              
2796   0CA5 23                                 INC     HL                  
2797   0CA6 4E                                 LD      C,(HL)              
2798   0CA7 0A                                 LD      A,(BC)              
2799   0CA8 EB                                 EX      DE,HL               
2800   0CA9 2C                                 INC     L                   
2801   0CAA FE E8                              CP      $E8                 
2802   0CAC D2 6E 09                           JP      NC,L096E            ; 
2803   0CAF C9                                 RET                         
2804   0CB0             
2805   0CB4                                    .ORG $0CB4
2806   0CB4             ;
2807   0CB4             L0CB4:
2808   0CB4 FE DC                              CP      $DC                 
2809   0CB6 D8                                 RET     C                   
2810   0CB7 FE E9                              CP      $E9                 
2811   0CB9 D0                                 RET     NC                  
2812   0CBA 3A 9F 43                           LD      A,(M439F)           ; 
2813   0CBD BE                                 CP      (HL)                
2814   0CBE D8                                 RET     C                   
2815   0CBF 3A 9E 43                           LD      A,(M439E)           ; 
2816   0CC2 BE                                 CP      (HL)                
2817   0CC3 D0                                 RET     NC                  
2818   0CC4             
2819   0CC4             ;*****************************************************************************
2820   0CC4             ;* The player ship was hit.
2821   0CC4             ;* MAME cheat code "Invincibility": Set $0CC4 to $C9 (RET).
2822   0CC4             ;*****************************************************************************
2823   0CC4             L0CC4:
2824   0CC4 3E 04                              LD      A,$04               ; Next interval game state is 4 (player ship partikel explosion)
2825   0CC6 32 A4 43                           LD      (GameState),A       ; 
2826   0CC9 3E 60                              LD      A,$60               ; set a new counter value for ...
2827   0CCB 32 A5 43                           LD      (CounterA5),A       ; 
2828   0CCE 3E 10                              LD      A,$10               ; set flag and counter for ..
2829   0CD0 32 63 43                           LD      (ParticleExplosion),A
2830   0CD3 C9                                 RET                         ;
2831   0CD4             
2832   0CD8                                    .ORG $0CD8
2833   0CD8             ;
2834   0CD8             L0CD8:
2835   0CD8 01 CC 43                           LD      BC,AlienBullet0State; data structure (grid)
2836   0CDB 11 EC 43                           LD      DE,OldAlienBullet0MSB; screen ram
2837   0CDE             L0CDE:
2838   0CDE C5                                 PUSH    BC                  
2839   0CDF CD 18 07                           CALL    UpdateScreenObjects ; 
2840   0CE2 C1                                 POP     BC                  
2841   0CE3 79                                 LD      A,C                 
2842   0CE4 C6 04                              ADD     $04                 
2843   0CE6 4F                                 LD      C,A                 
2844   0CE7 C6 20                              ADD     $20                 
2845   0CE9 5F                                 LD      E,A                 
2846   0CEA 50                                 LD      D,B                 
2847   0CEB A7                                 AND     A                   ; updates the zero flag
2848   0CEC C2 DE 0C                           JP      NZ,L0CDE            ; 
2849   0CEF C9                                 RET                         
2850   0CF0             
2851   0CF4                                    .ORG $0CF4
2852   0CF4             ; Alien collision on left or right side of player ship.
2853   0CF4             L0CF4:
2854   0CF4 D1                                 POP     DE                  
2855   0CF5 C1                                 POP     BC                  
2856   0CF6 C9                                 RET                         
2857   0CF7             
2858   0D1C                                    .ORG $0D1C
2859   0D1C             L0D1C:
2860   0D1C 01 70 4B                           LD      BC,M4B70            ; 
2861   0D1F 21 50 4B                           LD      HL,M4B50            ; 
2862   0D22             L0D22:
2863   0D22 CD 30 0D                           CALL    L0D30               ; 
2864   0D25 0C                                 INC     C                   
2865   0D26 0C                                 INC     C                   
2866   0D27 2C                                 INC     L                   
2867   0D28 3E B0                              LD      A,$B0               
2868   0D2A B9                                 CP      C                   
2869   0D2B C2 22 0D                           JP      NZ,L0D22            ; 
2870   0D2E C9                                 RET                         
2871   0D2F             
2872   0D30                                    .ORG $0D30
2873   0D30             ;
2874   0D30             L0D30:
2875   0D30 56                                 LD      D,(HL)              
2876   0D31 23                                 INC     HL                  
2877   0D32 0A                                 LD      A,(BC)              
2878   0D33 03                                 INC     BC                  
2879   0D34 03                                 INC     BC                  
2880   0D35 E6 08                              AND     $08                 
2881   0D37 C8                                 RET     Z                   ; if bit3 of alien control state A, not set
2882   0D38 5E                                 LD      E,(HL)              
2883   0D39 EB                                 EX      DE,HL               
2884   0D3A 7E                                 LD      A,(HL)              ; get T1000 (Closed loops pattern table for aliens)
2885   0D3B 07                                 RLCA                        ; Multiply by 2
2886   0D3C C6 00                              ADD     $00                 ; reset all flags
2887   0D3E 6F                                 LD      L,A                 
2888   0D3F 26 17                              LD      H,T1700 >> 8        ; get MSB for T1700
2889   0D41 AF                                 XOR     A                   ; A=0
2890   0D42 BE                                 CP      (HL)                
2891   0D43 CA 4F 0D                           JP      Z,L0D4F             ; 
2892   0D46 23                                 INC     HL                  
2893   0D47 BE                                 CP      (HL)                
2894   0D48 CA 5E 0D                           JP      Z,L0D5E             ; 
2895   0D4B 2B                                 DEC     HL                  
2896   0D4C 0A                                 LD      A,(BC)              
2897   0D4D 86                                 ADD     A,(HL)              
2898   0D4E 02                                 LD      (BC),A              
2899   0D4F             L0D4F:
2900   0D4F 03                                 INC     BC                  
2901   0D50 23                                 INC     HL                  
2902   0D51 0A                                 LD      A,(BC)              
2903   0D52 86                                 ADD     A,(HL)              
2904   0D53 02                                 LD      (BC),A              
2905   0D54 0B                                 DEC     BC                  
2906   0D55 E6 07                              AND     $07                 
2907   0D57 EB                                 EX      DE,HL               
2908   0D58 C0                                 RET     NZ                  
2909   0D59 34                                 INC     (HL)                
2910   0D5A C9                                 RET                         
2911   0D5B             
2912   0D5E                                    .ORG $0D5E
2913   0D5E             L0D5E:
2914   0D5E 2B                                 DEC     HL                  
2915   0D5F 0A                                 LD      A,(BC)              
2916   0D60 86                                 ADD     A,(HL)              
2917   0D61 02                                 LD      (BC),A              
2918   0D62 E6 07                              AND     $07                 
2919   0D64 EB                                 EX      DE,HL               
2920   0D65 C0                                 RET     NZ                  
2921   0D66 34                                 INC     (HL)                
2922   0D67 C9                                 RET                         
2923   0D68             
2924   0D70                                    .ORG $0D70
2925   0D70             ;
2926   0D70             L0D70:
2927   0D70 01 70 4B                           LD      BC,M4B70            ; 
2928   0D73 21 50 4B                           LD      HL,M4B50            ; 
2929   0D76             L0D76:
2930   0D76 CD 86 0D                           CALL    L0D86               ; 
2931   0D79 79                                 LD      A,C                 
2932   0D7A C6 04                              ADD     $04                 
2933   0D7C 4F                                 LD      C,A                 
2934   0D7D 3E B0                              LD      A,$B0               
2935   0D7F B9                                 CP      C                   
2936   0D80 C2 76 0D                           JP      NZ,L0D76            ; 
2937   0D83 C9                                 RET                         
2938   0D84             
2939   0D86                                    .ORG $0D86
2940   0D86             L0D86:
2941   0D86 56                                 LD      D,(HL)              
2942   0D87 23                                 INC     HL                  
2943   0D88 5E                                 LD      E,(HL)              
2944   0D89 23                                 INC     HL                  
2945   0D8A 0A                                 LD      A,(BC)              
2946   0D8B E6 08                              AND     $08                 
2947   0D8D C8                                 RET     Z                   
2948   0D8E EB                                 EX      DE,HL               
2949   0D8F 7E                                 LD      A,(HL)              ; Closed loops pattern table for aliens
2950   0D90 A7                                 AND     A                   ; updates the zero flag
2951   0D91 CC DE 0D                           CALL    Z,L0DDE             ; 
2952   0D94 6F                                 LD      L,A                 
2953   0D95 07                                 RLCA                        ; Multiply by 2
2954   0D96 85                                 ADD     A,L                 
2955   0D97 C6 A0                              ADD     $A0                 
2956   0D99 6F                                 LD      L,A                 
2957   0D9A 26 16                              LD      H,T1600 >> 8        
2958   0D9C 0A                                 LD      A,(BC)              
2959   0D9D E6 F8                              AND     $F8                 
2960   0D9F B6                                 OR      (HL)                
2961   0DA0 02                                 LD      (BC),A              
2962   0DA1 03                                 INC     BC                  
2963   0DA2 03                                 INC     BC                  
2964   0DA3 03                                 INC     BC                  
2965   0DA4 23                                 INC     HL                  
2966   0DA5 7E                                 LD      A,(HL)              
2967   0DA6 23                                 INC     HL                  
2968   0DA7 0F                                 RRCA                        
2969   0DA8 DA BB 0D                           JP      C,L0DBB             ; 
2970   0DAB 0F                                 RRCA                        
2971   0DAC DA CC 0D                           JP      C,L0DCC             ; 
2972   0DAF 0A                                 LD      A,(BC)              
2973   0DB0 0F                                 RRCA                        
2974   0DB1 E6 03                              AND     $03                 
2975   0DB3 86                                 ADD     A,(HL)              
2976   0DB4 0B                                 DEC     BC                  
2977   0DB5 C3 D2 0D                           JP      L0DD2               ; 
2978   0DB8             
2979   0DBB                                    .ORG $0DBB
2980   0DBB             ;
2981   0DBB             L0DBB:
2982   0DBB 0A                                 LD      A,(BC)              
2983   0DBC 0F                                 RRCA                        
2984   0DBD E6 03                              AND     $03                 
2985   0DBF 86                                 ADD     A,(HL)              
2986   0DC0 67                                 LD      H,A                 
2987   0DC1 0B                                 DEC     BC                  
2988   0DC2 0A                                 LD      A,(BC)              
2989   0DC3 E6 04                              AND     $04                 
2990   0DC5 84                                 ADD     A,H                 
2991   0DC6 C3 D2 0D                           JP      L0DD2               ; 
2992   0DC9             
2993   0DCC                                    .ORG $0DCC
2994   0DCC             ;
2995   0DCC             L0DCC:
2996   0DCC 0B                                 DEC     BC                  
2997   0DCD 0A                                 LD      A,(BC)              
2998   0DCE 0F                                 RRCA                        
2999   0DCF E6 03                              AND     $03                 
3000   0DD1 86                                 ADD     A,(HL)              
3001   0DD2             L0DD2:
3002   0DD2 6F                                 LD      L,A                 
3003   0DD3 26 16                              LD      H,T1600 >> 8       ; get data from T1600
3004   0DD5 7E                                 LD      A,(HL)              
3005   0DD6 0B                                 DEC     BC                  
3006   0DD7 02                                 LD      (BC),A              
3007   0DD8 0B                                 DEC     BC                  
3008   0DD9 EB                                 EX      DE,HL               
3009   0DDA C9                                 RET                         
3010   0DDB             
3011   0DDE                                    .ORG $0DDE
3012   0DDE             ;
3013   0DDE             L0DDE:
3014   0DDE 1B                                 DEC     DE                  
3015   0DDF 1B                                 DEC     DE                  
3016   0DE0 3A 94 43                           LD      A,(M4394)           ; 
3017   0DE3 12                                 LD      (DE),A              
3018   0DE4 67                                 LD      H,A                 
3019   0DE5 13                                 INC     DE                  
3020   0DE6 3A 95 43                           LD      A,(M4395)           ; 
3021   0DE9 12                                 LD      (DE),A              
3022   0DEA 6F                                 LD      L,A                 
3023   0DEB 13                                 INC     DE                  
3024   0DEC 7E                                 LD      A,(HL)              
3025   0DED C9                                 RET                         
3026   0DEE             
3027   0DF0                                    .ORG $0DF0
3028   0DF0             ;*****************************************************************************
3029   0DF0             ;* Alien bullet to player ship, collission detection.
3030   0DF0             ;*****************************************************************************
3031   0DF0             L0DF0:
3032   0DF0 01 C4 43                           LD      BC,PlayerBulletState; 
3033   0DF3 21 E6 43                           LD      HL,AbovePlayerBulletMSB; MSB screen ram: One character above player bullet
3034   0DF6 CD 10 0E                           CALL    L0E10               ; 
3035   0DF9 01 C8 43                           LD      BC,AbovePlayerBulletState; 
3036   0DFC 21 EA 43                           LD      HL,M43EA            ; MSB screen ram: Left screen edge, one character above player ship
3037   0DFF C3 10 0E                           JP      L0E10               ; 
3038   0E02             
3039   0E10                                    .ORG $0E10
3040   0E10             ;
3041   0E10             L0E10:
3042   0E10 0A                                 LD      A,(BC)              ; ?
3043   0E11 E6 08                              AND     $08                 ; mask out 0000_1000
3044   0E13 C8                                 RET     Z                   ; if bit3 not set
3045   0E14 56                                 LD      D,(HL)              ; get MSB screen ram adress
3046   0E15 2C                                 INC     L                   ;
3047   0E16 5E                                 LD      E,(HL)              ; get LSB screen ram adress
3048   0E17 1A                                 LD      A,(DE)              ; get character
3049   0E18 FE C0                              CP      $C0                 ; bullets and alien ($50 - $BF)
3050   0E1A D0                                 RET     NC                  ;
3051   0E1B FE 60                              CP      $60                 ; alien ($60 - $BF)
3052   0E1D D8                                 RET     C                   ; if no character
3053   0E1E FE 68                              CP      $68                 ; alien
3054   0E20 D2 39 0E                           JP      NC,L0E39            ; 
3055   0E23 E6 07                              AND     $07                 ; mask out 0000_0111
3056   0E25 07                                 RLCA                        ; Multiply by 4 ..
3057   0E26 07                                 RLCA                        ; ..
3058   0E27 C6 40                              ADD     $40                 ;
3059   0E29 6F                                 LD      L,A                 ;
3060   0E2A 26 17                              LD      H,T1740 >> 8        ; T1740
3061   0E2C 03                                 INC     BC                  ;
3062   0E2D 03                                 INC     BC                  ;
3063   0E2E 0A                                 LD      A,(BC)              ;
3064   0E2F E6 07                              AND     $07                 ;
3065   0E31 BE                                 CP      (HL)                ;
3066   0E32 D0                                 RET     NC                  ;
3067   0E33 23                                 INC     HL                  ;
3068   0E34 BE                                 CP      (HL)                ;
3069   0E35 D8                                 RET     C                   ;
3070   0E36 C3 70 0E                           JP      L0E70               ; 
3071   0E39             
3072   0E39             ;
3073   0E39             L0E39:
3074   0E39 03                                 INC     BC                  
3075   0E3A 03                                 INC     BC                  
3076   0E3B 0A                                 LD      A,(BC)              
3077   0E3C 57                                 LD      D,A                 
3078   0E3D 03                                 INC     BC                  
3079   0E3E 0A                                 LD      A,(BC)              
3080   0E3F E6 F8                              AND     $F8                 
3081   0E41 5F                                 LD      E,A                 
3082   0E42 21 70 4B                           LD      HL,M4B70            ; 
3083   0E45             L0E45:
3084   0E45 7E                                 LD      A,(HL)              
3085   0E46 23                                 INC     HL                  
3086   0E47 23                                 INC     HL                  
3087   0E48 E6 08                              AND     $08                 
3088   0E4A C4 58 0E                           CALL    NZ,L0E58            ; 
3089   0E4D 23                                 INC     HL                  
3090   0E4E 23                                 INC     HL                  
3091   0E4F 3E B0                              LD      A,$B0               
3092   0E51 BD                                 CP      L                   
3093   0E52 C2 45 0E                           JP      NZ,L0E45            ; 
3094   0E55 C9                                 RET                         
3095   0E56             
3096   0E58                                    .ORG $0E58
3097   0E58             ;
3098   0E58             L0E58:
3099   0E58 7A                                 LD      A,D                 
3100   0E59 BE                                 CP      (HL)                
3101   0E5A D8                                 RET     C                   
3102   0E5B 7E                                 LD      A,(HL)              
3103   0E5C C6 08                              ADD     $08                 
3104   0E5E BA                                 CP      D                   
3105   0E5F D8                                 RET     C                   
3106   0E60 23                                 INC     HL                  
3107   0E61 7E                                 LD      A,(HL)              
3108   0E62 2B                                 DEC     HL                  
3109   0E63 C6 04                              ADD     $04                 
3110   0E65 BB                                 CP      E                   
3111   0E66 D8                                 RET     C                   
3112   0E67 D6 0C                              SUB     $0C                 
3113   0E69 BB                                 CP      E                   
3114   0E6A D0                                 RET     NC                  
3115   0E6B C3 00 0C                           JP      L0C00               ; 
3116   0E6E             
3117   0E70                                    .ORG $0E70
3118   0E70             ;
3119   0E70             L0E70:
3120   0E70 23                                 INC     HL                  
3121   0E71 0A                                 LD      A,(BC)              
3122   0E72 E6 F8                              AND     $F8                 
3123   0E74 86                                 ADD     A,(HL)              
3124   0E75 57                                 LD      D,A                 
3125   0E76 03                                 INC     BC                  
3126   0E77 0A                                 LD      A,(BC)              
3127   0E78 E6 F8                              AND     $F8                 
3128   0E7A 5F                                 LD      E,A                 
3129   0E7B 21 70 4B                           LD      HL,M4B70            ; 
3130   0E7E             L0E7E:
3131   0E7E 7E                                 LD      A,(HL)              
3132   0E7F 23                                 INC     HL                  
3133   0E80 23                                 INC     HL                  
3134   0E81 E6 08                              AND     $08                 
3135   0E83 C4 90 0E                           CALL    NZ,L0E90            ; 
3136   0E86 23                                 INC     HL                  
3137   0E87 23                                 INC     HL                  
3138   0E88 3E B0                              LD      A,$B0               
3139   0E8A BD                                 CP      L                   
3140   0E8B C2 7E 0E                           JP      NZ,L0E7E            ; 
3141   0E8E C9                                 RET                         
3142   0E8F             
3143   0E90                                    .ORG $0E90
3144   0E90             ;
3145   0E90             L0E90:
3146   0E90 7E                                 LD      A,(HL)              
3147   0E91 C6 02                              ADD     $02                 
3148   0E93 BA                                 CP      D                   
3149   0E94 D8                                 RET     C                   
3150   0E95 D6 05                              SUB     $05                 
3151   0E97 BA                                 CP      D                   
3152   0E98 D0                                 RET     NC                  
3153   0E99 23                                 INC     HL                  
3154   0E9A 7E                                 LD      A,(HL)              
3155   0E9B 2B                                 DEC     HL                  
3156   0E9C E6 F8                              AND     $F8                 
3157   0E9E BB                                 CP      E                   
3158   0E9F C0                                 RET     NZ                  
3159   0EA0 11 02 0C                           LD      DE,$0C02            ; E reg. set to: 'bonus explosion score 020'.
3160   0EA3 00                                 NOP                         
3161   0EA4             ;
3162   0EA4             L0EA4:
3163   0EA4 2B                                 DEC     HL                  
3164   0EA5 2B                                 DEC     HL                  
3165   0EA6 0B                                 DEC     BC                  
3166   0EA7 0B                                 DEC     BC                  
3167   0EA8 0B                                 DEC     BC                  
3168   0EA9 0A                                 LD      A,(BC)              
3169   0EAA E6 F7                              AND     $F7                 
3170   0EAC 02                                 LD      (BC),A              
3171   0EAD             L0EAD:
3172   0EAD 7E                                 LD      A,(HL)              
3173   0EAE E6 F7                              AND     $F7                 
3174   0EB0 77                                 LD      (HL),A              
3175   0EB1 7D                                 LD      A,L                 
3176   0EB2 C6 42                              ADD     $42                 
3177   0EB4 6F                                 LD      L,A                 
3178   0EB5 46                                 LD      B,(HL)              
3179   0EB6 23                                 INC     HL                  
3180   0EB7 4E                                 LD      C,(HL)              
3181   0EB8 21 78 43                           LD      HL,M4378            ; 
3182   0EBB 7A                                 LD      A,D                 
3183   0EBC FE 10                              CP      $10                 
3184   0EBE CA C3 0E                           JP      Z,L0EC3             ; 
3185   0EC1 2E 70                              LD      L,$70               
3186   0EC3             L0EC3:
3187   0EC3 7E                                 LD      A,(HL)              
3188   0EC4 A7                                 AND     A                   ; updates the zero flag
3189   0EC5 CA D5 0E                           JP      Z,L0ED5             ; 
3190   0EC8 2C                                 INC     L                   
3191   0EC9 2C                                 INC     L                   
3192   0ECA 2C                                 INC     L                   
3193   0ECB 2C                                 INC     L                   
3194   0ECC 7E                                 LD      A,(HL)              
3195   0ECD A7                                 AND     A                   ; updates the zero flag
3196   0ECE CA D5 0E                           JP      Z,L0ED5             ; 
3197   0ED1 2C                                 INC     L                   
3198   0ED2 2C                                 INC     L                   
3199   0ED3 2C                                 INC     L                   
3200   0ED4 2C                                 INC     L                   
3201   0ED5             L0ED5:
3202   0ED5 72                                 LD      (HL),D              
3203   0ED6 2C                                 INC     L                   
3204   0ED7 73                                 LD      (HL),E              ; set $4379 (bonus explosion score)
3205   0ED8 2C                                 INC     L                   
3206   0ED9 70                                 LD      (HL),B              
3207   0EDA 2C                                 INC     L                   
3208   0EDB 71                                 LD      (HL),C              
3209   0EDC 2E 64                              LD      L,$64               
3210   0EDE 36 FF                              LD      (HL),$FF            
3211   0EE0 2E BA                              LD      L,$BA               
3212   0EE2 35                                 DEC     (HL)                ; decrement AliensLeft
3213   0EE3 E1                                 POP     HL                  
3214   0EE4 E1                                 POP     HL                  
3215   0EE5 E9                                 JP      (HL)                
3216   0EE6             
3217   0F00                                    .ORG $0F00
3218   0F00             ;*****************************************************************************
3219   0F00             ;* 'Alien with player' collision check.
3220   0F00             ;* MAME cheat code "Invisibility for aliens": Set $0F00 to $C9 (RET)
3221   0F00             ;*****************************************************************************
3222   0F00             L0F00:
3223   0F00 21 A6 43                           LD      HL,ShieldCount      ; 
3224   0F03 7E                                 LD      A,(HL)              ;
3225   0F04 FE C0                              CP      $C0                 ;
3226   0F06 D2 74 0F                           JP      NC,L0F74            ; 
3227   0F09 2E E2                              LD      L,$E2               ;
3228   0F0B 56                                 LD      D,(HL)              ; get $43E2 PlayerShipMSB
3229   0F0C 2C                                 INC     L                   ;
3230   0F0D 5E                                 LD      E,(HL)              ; get $43E3 PlayerShipLSB
3231   0F0E 01 02 02                           LD      BC,$0202            
3232   0F11 CD 56 0F                           CALL    L0F56               ; 'alien with player' collision check
3233   0F14 C8                                 RET     Z                   ; if no collision
3234   0F15 00                                 NOP                         
3235   0F16 00                                 NOP                         
3236   0F17 21 9E 43                           LD      HL,M439E            ; Mapped player ship position, left part: ($09 to $C0)
3237   0F1A 7E                                 LD      A,(HL)              
3238   0F1B D6 06                              SUB     $06                 
3239   0F1D 47                                 LD      B,A                 
3240   0F1E 2C                                 INC     L                   
3241   0F1F 4E                                 LD      C,(HL)              
3242   0F20 21 70 4B                           LD      HL,M4B70            ; 
3243   0F23             L0F23:
3244   0F23 7E                                 LD      A,(HL)              
3245   0F24 2C                                 INC     L                   
3246   0F25 2C                                 INC     L                   
3247   0F26 E6 08                              AND     $08                 
3248   0F28 C4 38 0F                           CALL    NZ,L0F38            ; 
3249   0F2B 2C                                 INC     L                   
3250   0F2C 2C                                 INC     L                   
3251   0F2D 3E B0                              LD      A,$B0               
3252   0F2F BD                                 CP      L                   
3253   0F30 C2 23 0F                           JP      NZ,L0F23            ; 
3254   0F33 C9                                 RET                         
3255   0F34             
3256   0F38                                    .ORG $0F38
3257   0F38             ;
3258   0F38             L0F38:
3259   0F38 2C                                 INC     L                   
3260   0F39 7E                                 LD      A,(HL)              
3261   0F3A 2D                                 DEC     L                   
3262   0F3B FE D2                              CP      $D2                 
3263   0F3D D8                                 RET     C                   
3264   0F3E FE E7                              CP      $E7                 
3265   0F40 D0                                 RET     NC                  
3266   0F41 7E                                 LD      A,(HL)              
3267   0F42 B9                                 CP      C                   
3268   0F43 D0                                 RET     NC                  
3269   0F44 B8                                 CP      B                   
3270   0F45 D8                                 RET     C                   
3271   0F46 CD C4 0C                           CALL    L0CC4               ; 
3272   0F49 11 04 0D                           LD      DE,$0D04            
3273   0F4C 2B                                 DEC     HL                  
3274   0F4D 2B                                 DEC     HL                  
3275   0F4E C3 AD 0E                           JP      L0EAD               ; 
3276   0F51             
3277   0F56                                    .ORG $0F56
3278   0F56             ; 'alien with player' collision check.
3279   0F56             ; All parts of the player ship object are checked for a collision with aliens.
3280   0F56             L0F56:
3281   0F56 C5                                 PUSH    BC                  ;
3282   0F57 D5                                 PUSH    DE                  ;
3283   0F58             L0F58:
3284   0F58 1A                                 LD      A,(DE)              ; get upper left character of player ship
3285   0F59 FE 60                              CP      $60                 ; alien characters ($60 to $BF)
3286   0F5B DA 63 0F                           JP      C,L0F63             ; if no collision on left side
3287   0F5E FE C0                              CP      $C0                 ;
3288   0F60 DA F4 0C                           JP      C,L0CF4             ; if collision on left or right side
3289   0F63             L0F63:
3290   0F63 13                                 INC     DE                  ; get upper right character of player ship
3291   0F64 05                                 DEC     B                   ;
3292   0F65 C2 58 0F                           JP      NZ,L0F58            ; 
3293   0F68 D1                                 POP     DE                  ;
3294   0F69 C1                                 POP     BC                  ;
3295   0F6A CD 17 02                           CALL    RightOneColumn      ; for lower part of player ship
3296   0F6D 0D                                 DEC     C                   ;
3297   0F6E C2 56 0F                           JP      NZ,L0F56            ; 
3298   0F71 C9                                 RET                         ;
3299   0F72             
3300   0F74                                    .ORG $0F74
3301   0F74             ;
3302   0F74             L0F74:
3303   0F74 2E E2                              LD      L,$E2               
3304   0F76 56                                 LD      D,(HL)              
3305   0F77 2C                                 INC     L                   
3306   0F78 5E                                 LD      E,(HL)              
3307   0F79 CD 17 02                           CALL    RightOneColumn      ; 
3308   0F7C 1B                                 DEC     DE                  
3309   0F7D 01 04 04                           LD      BC,$0404            
3310   0F80 CD 56 0F                           CALL    L0F56               ; 
3311   0F83 C8                                 RET     Z                   
3312   0F84 00                                 NOP                         
3313   0F85 00                                 NOP                         
3314   0F86 3A C2 43                           LD      A,(PlayerShipX)     ; 
3315   0F89 D6 0E                              SUB     $0E                 
3316   0F8B 47                                 LD      B,A                 
3317   0F8C C6 2D                              ADD     $2D                 
3318   0F8E 4F                                 LD      C,A                 
3319   0F8F 21 70 4B                           LD      HL,M4B70            ; 
3320   0F92             L0F92:
3321   0F92 7E                                 LD      A,(HL)              
3322   0F93 2C                                 INC     L                   
3323   0F94 2C                                 INC     L                   
3324   0F95 E6 08                              AND     $08                 
3325   0F97 C4 A6 0F                           CALL    NZ,L0FA6            ; 
3326   0F9A 2C                                 INC     L                   
3327   0F9B 2C                                 INC     L                   
3328   0F9C 3E B0                              LD      A,$B0               
3329   0F9E BD                                 CP      L                   
3330   0F9F C2 92 0F                           JP      NZ,L0F92            ; 
3331   0FA2 C9                                 RET                         
3332   0FA3             
3333   0FA6                                    .ORG $0FA6
3334   0FA6             ;
3335   0FA6             L0FA6:
3336   0FA6 2C                                 INC     L                   
3337   0FA7 7E                                 LD      A,(HL)              
3338   0FA8 2D                                 DEC     L                   
3339   0FA9 FE CA                              CP      $CA                 
3340   0FAB D8                                 RET     C                   
3341   0FAC FE EF                              CP      $EF                 
3342   0FAE D0                                 RET     NC                  
3343   0FAF 7E                                 LD      A,(HL)              
3344   0FB0 B9                                 CP      C                   
3345   0FB1 D0                                 RET     NC                  
3346   0FB2 B8                                 CP      B                   
3347   0FB3 D8                                 RET     C                   
3348   0FB4 11 02 0D                           LD      DE,$0D02            
3349   0FB7 2B                                 DEC     HL                  
3350   0FB8 2B                                 DEC     HL                  
3351   0FB9 C3 AD 0E                           JP      L0EAD               ; 
3352   0FBC             
3353   0FC0                                    .ORG $0FC0
3354   0FC0             ;*****************************************************************************
3355   0FC0             ;* Handle animations for killed aliens
3356   0FC0             ;*****************************************************************************
3357   0FC0             L0FC0:
3358   0FC0 21 70 43                           LD      HL,M4370            ; 
3359   0FC3 CD D8 0F                           CALL    L0FD8               ; 
3360   0FC6 21 74 43                           LD      HL,M4374            ; 
3361   0FC9 CD D8 0F                           CALL    L0FD8               ; 
3362   0FCC 21 78 43                           LD      HL,M4378            ; 
3363   0FCF CD 58 37                           CALL    L3758               ; 
3364   0FD2 21 7C 43                           LD      HL,M437C            ; 
3365   0FD5 C3 58 37                           JP      L3758               ; 
3366   0FD8             ;
3367   0FD8             L0FD8:
3368   0FD8 7E                                 LD      A,(HL)              
3369   0FD9 A7                                 AND     A                   ; updates the zero flag
3370   0FDA C8                                 RET     Z                   
3371   0FDB 46                                 LD      B,(HL)              
3372   0FDC 35                                 DEC     (HL)                
3373   0FDD 2C                                 INC     L                   
3374   0FDE 2C                                 INC     L                   
3375   0FDF 56                                 LD      D,(HL)              
3376   0FE0 2C                                 INC     L                   
3377   0FE1 5E                                 LD      E,(HL)              
3378   0FE2 00                                 NOP                         
3379   0FE3 CD 10 02                           CALL    LeftOneColumn       ; 
3380   0FE6 78                                 LD      A,B                 
3381   0FE7 E6 0E                              AND     $0E                 
3382   0FE9 0F                                 RRCA                        
3383   0FEA C6 B0                              ADD     $B0                 
3384   0FEC 6F                                 LD      L,A                 
3385   0FED 26 17                              LD      H,$17               
3386   0FEF 6E                                 LD      L,(HL)              
3387   0FF0 EB                                 EX      DE,HL               
3388   0FF1 01 DF FF                           LD      BC,$FFDF            ; Screen offset constant -33 right one column (-1), up one row (-32)
3389   0FF4 C3 40 35                           JP      Draw3x2             ; 
3390   0FF7             
3391   1000                                    .ORG $1000
3392   1000             ;?
3393   1000             T1000:
3394   1000 01 01 01 01                        .DB $01, $01, $01, $01, $02, $02, $02, $02
3394   1004 02 02 02 02 
3395   1008 02 02 02 02                        .DB $02, $02, $02, $02, $01, $01, $01, $01
3395   100C 01 01 01 01 
3396   1010 00                                 .DB $00
3397   1011 FF FF FF FF                        .DB $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF
3397   1015 FF FF FF FF 
3398   1019 FF FF FF FF                        .DB $FF, $FF, $FF, $FF, $FF, $FF, $FF
3398   101D FF FF FF 
3399   1020             ; Closed loops pattern table for aliens
3400   1020             ; Pattern 1
3401   1020             T1020:
3402   1020 10 11 12 13                        .DB $10, $11, $12, $13, $10, $1D, $0D, $0E
3402   1024 10 1D 0D 0E 
3403   1028 0B 0C 0D 0E                        .DB $0B, $0C, $0D, $0E, $0B, $0C, $06, $06
3403   102C 0B 0C 06 06 
3404   1030 1E 03 1F 05                        .DB $1E, $03, $1F, $05, $1C, $04, $1D, $06
3404   1034 1C 04 1D 06 
3405   1038 1E 03 03 03                        .DB $1E, $03, $03, $03, $03, $03, $1F, $1C
3405   103C 03 03 1F 1C 
3406   1040 1D 1E 03 03                        .DB $1D, $1E, $03, $03, $03, $03, $03, $1F
3406   1044 03 03 03 1F 
3407   1048 05 1C 04 1D                        .DB $05, $1C, $04, $1D, $06, $1E, $03, $1F
3407   104C 06 1E 03 1F 
3408   1050 05 05 05 05                        .DB $05, $05, $05, $05, $05, $05, $05, $05
3408   1054 05 05 05 05 
3409   1058 05 05 1C 04                        .DB $05, $05, $1C, $04, $04, $11, $12, $13
3409   105C 04 11 12 13 
3410   1060 00 FF FF FF                        .DB $00, $FF, $FF, $FF
3411   1064             ; Pattern 2
3412   1064             T1064:
3413   1064 0B 1E 19 06                        .DB $0B, $1E, $19, $06, $06, $06, $06, $06
3413   1068 06 06 06 06 
3414   106C 06 1E 1F 1C                        .DB $06, $1E, $1F, $1C, $1D, $06, $06, $06
3414   1070 1D 06 06 06 
3415   1074 06 06 1E 03                        .DB $06, $06, $1E, $03, $1F, $05, $1C, $04
3415   1078 1F 05 1C 04 
3416   107C 1D 06 06 1A                        .DB $1D, $06, $06, $1A, $04, $1B, $05, $18
3416   1080 04 1B 05 18 
3417   1084 19 06 1A 04                        .DB $19, $06, $1A, $04, $1B, $05, $05, $1C
3417   1088 1B 05 05 1C 
3418   108C 04 1D 06 1E                        .DB $04, $1D, $06, $1E, $03, $1F, $05, $05
3418   1090 03 1F 05 05 
3419   1094 05 05 05 1C                        .DB $05, $05, $05, $1C, $1D, $1E, $1F, $05
3419   1098 1D 1E 1F 05 
3420   109C 05 05 05 05                        .DB $05, $05, $05, $05, $05, $05, $18, $1F
3420   10A0 05 05 18 1F 
3421   10A4 00 FF FF FF                        .DB $00, $FF, $FF, $FF
3422   10A8             ; Pattern 3
3423   10A8             T10A8:
3424   10A8 10 04 04 1D                        .DB $10, $04, $04, $1D, $0D, $0E, $0B, $0C
3424   10AC 0D 0E 0B 0C 
3425   10B0 0D 0E 01 01                        .DB $0D, $0E, $01, $01, $01, $01, $01, $01
3425   10B4 01 01 01 01 
3426   10B8 01 01 05 05                        .DB $01, $01, $05, $05, $05, $05, $05, $1C
3426   10BC 05 05 05 1C 
3427   10C0 04 04 1D 06                        .DB $04, $04, $1D, $06, $06, $1E, $03, $03
3427   10C4 06 1E 03 03 
3428   10C8 1F 05 05 05                        .DB $1F, $05, $05, $05, $1C, $11, $12, $13
3428   10CC 1C 11 12 13 
3429   10D0 00 FF FF FF                        .DB $00, $FF, $FF, $FF
3430   10D4             ; Pattern 4
3431   10D4             T10D4:
3432   10D4 0B 0C 0D 0E                        .DB $0B, $0C, $0D, $0E, $0B, $0C, $0D, $0E
3432   10D8 0B 0C 0D 0E 
3433   10DC 0B 0C 1A 1B                        .DB $0B, $0C, $1A, $1B, $05, $18, $19, $06
3433   10E0 05 18 19 06 
3434   10E4 0D 0E 01 01                        .DB $0D, $0E, $01, $01, $01, $01, $01, $01
3434   10E8 01 01 01 01 
3435   10EC 01 01 05 05                        .DB $01, $01, $05, $05, $1C, $1B, $05, $05
3435   10F0 1C 1B 05 05 
3436   10F4 1C 04 1B 05                        .DB $1C, $04, $1B, $05, $05, $1C, $04, $1B
3436   10F8 05 1C 04 1B 
3437   10FC 00 FF FF FF                        .DB $00, $FF, $FF, $FF
3438   1100             ; Pattern 5
3439   1100             T1100:
3440   1100 0B 0C 0D 0E                        .DB $0B, $0C, $0D, $0E, $0B, $0C, $09, $09
3440   1104 0B 0C 09 09 
3441   1108 09 09 0A 0A                        .DB $09, $09, $0A, $0A, $09, $09, $0A, $09
3441   110C 09 09 0A 09 
3442   1110 16 17 14 07                        .DB $16, $17, $14, $07, $07, $07, $1C, $04
3442   1114 07 07 1C 04 
3443   1118 1D 06 1E 03                        .DB $1D, $06, $1E, $03, $1F, $05, $1C, $08
3443   111C 1F 05 1C 08 
3444   1120 08 08 08 08                        .DB $08, $08, $08, $08, $08, $08, $08, $05
3444   1124 08 08 08 05 
3445   1128 05 05 05 00                        .DB $05, $05, $05, $00, $FF, $FF, $FF, $FF
3445   112C FF FF FF FF 
3446   1130             ; Pattern 6
3447   1130             T1130:
3448   1130 0B 0C 0D 0E                        .DB $0B, $0C, $0D, $0E, $0B, $0C, $0A, $0A
3448   1134 0B 0C 0A 0A 
3449   1138 0A 0A 09 09                        .DB $0A, $0A, $09, $09, $0A, $0A, $09, $0A
3449   113C 0A 0A 09 0A 
3450   1140 12 13 10 08                        .DB $12, $13, $10, $08, $08, $08, $18, $07
3450   1144 08 08 18 07 
3451   1148 07 07 07 05                        .DB $07, $07, $07, $05, $1C, $04, $1D, $06
3451   114C 1C 04 1D 06 
3452   1150 1E 03 1F 07                        .DB $1E, $03, $1F, $07, $07, $07, $07, $05
3452   1154 07 07 07 05 
3453   1158 05 05 05 00                        .DB $05, $05, $05, $00, $FF, $FF, $FF, $FF
3453   115C FF FF FF FF 
3454   1160             ; Pattern 7
3455   1160             T1160:
3456   1160 1C 04 04 04                        .DB $1C, $04, $04, $04, $1D, $06, $0D, $0E
3456   1164 1D 06 0D 0E 
3457   1168 0B 0C 06 06                        .DB $0B, $0C, $06, $06, $1E, $15, $16, $17
3457   116C 1E 15 16 17 
3458   1170 14 19 06 1A                        .DB $14, $19, $06, $1A, $04, $1D, $06, $1E
3458   1174 04 1D 06 1E 
3459   1178 03 19 06 1A                        .DB $03, $19, $06, $1A, $04, $1D, $1E, $03
3459   117C 04 1D 1E 03 
3460   1180 1F 1C 04 1B                        .DB $1F, $1C, $04, $1B, $05, $18, $03, $1F
3460   1184 05 18 03 1F 
3461   1188 05 1C 04 1B                        .DB $05, $1C, $04, $1B, $05, $18, $03, $15
3461   118C 05 18 03 15 
3462   1190 16 17 14 1F                        .DB $16, $17, $14, $1F, $05, $05, $05, $05
3462   1194 05 05 05 05 
3463   1198 05 05 05 1C                        .DB $05, $05, $05, $1C, $04, $1D, $1A, $1B
3463   119C 04 1D 1A 1B 
3464   11A0 00 FF FF FF                        .DB $00, $FF, $FF, $FF
3465   11A4             ; Pattern 8
3466   11A4             T11A4:
3467   11A4 0B 0C 0D 0E                        .DB $0B, $0C, $0D, $0E, $0B, $0C, $0D, $0E
3467   11A8 0B 0C 0D 0E 
3468   11AC 0B 0C 0D 0E                        .DB $0B, $0C, $0D, $0E, $02, $02, $02, $02
3468   11B0 02 02 02 02 
3469   11B4 02 02 02 02                        .DB $02, $02, $02, $02, $05, $05, $18, $03
3469   11B8 05 05 18 03 
3470   11BC 19 1A 04 1B                        .DB $19, $1A, $04, $1B, $05, $18, $03, $1F
3470   11C0 05 18 03 1F 
3471   11C4 05 18 03 1F                        .DB $05, $18, $03, $1F, $05, $05, $18, $1F
3471   11C8 05 05 18 1F 
3472   11CC 00 FF FF FF                        .DB $00, $FF, $FF, $FF
3473   11D0             ; Pattern 9
3474   11D0             T11D0:
3475   11D0 0B 0C 0D 0E                        .DB $0B, $0C, $0D, $0E, $0B, $0C, $06, $06
3475   11D4 0B 0C 06 06 
3476   11D8 09 09 09 0A                        .DB $09, $09, $09, $0A, $09, $09, $0A, $09
3476   11DC 09 09 0A 09 
3477   11E0 09 09 06 1A                        .DB $09, $09, $06, $1A, $04, $11, $12, $13
3477   11E4 04 11 12 13 
3478   11E8 10 08 08 08                        .DB $10, $08, $08, $08, $07, $07, $07, $08
3478   11EC 07 07 07 08 
3479   11F0 08 08 05 05                        .DB $08, $08, $05, $05, $05, $05, $05, $05
3479   11F4 05 05 05 05 
3480   11F8 05 05 05 05                        .DB $05, $05, $05, $05, $05, $00, $FF, $FF
3480   11FC 05 00 FF FF 
3481   1200             ; Pattern 10
3482   1200             T1200:
3483   1200 1C 11 12 13                        .DB $1C, $11, $12, $13, $10, $04, $1D, $0D
3483   1204 10 04 1D 0D 
3484   1208 0E 0B 0C 0D                        .DB $0E, $0B, $0C, $0D, $0E, $0B, $0C, $1E
3484   120C 0E 0B 0C 1E 
3485   1210 1F 05 18 19                        .DB $1F, $05, $18, $19, $0D, $0E, $0B, $0C
3485   1214 0D 0E 0B 0C 
3486   1218 1E 1F 05 05                        .DB $1E, $1F, $05, $05, $05, $05, $05, $18
3486   121C 05 05 05 18 
3487   1220 19 0D 0E 0B                        .DB $19, $0D, $0E, $0B, $0C, $06, $1E, $1F
3487   1224 0C 06 1E 1F 
3488   1228 05 05 05 05                        .DB $05, $05, $05, $05, $18, $19, $06, $1E
3488   122C 18 19 06 1E 
3489   1230 1F 05 05 05                        .DB $1F, $05, $05, $05, $05, $05, $05, $05
3489   1234 05 05 05 05 
3490   1238 05 1C 04 04                        .DB $05, $1C, $04, $04, $1D, $1A, $04, $1B
3490   123C 1D 1A 04 1B 
3491   1240 00 FF FF FF                        .DB $00, $FF, $FF, $FF
3492   1244             ; Pattern 11
3493   1244             T1244:
3494   1244 18 03 03 19                        .DB $18, $03, $03, $19, $06, $06, $06, $06
3494   1248 06 06 06 06 
3495   124C 06 06 06 06                        .DB $06, $06, $06, $06, $06, $06, $06, $06
3495   1250 06 06 06 06 
3496   1254 1A 04 1B 05                        .DB $1A, $04, $1B, $05, $1C, $04, $1D, $06
3496   1258 1C 04 1D 06 
3497   125C 1E 03 03 19                        .DB $1E, $03, $03, $19, $06, $1A, $04, $04
3497   1260 06 1A 04 04 
3498   1264 04 1B 05 18                        .DB $04, $1B, $05, $18, $03, $03, $1F, $05
3498   1268 03 03 1F 05 
3499   126C 1C 04 1D 06                        .DB $1C, $04, $1D, $06, $1A, $04, $1B, $05
3499   1270 1A 04 1B 05 
3500   1274 05 05 05 05                        .DB $05, $05, $05, $05, $05, $05, $05, $05
3500   1278 05 05 05 05 
3501   127C 05 05 05 18                        .DB $05, $05, $05, $18, $03, $19, $1E, $1F
3501   1280 03 19 1E 1F 
3502   1284 00 FF FF FF                        .DB $00, $FF, $FF, $FF
3503   1288             ; Pattern 12
3504   1288             T1288:
3505   1288 0B 0C 1A 1D                        .DB $0B, $0C, $1A, $1D, $1E, $03, $19, $06
3505   128C 1E 03 19 06 
3506   1290 1A 04 04 1D                        .DB $1A, $04, $04, $1D, $06, $1E, $03, $03
3506   1294 06 1E 03 03 
3507   1298 03 19 06 06                        .DB $03, $19, $06, $06, $1A, $04, $04, $04
3507   129C 1A 04 04 04 
3508   12A0 04 1D 06 06                        .DB $04, $1D, $06, $06, $1E, $03, $03, $03
3508   12A4 1E 03 03 03 
3509   12A8 03 03 03 1F                        .DB $03, $03, $03, $1F, $05, $05, $1C, $04
3509   12AC 05 05 1C 04 
3510   12B0 04 04 04 1B                        .DB $04, $04, $04, $1B, $05, $05, $18, $03
3510   12B4 05 05 18 03 
3511   12B8 03 03 1F 05                        .DB $03, $03, $1F, $05, $1C, $04, $04, $1B
3511   12BC 1C 04 04 1B 
3512   12C0 05 18 03 1F                        .DB $05, $18, $03, $1F, $1C, $1B, $05, $05
3512   12C4 1C 1B 05 05 
3513   12C8 00 FF                              .DB $00, $FF,
3514   12CA             ; Pattern 13
3515   12CA             T12CA:
3516   12CA 18 03 19 06                        .DB $18, $03, $19, $06, $06, $06, $06, $06
3516   12CE 06 06 06 06 
3517   12D2 06 1A 1D 1E                        .DB $06, $1A, $1D, $1E, $19, $1A, $1D, $06
3517   12D6 19 1A 1D 06 
3518   12DA 1E 19 06 1E                        .DB $1E, $19, $06, $1E, $15, $16, $17, $14
3518   12DE 15 16 17 14 
3519   12E2 07 07 07 08                        .DB $07, $07, $07, $08, $08, $08, $08, $05
3519   12E6 08 08 08 05 
3520   12EA 05 18 03 03                        .DB $05, $18, $03, $03, $19, $06, $06, $1A
3520   12EE 19 06 06 1A 
3521   12F2 04 04 1B 08                        .DB $04, $04, $1B, $08, $08, $08, $08, $05
3521   12F6 08 08 08 05 
3522   12FA 05 05 05 18                        .DB $05, $05, $05, $18, $1F, $00
3522   12FE 1F 00 
3523   1300             ; Pattern 14
3524   1300             T1300:
3525   1300 0B 0C 0A 0A                        .DB $0B, $0C, $0A, $0A, $09, $09, $09, $0A
3525   1304 09 09 09 0A 
3526   1308 0A 09 09 09                        .DB $0A, $09, $09, $09, $0A, $09, $09, $16
3526   130C 0A 09 09 16 
3527   1310 17 14 07 07                        .DB $17, $14, $07, $07, $07, $08, $08, $08
3527   1314 07 08 08 08 
3528   1318 08 07 07 08                        .DB $08, $07, $07, $08, $08, $08, $08, $07
3528   131C 08 08 08 07 
3529   1320 08 11 12 13                        .DB $08, $11, $12, $13, $00, $FF, $FF, $FF
3529   1324 00 FF FF FF 
3530   1328             ; Pattern 15
3531   1328             T1328:
3532   1328 0B 0C 09 09                        .DB $0B, $0C, $09, $09, $0A, $09, $09, $0A
3532   132C 0A 09 09 0A 
3533   1330 0A 0A 0A 09                        .DB $0A, $0A, $0A, $09, $0A, $0A, $0A, $12
3533   1334 0A 0A 0A 12 
3534   1338 13 10 04 04                        .DB $13, $10, $04, $04, $04, $1B, $18, $03
3534   133C 04 1B 18 03 
3535   1340 03 07 07 08                        .DB $03, $07, $07, $08, $08, $07, $07, $08
3535   1344 08 07 07 08 
3536   1348 08 07 07 07                        .DB $08, $07, $07, $07, $07, $07, $00, $FF
3536   134C 07 07 00 FF 
3537   1350 FF FF FF FF                        .DB $FF, $FF, $FF, $FF
3538   1354             ; Pattern 16
3539   1354             T1354:
3540   1354 1C 11 12 13                        .DB $1C, $11, $12, $13, $10, $1D, $0D, $0E
3540   1358 10 1D 0D 0E 
3541   135C 0B 0C 09 0A                        .DB $0B, $0C, $09, $0A, $09, $09, $0A, $09
3541   1360 09 09 0A 09 
3542   1364 09 09 06 1A                        .DB $09, $09, $06, $1A, $04, $1B, $05, $18
3542   1368 04 1B 05 18 
3543   136C 03 19 09 09                        .DB $03, $19, $09, $09, $0D, $0E, $0B, $0C
3543   1370 0D 0E 0B 0C 
3544   1374 0D 0E 02 02                        .DB $0D, $0E, $02, $02, $02, $02, $02, $02
3544   1378 02 02 02 02 
3545   137C 02 02 02 02                        .DB $02, $02, $02, $02, $02, $02, $08, $07
3545   1380 02 02 08 07 
3546   1384 07 08 07 07                        .DB $07, $08, $07, $07, $08, $08, $07, $07
3546   1388 08 08 07 07 
3547   138C 07 07 07 05                        .DB $07, $07, $07, $05, $05, $05, $05, $05
3547   1390 05 05 05 05 
3548   1394 05 1C 11 12                        .DB $05, $1C, $11, $12, $13, $00, $FF, $FF
3548   1398 13 00 FF FF 
3549   139C             ; Pattern 17
3550   139C             T139C:
3551   139C 0B 0C 0D 0E                        .DB $0B, $0C, $0D, $0E, $0B, $0C, $0D, $0E
3551   13A0 0B 0C 0D 0E 
3552   13A4 0B 0C 1A 1D                        .DB $0B, $0C, $1A, $1D, $06, $1E, $19, $06
3552   13A8 06 1E 19 06 
3553   13AC 06 1A 04 1B                        .DB $06, $1A, $04, $1B, $1C, $04, $1D, $1A
3553   13B0 1C 04 1D 1A 
3554   13B4 04 1B 1C 04                        .DB $04, $1B, $1C, $04, $1D, $1A, $04, $1B
3554   13B8 1D 1A 04 1B 
3555   13BC 05 18 07 07                        .DB $05, $18, $07, $07, $07, $08, $08, $07
3555   13C0 07 08 08 07 
3556   13C4 07 07 07 08                        .DB $07, $07, $07, $08, $08, $07, $07, $07
3556   13C8 08 07 07 07 
3557   13CC 07 00 FF FF                        .DB $07, $00, $FF, $FF
3558   13D0             ; Pattern 18
3559   13D0             T13D0:
3560   13D0 14 03 19 0D                        .DB $14, $03, $19, $0D, $0E, $0B, $0C, $0A
3560   13D4 0E 0B 0C 0A 
3561   13D8 0A 0A 09 0A                        .DB $0A, $0A, $09, $0A, $0A, $0A, $09, $0A
3561   13DC 0A 0A 09 0A 
3562   13E0 0A 0A 06 1E                        .DB $0A, $0A, $06, $1E, $15, $16, $17, $14
3562   13E4 15 16 17 14 
3563   13E8 03 1F 05 05                        .DB $03, $1F, $05, $05, $08, $07, $07, $07
3563   13EC 08 07 07 07 
3564   13F0 08 07 07 07                        .DB $08, $07, $07, $07, $08, $08, $05, $05
3564   13F4 08 08 05 05 
3565   13F8 05 05 05 00                        .DB $05, $05, $05, $00, $FF, $FF, $FF, $FF
3565   13FC FF FF FF FF 
3566   1400             ; Player ship character block shapes table
3567   1400             ; used for fine bit shifting of the player
3568   1400             T1400:
3569   1400 30 40 31 41                        .DB $30, $40, $31, $41     ;position 1
3570   1404 32 42 33 43                        .DB $32, $42, $33, $43     ;position 2
3571   1408 34 44 35 45                        .DB $34, $44, $35, $45     ;position 3
3572   140C 36 46 37 47                        .DB $36, $46, $37, $47     ;position 4
3573   1410 38 48 39 49                        .DB $38, $48, $39, $49     ;position 5
3574   1414 3A 4A 3B 4B                        .DB $3A, $4A, $3B, $4B     ;position 6
3575   1418 3C 4C 3D 4D                        .DB $3C, $4C, $3D, $4D     ;position 7
3576   141C 3E 4E 3F 4F                        .DB $3E, $4E, $3F, $4F     ;position 8
3577   1420             
3578   1420             ; Alien character block shapes table ($00=SPACE)
3579   1420             T1420:
3580   1420 60 61                              .DB $60, $61           ;alien shape #1
3581   1422 62 63                              .DB $62, $63           ;#2
3582   1424 64 65                              .DB $64, $65           ;#3
3583   1426 66 67                              .DB $66, $67           ;#4
3584   1428 69 00                              .DB $69, $00           ;#6
3585   142A 69 00                              .DB $69, $00           ;#6
3586   142C 7A 7B                              .DB $7A, $7B           ;#28
3587   142E 7A 7B                              .DB $7A, $7B           ;#28
3588   1430 6B 00                              .DB $6B, $00           ;#8
3589   1432 6B 00                              .DB $6B, $00           ;#8
3590   1434 8C 8D                              .DB $8C, $8D           ;#29
3591   1436 8C 8D                              .DB $8C, $8D           ;#29
3592   1438 68 00                              .DB $68, $00           ;#5
3593   143A 68 00                              .DB $68, $00           ;#5
3594   143C 8A 9A                              .DB $8A, $9A           ;#30
3595   143E 8A 9A                              .DB $8A, $9A           ;#30
3596   1440 6A 00                              .DB $6A, $00           ;#7
3597   1442 6A 00                              .DB $6A, $00           ;#7
3598   1444 8B 9B                              .DB $8B, $9B           ;#31
3599   1446 8B 9B                              .DB $8B, $9B           ;#31
3600   1448 68 00                              .DB $68, $00           ;#5
3601   144A 6B 00                              .DB $6B, $00           ;#8
3602   144C 6A 00                              .DB $6A, $00           ;#7
3603   144E 69 00                              .DB $69, $00           ;#6
3604   1450 76 77                              .DB $76, $77           ;#18
3605   1452 74 75                              .DB $74, $75           ;#19
3606   1454 72 73                              .DB $72, $73           ;#16
3607   1456 70 71                              .DB $70, $71           ;#17
3608   1458 68 00                              .DB $68, $00           ;#5
3609   145A 86 96                              .DB $86, $96           ;#22
3610   145C 69 00                              .DB $69, $00           ;#6
3611   145E 87 97                              .DB $87, $97           ;#21
3612   1460 6A 00                              .DB $6A, $00           ;#7
3613   1462 88 98                              .DB $88, $98           ;#20
3614   1464 6B 00                              .DB $6B, $00           ;#8
3615   1466 89 99                              .DB $89, $99           ;#23
3616   1468 68 00                              .DB $68, $00           ;#5
3617   146A 00 00                              .DB $00, $00
3618   146C A2 B2 A3 B3                        .DB $A2, $B2, $A3, $B3 ;#26
3619   1470 69 00                              .DB $69, $00           ;#6
3620   1472 00 00                              .DB $00, $00
3621   1474 A4 B4 A5 B5                        .DB $A4, $B4, $A5, $B5 ;#25
3622   1478 6A 00                              .DB $6A, $00           ;#7
3623   147A 00 00                              .DB $00, $00
3624   147C A6 B6 A7 B7                        .DB $A6, $B6, $A7, $B7 ;#24
3625   1480 6B 00                              .DB $6B, $00           ;#8
3626   1482 00 00                              .DB $00, $00
3627   1484 A8 B8 A9 B9                        .DB $A8, $B8, $A9, $B9 ;#27
3628   1488 FF FF FF FF                        .DB $FF, $FF, $FF, $FF
3629   148C 8A 9A                              .DB $8A, $9A           ;#30
3630   148E 00 00                              .DB $00, $00
3631   1490 FF FF FF FF                        .DB $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF
3631   1494 FF FF FF FF 
3631   1498 FF FF FF FF 
3631   149C FF FF FF FF 
3632   14A0 8B 9B                              .DB $8B, $9B           ;#31
3633   14A2 00 00                              .DB $00, $00
3634   14A4 FF FF FF FF                        .DB $FF, $FF, $FF, $FF
3635   14A8 8E 9E 8F 9F                        .DB $8E, $9E, $8F, $9F ;#14
3636   14AC A0 B0 A1 B1                        .DB $A0, $B0, $A1, $B1 ;#15
3637   14B0 00 00 00 00                        .DB $00, $00, $00, $00
3638   14B4 FF FF FF FF                        .DB $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF
3638   14B8 FF FF FF FF 
3638   14BC FF FF FF FF 
3639   14C0 9C 00                              .DB $9C, $00           ;#32
3640   14C2 00 00                              .DB $00, $00
3641   14C4 84 94 85 95                        .DB $84, $94, $85, $95 ;#36
3642   14C8 82 92 83 93                        .DB $82, $92, $83, $93 ;#35
3643   14CC 80 90 81 91                        .DB $80, $90, $81, $91 ;#34
3644   14D0 9D 00 00 00                        .DB $9D, $00, $00, $00 ;#33
3645   14D4 AE BE AF BF                        .DB $AE, $BE, $AF, $BF ;#39
3646   14D8 AC BC AD 00                        .DB $AC, $BC, $AD, $00 ;#38
3647   14DC AA BA AB BB                        .DB $AA, $BA, $AB, $BB ;#37
3648   14E0             
3649   14E0             ;
3650   14E0             L14E0:
3651   14E0 47                                 LD      B,A                 ; save A
3652   14E1 3A 00 78                           LD      A,(DSW0)            ; 78xx DSW0
3653   14E4 E6 10                              AND     $10                 ; Coinage
3654   14E6 C8                                 RET     Z                   ; return if no coins entered
3655   14E7 EB                                 EX      DE,HL               ;
3656   14E8 7A                                 LD      A,D                 ;
3657   14E9 FE 18                              CP      $18                 ;
3658   14EB C0                                 RET     NZ                  ;
3659   14EC 7B                                 LD      A,E                 ;
3660   14ED FE 95                              CP      $95                 ;
3661   14EF 36 22                              LD      (HL),$22            ;
3662   14F1 C8                                 RET     Z                   ;
3663   14F2 FE 9A                              CP      $9A                 ;
3664   14F4 36 13                              LD      (HL),$13            ;
3665   14F6 C8                                 RET     Z                   ;
3666   14F7 FE B5                              CP      $B5                 ;
3667   14F9 36 24                              LD      (HL),$24            ;
3668   14FB C8                                 RET     Z                   ;
3669   14FC 70                                 LD      (HL),B              ;
3670   14FD C9                                 RET                         ;
3671   14FE             
3672   1500                                    .ORG $1500
3673   1500             ; Copied inside $4B70-$4BAF.
3674   1500             ; Init values for the alien control states A and B.
3675   1500             T1500:
3676   1500 08 6C 09 60                        .DB $08, $6C, $09, $60
3677   1504 08 6C 09 60                        .DB $08, $6C, $09, $60
3678   1508 08 6C 09 60                        .DB $08, $6C, $09, $60
3679   150C 08 6C 09 60                        .DB $08, $6C, $09, $60
3680   1510 08 6C 09 60                        .DB $08, $6C, $09, $60
3681   1514 08 6C 09 60                        .DB $08, $6C, $09, $60
3682   1518 08 6C 09 60                        .DB $08, $6C, $09, $60
3683   151C 09 60 09 60                        .DB $09, $60, $09, $60
3684   1520             ; Init values for 16 aliens.
3685   1520             ; Pointer to alien movement pattern table.
3686   1520             T1520:
3687   1520                                    .MSFIRST
3688   1520 10 00                              .DW T1000
3689   1522 10 00                              .DW T1000
3690   1524 10 00                              .DW T1000
3691   1526 10 00                              .DW T1000
3692   1528 10 00                              .DW T1000
3693   152A 10 00                              .DW T1000
3694   152C 10 00                              .DW T1000
3695   152E 10 00                              .DW T1000
3696   1530 10 00                              .DW T1000
3697   1532 10 00                              .DW T1000
3698   1534 10 00                              .DW T1000
3699   1536 10 00                              .DW T1000
3700   1538 10 00                              .DW T1000
3701   153A 10 00                              .DW T1000
3702   153C 10 00                              .DW T1000
3703   153E 10 00                              .DW T1000
3704   1540             ; Level 2 initial screen coordinates for the aliens.
3705   1540             ; First byte is X, 2nd byte is Y. There are 16 aliens
3706   1540             ; on the level (numbered here 0 - F). The starts are shown
3707   1540             ; on the screen below.
3708   1540             ;
3709   1540             ;      0 0 1 1 2 2 3 3 4 4 5 5 6 6 7 7 8 8 9 9 A A B B C C
3710   1540             ;      0 8 0 8 0 8 0 8 0 8 0 8 0 8 0 8 0 8 0 8 0 8 0 8 0 8
3711   1540             ;      | | | | | | | | | | | | | | | | | | | | | | | | | |
3712   1540             ; 00 - . S C O R E 1 . . H I - S C O R E . . S C O R E 2 .
3713   1540             ; 08 - . 0 0 0 0 0 0 . . . 0 0 0 0 0 0 . . . 0 0 0 0 0 0 .
3714   1540             ; 10 - . . . * 1 . . . . . C O I N 0 0 . . . . . * 0 . . .
3715   1540             ; 18 - . . . . . . . . . . . . . . . . . . . . . . . . . .
3716   1540             ; 20 - . . . . . . . . . . 0 . . . 1 . . . . . . . . . . .
3717   1540             ; 28 - . . . . . . . . . . . . 2 . . . . . . . . . . . . .
3718   1540             ; 30 - . . . . . . 8 . . . . . . . . . . . 9 . . . . . . .
3719   1540             ; 38 - . . . . A . . . 6 . . . 3 . . . 7 . . . B . . . . .
3720   1540             ; 40 - . . . . . . . . . . 4 . . . 5 . . . . . . . . . . .
3721   1540             ; 48 - . . . C . . . . . . . . E . . . . . . . . D . . . .
3722   1540             ; 50 - . . . . . . . . . . . . . . . . . . . . . . . . . .
3723   1540             ; 58 - . . . . . . . . . . . . F . . . . . . . . . . . . .
3724   1540             ;
3725   1540             T1540:
3726   1540 50 20                              .DB $50, $20     ; 0 : x,y = 50,20 (decimal 80,32)
3727   1542 70 20                              .DB $70, $20     ; 1
3728   1544 60 28                              .DB $60, $28     ; 2
3729   1546 60 38                              .DB $60, $38     ; 3
3730   1548 50 40                              .DB $50, $40     ; 4
3731   154A 70 40                              .DB $70, $40     ; 5
3732   154C 40 38                              .DB $40, $38     ; 6
3733   154E 80 38                              .DB $80, $38     ; 7
3734   1550 30 30                              .DB $30, $30     ; 8
3735   1552 90 30                              .DB $90, $30     ; 9
3736   1554 20 38                              .DB $20, $38     ; A
3737   1556 A0 38                              .DB $A0, $38     ; B
3738   1558 18 48                              .DB $18, $48     ; C
3739   155A A8 48                              .DB $A8, $48     ; D
3740   155C 60 48                              .DB $60, $48     ; E
3741   155E 60 58                              .DB $60, $58     ; F
3742   1560             
3743   1560             ; Level 1 initial screen coordinates for the aliens.
3744   1560             ; Same structure as 1540 above.
3745   1560             ;
3746   1560             ;      0 0 1 1 2 2 3 3 4 4 5 5 6 6 7 7 8 8 9 9 A A B B C C
3747   1560             ;      0 8 0 8 0 8 0 8 0 8 0 8 0 8 0 8 0 8 0 8 0 8 0 8 0 8
3748   1560             ;      | | | | | | | | | | | | | | | | | | | | | | | | | |
3749   1560             ; 00 - . S C O R E 1 . . H I - S C O R E . . S C O R E 2 .
3750   1560             ; 08 - . 0 0 0 0 0 0 . . . 0 0 0 0 0 0 . . . 0 0 0 0 0 0 .
3751   1560             ; 10 - . . . * 1 . . . . . C O I N 0 0 . . . . . * 0 . . .
3752   1560             ; 18 - . . . . . . . . . . . . . . . . . . . . . . . . . .
3753   1560             ; 20 - . . . . . . . E . . . . . . . . . F . . . . . . . .
3754   1560             ; 28 - . . . . . C . . . . . . . . . . . . . D . . . . . .
3755   1560             ; 30 - . . . A . . . . . . . . . . . . . . . . . B . . . .
3756   1560             ; 38 - . . . . . . . . . . . . . . . . . . . . . . . . . .
3757   1560             ; 40 - . . . 8 . . . . . . . . . . . . . . . . . 9 . . . .
3758   1560             ; 48 - . . . . . 6 . . . . . . 0 . . . . . . 7 . . . . . .
3759   1560             ; 50 - . . . . . . . 4 . . . . . . . . . 5 . . . . . . . .
3760   1560             ; 58 - . . . . . . . . . 2 . . 1 . . 3 . . . . . . . . . .
3761   1560             ;
3762   1560             T1560:
3763   1560 60 48                              .DB $60, $48     ; 0
3764   1562 60 58                              .DB $60, $58     ; 1
3765   1564 48 58                              .DB $48, $58     ; 2
3766   1566 78 58                              .DB $78, $58     ; 3
3767   1568 38 50                              .DB $38, $50     ; 4
3768   156A 88 50                              .DB $88, $50     ; 5
3769   156C 28 48                              .DB $28, $48     ; 6
3770   156E 98 48                              .DB $98, $48     ; 7
3771   1570 18 40                              .DB $18, $40     ; 8
3772   1572 A8 40                              .DB $A8, $40     ; 9
3773   1574 18 30                              .DB $18, $30     ; A
3774   1576 A8 30                              .DB $A8, $30     ; B
3775   1578 28 28                              .DB $28, $28     ; C
3776   157A 98 28                              .DB $98, $28     ; D
3777   157C 38 20                              .DB $38, $20     ; E
3778   157E 88 20                              .DB $88, $20     ; F
3779   1580             
3780   1580             ;level 10 initial screen coordinates for the aliens.
3781   1580             ;      0 0 1 1 2 2 3 3 4 4 5 5 6 6 7 7 8 8 9 9 A A B B C C
3782   1580             ;      0 8 0 8 0 8 0 8 0 8 0 8 0 8 0 8 0 8 0 8 0 8 0 8 0 8
3783   1580             ;      | | | | | | | | | | | | | | | | | | | | | | | | | |
3784   1580             ; 20 - . . . . . . . . . . 1 . 0 . 2 . . . . . . . . . . .
3785   1580             ; 28 - . . . . . . . . 3 . . . . . . . 4 . . . . . . . . .
3786   1580             ; 30 - . . . . . . 5 . . . . . . . . . . . 6 . . . . . . .
3787   1580             ; 38 - . . . . 7 . . . . . . . . . . . . . . . 8 . . . . .
3788   1580             ; 40 - . . . . . . . . . . . . . . . . . . . . . . . . . .
3789   1580             ; 48 - . . . . . . . . . . . . . . . . . . . . . . . . . .
3790   1580             ; 50 - . . . . . . . . . . . . . . . . . . . . . . . . . .
3791   1580             ; 58 - . . . . . . E . C . A . 9 . B . D . F . . . . . . .
3792   1580             ;
3793   1580             T1580:
3794   1580 60 20                              .DB $60, $20     ; 0
3795   1582 50 20                              .DB $50, $20     ; 1
3796   1584 70 20                              .DB $70, $20     ; 2
3797   1586 40 28                              .DB $40, $28     ; 3
3798   1588 80 28                              .DB $80, $28     ; 4
3799   158A 30 30                              .DB $30, $30     ; 5
3800   158C 90 30                              .DB $90, $30     ; 6
3801   158E 20 38                              .DB $20, $38     ; 7
3802   1590 A0 38                              .DB $A0, $38     ; 8
3803   1592 60 58                              .DB $60, $58     ; 9
3804   1594 50 58                              .DB $50, $58     ; A
3805   1596 70 58                              .DB $70, $58     ; B
3806   1598 40 58                              .DB $40, $58     ; C
3807   159A 80 58                              .DB $80, $58     ; D
3808   159C 30 58                              .DB $30, $58     ; E
3809   159E 90 58                              .DB $90, $58     ; F
3810   15A0             
3811   15A0             ;level 7 initial screen coordinates for the aliens.
3812   15A0             ;      0 0 1 1 2 2 3 3 4 4 5 5 6 6 7 7 8 8 9 9 A A B B C C
3813   15A0             ;      0 8 0 8 0 8 0 8 0 8 0 8 0 8 0 8 0 8 0 8 0 8 0 8 0 8
3814   15A0             ;      | | | | | | | | | | | | | | | | | | | | | | | | | |
3815   15A0             ; 20 - . . . . . . . . . . . . 0 . . . . . . . . . . . . .
3816   15A0             ; 28 - . . . . . . . . . . 1 . . . 2 . . . . . . . . . . .
3817   15A0             ; 30 - . . . . . . . . 3 . . . . . . . 4 . . . . . . . . .
3818   15A0             ; 38 - . . . . . . 5 . . . . . . . . . . . 6 . . . . . . .
3819   15A0             ; 40 - . . . . 7 . . . . . . . . . . . . . . . 8 . . . . .
3820   15A0             ; 48 - . . . . . . E . . . . . . . . . . . F . . . . . . .
3821   15A0             ; 50 - . . . . . . . . C . . . . . . . D . . . . . . . . .
3822   15A0             ; 58 - . . . . . . . . . . A . 9 . B . . . . . . . . . . .
3823   15A0             ;
3824   15A0             T15A0:
3825   15A0 60 20                              .DB $60, $20     ; 0
3826   15A2 50 28                              .DB $50, $28     ; 1
3827   15A4 70 28                              .DB $70, $28     ; 2
3828   15A6 40 30                              .DB $40, $30     ; 3
3829   15A8 80 30                              .DB $80, $30     ; 4
3830   15AA 30 38                              .DB $30, $38     ; 5
3831   15AC 90 38                              .DB $90, $38     ; 6
3832   15AE 20 40                              .DB $20, $40     ; 7
3833   15B0 A0 40                              .DB $A0, $40     ; 8
3834   15B2 60 58                              .DB $60, $58     ; 9
3835   15B4 50 58                              .DB $50, $58     ; A
3836   15B6 70 58                              .DB $70, $58     ; B
3837   15B8 40 50                              .DB $40, $50     ; C
3838   15BA 80 50                              .DB $80, $50     ; D
3839   15BC 30 48                              .DB $30, $48     ; E
3840   15BE 90 48                              .DB $90, $48     ; F
3841   15C0             
3842   15C0             ;level 6 initial screen coordinates for the aliens.
3843   15C0             ;      0 0 1 1 2 2 3 3 4 4 5 5 6 6 7 7 8 8 9 9 A A B B C C
3844   15C0             ;      0 8 0 8 0 8 0 8 0 8 0 8 0 8 0 8 0 8 0 8 0 8 0 8 0 8
3845   15C0             ;      | | | | | | | | | | | | | | | | | | | | | | | | | |
3846   15C0             ; 20 - . . E . . . . . . . . . . . . . . . . . . . F . . .
3847   15C0             ; 28 - . . . . C . . . . . . . . . . . . . . . D . . . . .
3848   15C0             ; 30 - . . . . . . A . . . . . . . . . . . B . . . . . . .
3849   15C0             ; 38 - . . . . . . . . 8 . . . . . . . 9 . . . . . . . . .
3850   15C0             ; 40 - . . . . . . . . . . 6 . . . 7 . . . . . . . . . . .
3851   15C0             ; 48 - . . . . . . . . 4 . . . 3 . . . 5 . . . . . . . . .
3852   15C0             ; 50 - . . . . . . . . . . 1 . . . 2 . . . . . . . . . . .
3853   15C0             ; 58 - . . . . . . . . . . . . 0 . . . . . . . . . . . . .
3854   15C0             ;
3855   15C0             T15C0:
3856   15C0 60 58                              .DB $60, $58     ; 0
3857   15C2 50 50                              .DB $50, $50     ; 1
3858   15C4 70 50                              .DB $70, $50     ; 2
3859   15C6 60 48                              .DB $60, $48     ; 3
3860   15C8 40 48                              .DB $40, $48     ; 4
3861   15CA 80 48                              .DB $80, $48     ; 5
3862   15CC 50 40                              .DB $50, $40     ; 6
3863   15CE 70 40                              .DB $70, $40     ; 7
3864   15D0 40 38                              .DB $40, $38     ; 8
3865   15D2 80 38                              .DB $80, $38     ; 9
3866   15D4 30 30                              .DB $30, $30     ; A
3867   15D6 90 30                              .DB $90, $30     ; B
3868   15D8 20 28                              .DB $20, $28     ; C
3869   15DA A0 28                              .DB $A0, $28     ; D
3870   15DC 10 20                              .DB $10, $20     ; E
3871   15DE B0 20                              .DB $B0, $20     ; F
3872   15E0             
3873   15E0             ;level 5 initial screen coordinates for the aliens.
3874   15E0             ;      0 0 1 1 2 2 3 3 4 4 5 5 6 6 7 7 8 8 9 9 A A B B C C
3875   15E0             ;      0 8 0 8 0 8 0 8 0 8 0 8 0 8 0 8 0 8 0 8 0 8 0 8 0 8
3876   15E0             ;      | | | | | | | | | | | | | | | | | | | | | | | | | |
3877   15E0             ; 20 - . . . . . . . . . . . . 0 . . . . . . . . . . . . .
3878   15E0             ; 28 - . . . . . . . . . . 1 . . . 2 . . . . . . . . . . .
3879   15E0             ; 30 - . . . . . . . . 3 . . . . . . . 4 . . . . . . . . .
3880   15E0             ; 38 - . . . . . . 5 . . . . . . . . . . . 6 . . . . . . .
3881   15E0             ; 40 - . . . . 7 . . . . . . . . . . . . . . . 8 . . . . .
3882   15E0             ; 48 - . . . . . . . . . . . . . . . . . . . . . . . . . .
3883   15E0             ; 50 - . . . . . . . . . . . . . . . . . . . . . . . . . .
3884   15E0             ; 58 - . . . . . . . . . . . . . . . . . . . . . . . . . .
3885   15E0             T15E0:
3886   15E0 60 20                              .DB $60, $20     ; 0
3887   15E2 50 28                              .DB $50, $28     ; 1
3888   15E4 70 28                              .DB $70, $28     ; 2
3889   15E6 40 30                              .DB $40, $30     ; 3
3890   15E8 80 30                              .DB $80, $30     ; 4
3891   15EA 30 38                              .DB $30, $38     ; 5
3892   15EC 90 38                              .DB $90, $38     ; 6
3893   15EE 20 40                              .DB $20, $40     ; 7
3894   15F0 A0 40                              .DB $A0, $40     ; 8
3895   15F2 60 20                              .DB $60, $20     ; 9 (two aliens at same position)
3896   15F4 50 28                              .DB $50, $28     ; A (two aliens at same position)
3897   15F6 70 28                              .DB $70, $28     ; B (two aliens at same position)
3898   15F8 40 30                              .DB $40, $30     ; C (two aliens at same position)
3899   15FA 80 30                              .DB $80, $30     ; D (two aliens at same position)
3900   15FC 30 38                              .DB $30, $38     ; E (two aliens at same position)
3901   15FE 90 38                              .DB $90, $38     ; F (two aliens at same position)
3902   1600             ;
3903   1600             ;?
3904   1600             T1600:
3905   1600 10 14 18 1C                        .DB $10, $14, $18, $1C
3906   1604 00 04 08 0C                        .DB $00, $04, $08, $0C
3907   1608 20 22 24 26                        .DB $20, $22, $24, $26
3908   160C 28 2A 2C 2E                        .DB $28, $2A, $2C, $2E
3909   1610 30 32 34 36                        .DB $30, $32, $34, $36
3910   1614 38 3A 3C 3E                        .DB $38, $3A, $3C, $3E
3911   1618 40 42 44 46                        .DB $40, $42, $44, $46
3912   161C 5C 5C 5E 5E                        .DB $5C, $5C, $5E, $5E
3913   1620             
3914   1620             ; 8 player bullets for the fine bit shifting
3915   1620             T1620:
3916   1620 50 51 52 53                        .DB $50, $51, $52, $53, $54, $55, $56, $57
3916   1624 54 55 56 57 
3917   1628             ;
3918   1628 FF FF FF FF                        .DB $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF
3918   162C FF FF FF FF 
3919   1630             ;?
3920   1630 48 48 50 50                        .DB $48, $48, $50, $50, $4A, $4A, $52, $52, $4C, $4C, $54, $54, $4E, $4E, $56, $56
3920   1634 4A 4A 52 52 
3920   1638 4C 4C 54 54 
3920   163C 4E 4E 56 56 
3921   1640 48 48 56 56                        .DB $48, $48, $56, $56, $4E, $4E, $54, $54, $4C, $4C, $52, $52, $4A, $4A, $50, $50
3921   1644 4E 4E 54 54 
3921   1648 4C 4C 52 52 
3921   164C 4A 4A 50 50 
3922   1650 68 68 6C 6C                        .DB $68, $68, $6C, $6C, $70, $70, $74, $74, $78, $78, $7C, $7C, $80, $80, $84, $84
3922   1654 70 70 74 74 
3922   1658 78 78 7C 7C 
3922   165C 80 80 84 84 
3923   1660 68 68 84 84                        .DB $68, $68, $84, $84, $80, $80, $7C, $7C, $78, $78, $74, $74, $70, $70, $6C, $6C
3923   1664 80 80 7C 7C 
3923   1668 78 78 74 74 
3923   166C 70 70 6C 6C 
3924   1670 58 58 5A 5A                        .DB $58, $58, $5A, $5A, $5C, $5C, $5E, $5E, $60, $60, $62, $62, $64, $64, $66, $66
3924   1674 5C 5C 5E 5E 
3924   1678 60 60 62 62 
3924   167C 64 64 66 66 
3925   1680 78                                 .DB $78
3926   1681 FF                                 .DB $FF
3927   1682 A0                                 .DB $A0
3928   1683 FF FF                              .DB $FF, $FF
3929   1685 A8                                 .DB $A8
3930   1686 FF                                 .DB $FF
3931   1687 AC C0                              .DB $AC, $C0
3932   1689 FF                                 .DB $FF
3933   168A C8                                 .DB $C8
3934   168B FF FF                              .DB $FF, $FF
3935   168D C4                                 .DB $C4
3936   168E FF                                 .DB $FF
3937   168F CC D0                              .DB $CC, $D0
3938   1691 FF                                 .DB $FF
3939   1692 D8                                 .DB $D8
3940   1693 FF FF                              .DB $FF, $FF
3941   1695 D4                                 .DB $D4
3942   1696 FF                                 .DB $FF
3943   1697 DC                                 .DB $DC
3944   1698 FF FF FF FF                        .DB $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF
3944   169C FF FF FF FF 
3944   16A0 FF FF FF 
3945   16A3             ;?
3946   16A3 01 02 08                           .DB $01, $02, $08
3947   16A6 01 02 08                           .DB $01, $02, $08
3948   16A9 01 02 0C                           .DB $01, $02, $0C
3949   16AC 01 02 10                           .DB $01, $02, $10
3950   16AF 03 04 14                           .DB $03, $04, $14
3951   16B2 03 04 18                           .DB $03, $04, $18
3952   16B5 04 01 88                           .DB $04, $01, $88
3953   16B8 04 01 90                           .DB $04, $01, $90
3954   16BB 04 01 80                           .DB $04, $01, $80
3955   16BE 04 01 80                           .DB $04, $01, $80
3956   16C1 03 04 70                           .DB $03, $04, $70
3957   16C4 03 04 74                           .DB $03, $04, $74
3958   16C7 03 04 78                           .DB $03, $04, $78
3959   16CA 03 04 7C                           .DB $03, $04, $7C
3960   16CD FF FF FF                           .DB $FF, $FF, $FF
3961   16D0             ;?
3962   16D0 01 02 30                           .DB $01, $02, $30
3963   16D3 01 02 34                           .DB $01, $02, $34
3964   16D6 01 02 38                           .DB $01, $02, $38
3965   16D9 01 02 3C                           .DB $01, $02, $3C
3966   16DC 01 02 40                           .DB $01, $02, $40
3967   16DF 01 02 44                           .DB $01, $02, $44
3968   16E2 01 02 48                           .DB $01, $02, $48
3969   16E5 01 02 4C                           .DB $01, $02, $4C
3970   16E8 04 04 50                           .DB $04, $04, $50
3971   16EB 04 04 54                           .DB $04, $04, $54
3972   16EE 04 04 58                           .DB $04, $04, $58
3973   16F1 04 04 5C                           .DB $04, $04, $5C
3974   16F4 04 04 60                           .DB $04, $04, $60
3975   16F7 04 04 64                           .DB $04, $04, $64
3976   16FA 04 04 68                           .DB $04, $04, $68
3977   16FD 04 04 6C                           .DB $04, $04, $6C
3978   1700             ;?
3979   1700             T1700:
3980   1700 FF FF 01 00                        .DB $FF, $FF, $01, $00, $FF, $00, $04, $00, $FC, $00, $00, $FC, $00, $04, $04, $FE ;
3980   1704 FF 00 04 00 
3980   1708 FC 00 00 FC 
3980   170C 00 04 04 FE 
3981   1710 FC FE 04 02                        .DB $FC, $FE, $04, $02, $FC, $02, $00, $04, $00, $04, $00, $04, $00, $04, $FF, $FF ;
3981   1714 FC 02 00 04 
3981   1718 00 04 00 04 
3981   171C 00 04 FF FF 
3982   1720 FC 00 FC 00                        .DB $FC, $00, $FC, $00, $FC, $00, $FC, $00, $04, $00, $04, $00, $04, $00, $04, $00 ;
3982   1724 FC 00 FC 00 
3982   1728 04 00 04 00 
3982   172C 04 00 04 00 
3983   1730 04 FC 04 04                        .DB $04, $FC, $04, $04, $FC, $04, $FC, $FC, $FC, $FC, $FC, $04, $04, $04, $04, $FC ;
3983   1734 FC 04 FC FC 
3983   1738 FC FC FC 04 
3983   173C 04 04 04 FC 
3984   1740             T1740:
3985   1740 08 00 00 FF                        .DB $08, $00, $00, $FF, $01, $00, $F8, $FF, $08, $01, $02, $FF, $04, $00, $FA, $FF ;
3985   1744 01 00 F8 FF 
3985   1748 08 01 02 FF 
3985   174C 04 00 FA FF 
3986   1750 08 01 04 FF                        .DB $08, $01, $04, $FF, $08, $00, $FC, $FF, $08, $05, $06, $FF, $08, $00, $FE, $FF ;
3986   1754 08 00 FC FF 
3986   1758 08 05 06 FF 
3986   175C 08 00 FE FF 
3987   1760             
3988   1760             ; Parity table and initial number of aliens/birds for levels:
3989   1760             ; odd, odd, even (P), even (P), odd, odd, odd, odd
3990   1760             ; used with $43B8 LevelAndRound.
3991   1760             T1760:
3992   1760 10 10 88 88                        .DB $10, $10, $88, $88, $10, $10, $10, $10 ;
3992   1764 10 10 10 10 
3993   1768             ;
3994   1768 FF FF FF FF                        .DB $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF ;
3994   176C FF FF FF FF 
3995   1770             ;
3996   1770             T1770:
3997   1770 EC FC FD F4                        .DB $EC, $FC, $FD, $F4, $ED, $30, $40, $F5, $EE, $31, $41, $F6, $EF, $FF, $FE, $F7 ; Object 1770 Regular ship, large shields
3997   1774 ED 30 40 F5 
3997   1778 EE 31 41 F6 
3997   177C EF FF FE F7 
3998   1780 E8 F8 F9 F0                        .DB $E8, $F8, $F9, $F0, $E9, $30, $40, $F1, $EA, $31, $41, $F2, $EB, $FB, $FA, $F3 ; Object 1780 Regular ship, small shields
3998   1784 E9 30 40 F1 
3998   1788 EA 31 41 F2 
3998   178C EB FB FA F3 
3999   1790 E8 F8 F9 F0                        .DB $E8, $F8, $F9, $F0, $E9, $E4, $E6, $F1, $EA, $E5, $E7, $F2, $EB, $FB, $FA, $F3 ; Object 1790 Green ship, large shields
3999   1794 E9 E4 E6 F1 
3999   1798 EA E5 E7 F2 
3999   179C EB FB FA F3 
4000   17A0 00 00 00 00                        .DB $00, $00, $00, $00, $00, $E4, $E6, $00, $00, $E5, $E7, $00, $00, $00, $00, $00 ; Object 17A0 Green ship, no shields
4000   17A4 00 E4 E6 00 
4000   17A8 00 E5 E7 00 
4000   17AC 00 00 00 00 
4001   17B0             
4002   17B0             ;
4003   17B0 F0 CA C4 BE                        .DB $F0, $CA, $C4, $BE, $B8, $BE, $B8, $BE ; LSB's of the Alien explosion frame sequence (#5,#4,#3,#2,#1,#2,#1,#2) why wrong order?
4003   17B4 B8 BE B8 BE 
4004   17B8             ;
4005   17B8 C8 D8 C9 D9                        .DB $C8, $D8, $C9, $D9, $CA, $DA ; Object 17B8 3x2 Alien explosion frame #1
4005   17BC CA DA 
4006   17BE CB DB CC DC                        .DB $CB, $DB, $CC, $DC, $CD, $DD ; Object 17BE 3x2 Alien explosion frame #2
4006   17C2 CD DD 
4007   17C4 C0 C1 C1 C2                        .DB $C0, $C1, $C1, $C2, $00, $C0 ; Object 17C4 3x2 Alien explosion frame #3
4007   17C8 00 C0 
4008   17CA 00 00 00 C3                        .DB $00, $00, $00, $C3, $00, $00 ; Object 17CA 3x2 Alien explosion frame #4
4008   17CE 00 00 
4009   17D0             ;
4010   17D0             T17D0:
4011   17D0 C4 D4 C5 D5                        .DB $C4, $D4, $C5, $D5, $C3, $C3 ; Object 17D0 3x2 Bonus explosion left part
4011   17D4 C3 C3 
4012   17D6             T17D6:
4013   17D6 C3 C3 C6 D6                        .DB $C3, $C3, $C6, $D6, $C7, $D7 ; Object 17D6 3x2 Bonus explosion right part
4013   17DA C7 D7 
4014   17DC             
4015   17E0                                    .ORG $17E0
4016   17E0             ;
4017   17E0             CoinChecking:
4018   17E0 3A 00 78                           LD      A,(DSW0)            ; 78xx DSW0
4019   17E3 E6 10                              AND     $10                 ; Coinage
4020   17E5 3A 8F 43                           LD      A,(CoinCount)       ; 
4021   17E8 C8                                 RET     Z                   
4022   17E9 0F                                 RRCA                        
4023   17EA E6 0F                              AND     $0F                 
4024   17EC C9                                 RET                         
4025   17ED             
4026   17F0                                    .ORG $17F0
4027   17F0             ; Used for blank out characters
4028   17F0             ; and Alien explosion frame #5
4029   17F0             FourByFourEmpty:
4030   17F0 00 00 00 00                        .DB $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
4030   17F4 00 00 00 00 
4030   17F8 00 00 00 00 
4030   17FC 00 00 00 00 
4031   1800             
4032   1800             ; Screen ram adresses and static texts using setA
4033   1800             T1800:
4034   1800 43 20                              .DB $43, $20
4035   1802 FF FF FF FF                        .DB $FF, $FF, $FF, $FF
4036   1806             ; " SCORE1  HI-SCORE  SCORE2 "
4037   1806 00 13 03 0F                        .DB $00, $13, $03, $0F, $12, $05, $21, $00, $00, $08, $09, $2B, $13, $03, $0F, $12, $05, $00, $00, $13, $03, $0F, $12, $05, $22, $00
4037   180A 12 05 21 00 
4037   180E 00 08 09 2B 
4037   1812 13 03 0F 12 
4037   1816 05 00 00 13 
4037   181A 03 0F 12 05 
4037   181E 22 00 
4038   1820             
4039   1820 43 21                              .DB $43, $21
4040   1822 FF FF FF FF                        .DB $FF, $FF, $FF, $FF
4041   1826             ; " 000000   000000   000000 "
4042   1826 00 20 20 20                        .DB $00, $20, $20, $20, $20, $20, $20, $00, $00, $00, $20, $20, $20, $20, $20, $20, $00, $00, $00, $20, $20, $20, $20, $20, $20, $00
4042   182A 20 20 20 00 
4042   182E 00 00 20 20 
4042   1832 20 20 20 20 
4042   1836 00 00 00 20 
4042   183A 20 20 20 20 
4042   183E 20 00 
4043   1840             
4044   1840 43 22                              .DB $43, $22
4045   1842 FF FF FF FF                        .DB $FF, $FF, $FF, $FF
4046   1846             ; "   %0     COIN00     %0   "
4047   1846 00 00 00 7F                        .DB $00, $00, $00, $7F, $20, $00, $00, $00, $00, $00, $03, $0F, $09, $0E, $20, $20, $00, $00, $00, $00, $00, $7F, $20, $00, $00, $00
4047   184A 20 00 00 00 
4047   184E 00 00 03 0F 
4047   1852 09 0E 20 20 
4047   1856 00 00 00 00 
4047   185A 00 7F 20 00 
4047   185E 00 00 
4048   1860             
4049   1860             T1860:
4050   1860 43 25                              .DB $43, $25
4051   1862 FF FF FF FF                        .DB $FF, $FF, $FF, $FF
4052   1866             ; "       INSERT  COIN       "
4053   1866 00 00 00 00                        .DB $00, $00, $00, $00, $00, $00, $00, $09, $0E, $13, $05, $12, $14, $00, $00, $03, $0F, $09, $0E, $00, $00, $00, $00, $00, $00, $00
4053   186A 00 00 00 09 
4053   186E 0E 13 05 12 
4053   1872 14 00 00 03 
4053   1876 0F 09 0E 00 
4053   187A 00 00 00 00 
4053   187E 00 00 
4054   1880             
4055   1880 43 27                              .DB $43, $27
4056   1882 FF FF FF FF                        .DB $FF, $FF, $FF, $FF
4057   1886             ; "   * 1PLAYER   1COIN  *   "
4058   1886 00 00 00 1F                        .DB $00, $00, $00, $1F, $00, $21, $10, $0C, $01, $19, $05, $12, $00, $00, $00, $21, $03, $0F, $09, $0E, $00, $00, $1F, $00, $00, $00
4058   188A 00 21 10 0C 
4058   188E 01 19 05 12 
4058   1892 00 00 00 21 
4058   1896 03 0F 09 0E 
4058   189A 00 00 1F 00 
4058   189E 00 00 
4059   18A0             
4060   18A0 43 29                              .DB $43, $29
4061   18A2 FF FF FF FF                        .DB $FF, $FF, $FF, $FF
4062   18A6             ; "   * 2PLAYERS  2COINS *   "
4063   18A6 00 00 00 1F                        .DB $00, $00, $00, $1F, $00, $22, $10, $0C, $01, $19, $05, $12, $13, $00, $00, $22, $03, $0F, $09, $0E, $13, $00, $1F, $00, $00, $00
4063   18AA 00 22 10 0C 
4063   18AE 01 19 05 12 
4063   18B2 13 00 00 22 
4063   18B6 03 0F 09 0E 
4063   18BA 13 00 1F 00 
4063   18BE 00 00 
4064   18C0             
4065   18C0 43 2E                              .DB $43, $2E
4066   18C2 FF FF FF FF                        .DB $FF, $FF, $FF, $FF
4067   18C6             ; "   SCORE AVERAGE TABLE    "
4068   18C6 00 00 00 13                        .DB $00, $00, $00, $13, $03, $0F, $12, $05, $00, $01, $16, $05, $12, $01, $07, $05, $00, $14, $01, $02, $0C, $05, $00, $00, $00, $00
4068   18CA 03 0F 12 05 
4068   18CE 00 01 16 05 
4068   18D2 12 01 07 05 
4068   18D6 00 14 01 02 
4068   18DA 0C 05 00 00 
4068   18DE 00 00 
4069   18E0             
4070   18E0 43 30                              .DB $43, $30
4071   18E2 FF FF FF FF                        .DB $FF, $FF, $FF, $FF
4072   18E6             ; "        20 40 80          "
4073   18E6 00 00 00 00                        .DB $00, $00, $00, $00, $00, $00, $00, $00, $22, $20, $00, $24, $20, $00, $28, $20, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
4073   18EA 00 00 00 00 
4073   18EE 22 20 00 24 
4073   18F2 20 00 28 20 
4073   18F6 00 00 00 00 
4073   18FA 00 00 00 00 
4073   18FE 00 00 
4074   1900             
4075   1900 43 33                              .DB $43, $33
4076   1902 FF FF FF FF                        .DB $FF, $FF, $FF, $FF
4077   1906             ; "        200               "
4078   1906 00 00 00 00                        .DB $00, $00, $00, $00, $00, $00, $00, $00, $22, $20, $20, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
4078   190A 00 00 00 00 
4078   190E 22 20 20 00 
4078   1912 00 00 00 00 
4078   1916 00 00 00 00 
4078   191A 00 00 00 00 
4078   191E 00 00 
4079   1920             
4080   1920 43 36                              .DB $43, $36
4081   1922 FF FF FF FF                        .DB $FF, $FF, $FF, $FF
4082   1926             ; "        50 100 ?[100-800] "
4083   1926 00 00 00 00                        .DB $00, $00, $00, $00, $00, $00, $00, $00, $25, $20, $00, $21, $20, $20, $00, $2F, $1B, $21, $20, $20, $2B, $28, $20, $20, $1C, $00
4083   192A 00 00 00 00 
4083   192E 25 20 00 21 
4083   1932 20 20 00 2F 
4083   1936 1B 21 20 20 
4083   193A 2B 28 20 20 
4083   193E 1C 00 
4084   1940             
4085   1940 43 39                              .DB $43, $39
4086   1942 FF FF FF FF                        .DB $FF, $FF, $FF, $FF
4087   1946             ; "        1000-9000         "
4088   1946 00 00 00 00                        .DB $00, $00, $00, $00, $00, $00, $00, $00, $21, $20, $20, $20, $2B, $29, $20, $20, $20, $00, $00, $00, $00, $00, $00, $00, $00, $00
4088   194A 00 00 00 00 
4088   194E 21 20 20 20 
4088   1952 2B 29 20 20 
4088   1956 20 00 00 00 
4088   195A 00 00 00 00 
4088   195E 00 00 
4089   1960             
4090   1960             T1960:
4091   1960 43 3C                              .DB $43, $3C
4092   1962 00 00 32 21                        .DB $00, $00, $32, $21
4093   1966             ; "PHOENIX% COPYRIGHT 1980   "
4094   1966 10 08 0F 05                        .DB $10, $08, $0F, $05, $0E, $09, $18, $7E, $00, $03, $0F, $10, $19, $12, $09, $07, $08, $14, $00, $21, $29, $28, $20, $00, $00, $00
4094   196A 0E 09 18 7E 
4094   196E 00 03 0F 10 
4094   1972 19 12 09 07 
4094   1976 08 14 00 21 
4094   197A 29 28 20 00 
4094   197E 00 00 
4095   1980             
4096   1980 43 3D                              .DB $43, $3D
4097   1982 02 05 21 28                        .DB $02, $05, $21, $28
4098   1986             ; " AMSTAR ELECTRONICS CORP. "
4099   1986 00 01 0D 13                        .DB $00, $01, $0D, $13, $14, $01
4099   198A 14 01 
4100   198C             L198C:
4101   198C 12 00 05 0C                        .DB $12, $00, $05, $0C, $05, $03, $14, $12, $0F, $0E, $09, $03, $13, $00, $03, $0F, $12, $10, $2A, $00
4101   1990 05 03 14 12 
4101   1994 0F 0E 09 03 
4101   1998 13 00 03 0F 
4101   199C 12 10 2A 00 
4102   19A0             
4103   19A0 43 3E                              .DB $43, $3E
4104   19A2 FF FF FF FF                        .DB $FF, $FF, $FF, $FF
4105   19A6             ; "  PHOENIX AZ. U.S.A.      "
4106   19A6 00 00 10 08                        .DB $00, $00, $10, $08, $0F, $05, $0E, $09, $18, $00, $01, $1A, $2A, $00, $15, $2A, $13, $2A, $01, $2A, $00, $00, $00, $00, $00, $00
4106   19AA 0F 05 0E 09 
4106   19AE 18 00 01 1A 
4106   19B2 2A 00 15 2A 
4106   19B6 13 2A 01 2A 
4106   19BA 00 00 00 00 
4106   19BE 00 00 
4107   19C0             
4108   19C0             T19C0:
4109   19C0 43 28                              .DB $43, $28
4110   19C2 FF FF FF FF                        .DB $FF, $FF, $FF, $FF
4111   19C6             ; "           PUSH           "
4112   19C6 00 00 00 00                        .DB $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $10, $15, $13, $08, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
4112   19CA 00 00 00 00 
4112   19CE 00 00 00 10 
4112   19D2 15 13 08 00 
4112   19D6 00 00 00 00 
4112   19DA 00 00 00 00 
4112   19DE 00 00 
4113   19E0             
4114   19E0 43 2C                              .DB $43, $2C
4115   19E2 FF FF FF FF                        .DB $FF, $FF, $FF, $FF
4116   19E6             ; "    ONLY 1PLAYER BUTTON   "
4117   19E6 00 00 00 00                        .DB $00, $00, $00, $00, $0F, $0E, $0C, $19, $00, $21, $10, $0C, $01, $19, $05, $12, $00, $02, $15, $14, $14, $0F, $0E, $00, $00, $00
4117   19EA 0F 0E 0C 19 
4117   19EE 00 21 10 0C 
4117   19F2 01 19 05 12 
4117   19F6 00 02 15 14 
4117   19FA 14 0F 0E 00 
4117   19FE 00 00 
4118   1A00             
4119   1A00             T1A00:
4120   1A00 43 28                              .DB $43, $28
4121   1A02 FF FF FF FF                        .DB $FF, $FF, $FF, $FF
4122   1A06             ; "        GAME  OVER        "
4123   1A06 00 00 00 00                        .DB $00, $00, $00, $00, $00, $00, $00, $00, $07, $01, $0D, $05, $00, $00, $0F, $16, $05, $12, $00, $00, $00, $00, $00, $00, $00, $00
4123   1A0A 00 00 00 00 
4123   1A0E 07 01 0D 05 
4123   1A12 00 00 0F 16 
4123   1A16 05 12 00 00 
4123   1A1A 00 00 00 00 
4123   1A1E 00 00 
4124   1A20             
4125   1A20 43 28                              .DB $43, $28
4126   1A22 00 FF FF FF                        .DB $00, $FF, $FF, $FF
4127   1A26             ; "%%%%%%%%                %%"
4128   1A26 64 65 64 65                        .DB $64, $65, $64, $65, $64, $65, $60, $61, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $78, $79
4128   1A2A 64 65 60 61 
4128   1A2E 00 00 00 00 
4128   1A32 00 00 00 00 
4128   1A36 00 00 00 00 
4128   1A3A 00 00 00 00 
4128   1A3E 78 79 
4129   1A40             
4130   1A40 43 29                              .DB $43, $29
4131   1A42 FF FF FF FF                        .DB $FF, $FF, $FF, $FF
4132   1A46             ; "%%    %%                %%"
4133   1A46 64 65 00 00                        .DB $64, $65, $00, $00, $00, $00, $64, $65, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $7C, $7D
4133   1A4A 00 00 64 65 
4133   1A4E 00 00 00 00 
4133   1A52 00 00 00 00 
4133   1A56 00 00 00 00 
4133   1A5A 00 00 00 00 
4133   1A5E 7C 7D 
4134   1A60             
4135   1A60 43 2A                              .DB $43, $2A
4136   1A62 FF FF FF FF                        .DB $FF, $FF, $FF, $FF
4137   1A66             ; "%%%%%%%%                  "
4138   1A66 64 65 64 65                        .DB $64, $65, $64, $65, $64, $65, $60, $61, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
4138   1A6A 64 65 60 61 
4138   1A6E 00 00 00 00 
4138   1A72 00 00 00 00 
4138   1A76 00 00 00 00 
4138   1A7A 00 00 00 00 
4138   1A7E 00 00 
4139   1A80             
4140   1A80 43 2B                              .DB $43, $2B
4141   1A82 FF FF FF FF                        .DB $FF, $FF, $FF, $FF
4142   1A86             ; "%%                        "
4143   1A86 64 65 00 00                        .DB $64, $65, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
4143   1A8A 00 00 00 00 
4143   1A8E 00 00 00 00 
4143   1A92 00 00 00 00 
4143   1A96 00 00 00 00 
4143   1A9A 00 00 00 00 
4143   1A9E 00 00 
4144   1AA0             
4145   1AA0 43 2C                              .DB $43, $2C
4146   1AA2 FF FF FF FF                        .DB $FF, $FF, $FF, $FF
4147   1AA6             ; "%% % % %%% %%% %% % % %  %"
4148   1AA6 64 65 00 68                        .DB $64, $65, $00, $68, $00, $68, $00, $68, $68, $68, $00, $68, $64, $65, $00, $62, $63, $00, $68, $00, $68, $00, $68, $00, $00, $68
4148   1AAA 00 68 00 68 
4148   1AAE 68 68 00 68 
4148   1AB2 64 65 00 62 
4148   1AB6 63 00 68 00 
4148   1ABA 68 00 68 00 
4148   1ABE 00 68 
4149   1AC0             
4150   1AC0 43 2D                              .DB $43, $2D
4151   1AC2 FF FF FF FF                        .DB $FF, $FF, $FF, $FF
4152   1AC6             ; "%% % % % % %   %% % % %%%%"
4153   1AC6 64 65 00 68                        .DB $64, $65, $00, $68, $00, $68, $00, $68, $00, $68, $00, $68, $00, $00, $00, $68, $9D, $00, $68, $00, $68, $00, $76, $77, $70, $71
4153   1ACA 00 68 00 68 
4153   1ACE 00 68 00 68 
4153   1AD2 00 00 00 68 
4153   1AD6 9D 00 68 00 
4153   1ADA 68 00 76 77 
4153   1ADE 70 71 
4154   1AE0             
4155   1AE0 43 2E                              .DB $43, $2E
4156   1AE2 FF FF FF FF                        .DB $FF, $FF, $FF, $FF
4157   1AE6             ; "%% %%% % % %%% %%%% %  %% "
4158   1AE6 64 65 00 68                        .DB $64, $65, $00, $68, $68, $68, $00, $68, $00, $68, $00, $68, $62, $63, $00, $68, $76, $77, $68, $00, $68, $00, $00, $64, $65, $00
4158   1AEA 68 68 00 68 
4158   1AEE 00 68 00 68 
4158   1AF2 62 63 00 68 
4158   1AF6 76 77 68 00 
4158   1AFA 68 00 00 64 
4158   1AFE 65 00 
4159   1B00             
4160   1B00 43 2F                              .DB $43, $2F
4161   1B02 00 00 00 00                        .DB $00, $00, $00, $00
4162   1B06             ; "%% % % % % %   % %% % %%%%"
4163   1B06 64 65 00 68                        .DB $64, $65, $00, $68, $00, $68, $00, $68, $00, $68, $00, $68, $00, $00, $00, $68, $00, $9D, $68, $00, $68, $00, $74, $75, $72, $73
4163   1B0A 00 68 00 68 
4163   1B0E 00 68 00 68 
4163   1B12 00 00 00 68 
4163   1B16 00 9D 68 00 
4163   1B1A 68 00 74 75 
4163   1B1E 72 73 
4164   1B20             
4165   1B20 43 30                              .DB $43, $30
4166   1B22 FF FF FF FF                        .DB $FF, $FF, $FF, $FF
4167   1B26             ; "%% % % %%% %%% % %% % %  %"
4168   1B26 64 65 00 68                        .DB $64, $65, $00, $68, $00, $68, $00, $68, $68, $68, $00, $68, $64, $65, $00, $68, $00, $66, $67, $00, $68, $00, $68, $00, $00, $68
4168   1B2A 00 68 00 68 
4168   1B2E 68 68 00 68 
4168   1B32 64 65 00 68 
4168   1B36 00 66 67 00 
4168   1B3A 68 00 68 00 
4168   1B3E 00 68 
4169   1B40             
4170   1B40             ;alien character block shapes table using setA (for fade in)
4171   1B40             T1B40:
4172   1B40 6C                                 .DB $6C              ;#9
4173   1B41 6D                                 .DB $6D              ;#10
4174   1B42 6E                                 .DB $6E              ;#11
4175   1B43 6F                                 .DB $6F              ;#12
4176   1B44             
4177   1B48                                    .ORG $1B48
4178   1B48             ;character block shapes table using setB
4179   1B48             ;parts of the mothership's purple conveyor belt
4180   1B48             T1B48:
4181   1B48 6C 6D 6E 6F                        .DB $6C, $6D, $6E, $6F, $64, $65, $66, $67, $63, $FF
4181   1B4C 64 65 66 67 
4181   1B50 63 FF 
4182   1B52 63 61 67 FF                        .DB $63, $61, $67, $FF
4183   1B56 67 65 6B FF                        .DB $67, $65, $6B, $FF
4184   1B5A 6B 69 6F FF                        .DB $6B, $69, $6F, $FF
4185   1B5E 6F 6D                              .DB $6F, $6D
4186   1B60             
4187   1B60             ;characters used for explosions using setB
4188   1B60             T1B60:
4189   1B60 80 83 83 85                        .DB $80, $83, $83, $85, $81, $8C, $8C, $86, $81, $8C, $8C, $86, $82, $84, $84, $87
4189   1B64 81 8C 8C 86 
4189   1B68 81 8C 8C 86 
4189   1B6C 82 84 84 87 
4190   1B70 00 89 89 00                        .DB $00, $89, $89, $00, $88, $8D, $8D, $8B, $88, $8D, $8D, $8B, $00, $8A, $8A, $00
4190   1B74 88 8D 8D 8B 
4190   1B78 88 8D 8D 8B 
4190   1B7C 00 8A 8A 00 
4191   1B80 00 00 00 00                        .DB $00, $00, $00, $00, $00, $80, $85, $00, $00, $82, $87, $00, $00, $00, $00, $00
4191   1B84 00 80 85 00 
4191   1B88 00 82 87 00 
4191   1B8C 00 00 00 00 
4192   1B90             
4193   1B90             ;adress table for instumentation of explosion
4194   1B90             T1B90:
4195   1B90 1B 80                              .DB $1B, $80
4196   1B92 1B 70                              .DB $1B, $70
4197   1B94 1B 60                              .DB $1B, $60
4198   1B96 1B 70                              .DB $1B, $70
4199   1B98 17 F0                              .DB $17, $F0                         ;for deletion
4200   1B9A 17 F0                              .DB $17, $F0                         ;
4201   1B9C 17 F0                              .DB $17, $F0                         ;
4202   1B9E 17 F0                              .DB $17, $F0                         ;
4203   1BA0             
4204   1BA0             ;characters using setA: '1 OR 2 PLAYERS BUTTON'
4205   1BA0             T1BA0:
4206   1BA0 43 2C                              .DB $43, $2C                         ; screen ram position
4207   1BA2 00 00 00 00                        .DB $00, $00, $00, $00, $00, $00, $00, $21, $00, $0F, $12, $00, $22, $10
4207   1BA6 00 00 00 21 
4207   1BAA 00 0F 12 00 
4207   1BAE 22 10 
4208   1BB0 0C 01 19 05                        .DB $0C, $01, $19, $05, $12, $13, $00, $02, $15, $14, $14, $0F, $0E, $00, $00, $00
4208   1BB4 12 13 00 02 
4208   1BB8 15 14 14 0F 
4208   1BBC 0E 00 00 00 
4209   1BC0             
4210   1BC0             ;characters using setB for animation of the mothership's
4211   1BC0             ;.....antenna animation and the
4212   1BC0             ;...........alien pilot animation
4213   1BC0             T1BC0:
4214   1BC0 41 54 76 7E                        .DB $41, $54, $76, $7E   ; frame 0
4215   1BC4 42 55 77 7F                        .DB $42, $55, $77, $7F   ;
4216   1BC8 41 56 74 7C                        .DB $41, $56, $74, $7C   ; frame 1
4217   1BCC 42 57 75 7D                        .DB $42, $57, $75, $7D   ;
4218   1BD0 44 51 72 7A                        .DB $44, $51, $72, $7A   ; frame 2
4219   1BD4 45 52 73 7B                        .DB $45, $52, $73, $7B   ;
4220   1BD8 46 51 70 78                        .DB $46, $51, $70, $78   ; frame 3
4221   1BDC 47 52 71 79                        .DB $47, $52, $71, $79   ;
4222   1BE0 41 51 70 78                        .DB $41, $51, $70, $78   ; frame 4
4223   1BE4 42 52 71 79                        .DB $42, $52, $71, $79   ;
4224   1BE8 41 51 72 7A                        .DB $41, $51, $72, $7A   ; frame 5
4225   1BEC 42 52 73 7B                        .DB $42, $52, $73, $7B   ;
4226   1BF0 41 51 74 7C                        .DB $41, $51, $74, $7C   ; frame 6
4227   1BF4 42 52 75 7D                        .DB $42, $52, $75, $7D   ;
4228   1BF8 41 51 76 7E                        .DB $41, $51, $76, $7E   ; frame 7
4229   1BFC 42 52 77 7F                        .DB $42, $52, $77, $7F   ;
4230   1C00             
4231   1C00             ;part of the starfield (without planets) using setB
4232   1C00             ; This is a 20x9 tile image used to erase the mothership
4233   1C00             T1C00:
4234   1C00 00 01 00 06                        .DB $00, $01, $00, $06, $00, $02, $03, $04, $00, $01, $00, $08, $00, $02, $03, $04, $00, $00, $07, $00
4234   1C04 00 02 03 04 
4234   1C08 00 01 00 08 
4234   1C0C 00 02 03 04 
4234   1C10 00 00 07 00 
4235   1C14 01 02 00 09                        .DB $01, $02, $00, $09, $00, $03, $04, $00, $00, $03, $04, $00, $00, $01, $00, $02, $00, $03, $0A, $00
4235   1C18 00 03 04 00 
4235   1C1C 00 03 04 00 
4235   1C20 00 01 00 02 
4235   1C24 00 03 0A 00 
4236   1C28 04 00 00 01                        .DB $04, $00, $00, $01, $02, $00, $06, $00, $03, $04, $00, $00, $01, $00, $02, $00, $03, $00, $04, $00
4236   1C2C 02 00 06 00 
4236   1C30 03 04 00 00 
4236   1C34 01 00 02 00 
4236   1C38 03 00 04 00 
4237   1C3C 03 05 00 00                        .DB $03, $05, $00, $00, $00, $00, $07, $00, $01, $00, $02, $00, $00, $05, $00, $00, $03, $00, $04, $01
4237   1C40 00 00 07 00 
4237   1C44 01 00 02 00 
4237   1C48 00 05 00 00 
4237   1C4C 03 00 04 01 
4238   1C50 02 00 03 00                        .DB $02, $00, $03, $00, $08, $04, $00, $01, $02, $06, $00, $03, $00, $04, $00, $02, $01, $02, $03, $00
4238   1C54 08 04 00 01 
4238   1C58 02 06 00 03 
4238   1C5C 00 04 00 02 
4238   1C60 01 02 03 00 
4239   1C64 05 00 00 04                        .DB $05, $00, $00, $04, $00, $01, $02, $00, $00, $03, $04, $0B, $00, $01, $00, $02, $00, $03, $00, $00
4239   1C68 00 01 02 00 
4239   1C6C 00 03 04 0B 
4239   1C70 00 01 00 02 
4239   1C74 00 03 00 00 
4240   1C78 04 00 00 09                        .DB $04, $00, $00, $09, $00, $00, $02, $00, $07, $00, $00, $01, $00, $00, $02, $00, $00, $03, $00, $08
4240   1C7C 00 00 02 00 
4240   1C80 07 00 00 01 
4240   1C84 00 00 02 00 
4240   1C88 00 03 00 08 
4241   1C8C 04 00 01 00                        .DB $04, $00, $01, $00, $00, $06, $00, $01, $00, $02, $00, $01, $03, $04, $01, $03, $01, $02, $03, $04
4241   1C90 00 06 00 01 
4241   1C94 00 02 00 01 
4241   1C98 03 04 01 03 
4241   1C9C 01 02 03 04 
4242   1CA0 00 05 00 01                        .DB $00, $05, $00, $01, $02, $00, $09, $00, $03, $04, $00, $01, $00, $01, $02, $03, $04, $00, $02, $00
4242   1CA4 02 00 09 00 
4242   1CA8 03 04 00 01 
4242   1CAC 00 01 02 03 
4242   1CB0 04 00 02 00 
4243   1CB4             
4244   1CB4 00 01 02 00                        .DB $00, $01, $02, $00, $03, $04, $00, $06, $00, $00, $01, $00
4244   1CB8 03 04 00 06 
4244   1CBC 00 00 01 00 
4245   1CC0 00 01 02 00                        .DB $00, $01, $02, $00, $05, $00, $00, $03, $00, $04, $00, $07, $00, $01, $00, $02
4245   1CC4 05 00 00 03 
4245   1CC8 00 04 00 07 
4245   1CCC 00 01 00 02 
4246   1CD0 00 00 03 00                        .DB $00, $00, $03, $00, $04, $00, $04, $00, $0A, $00, $01, $00, $02, $00, $03, $00
4246   1CD4 04 00 04 00 
4246   1CD8 0A 00 01 00 
4246   1CDC 02 00 03 00 
4247   1CE0 01 00 07 00                        .DB $01, $00, $07, $00, $02, $00, $03, $04, $00, $05, $00, $01, $00, $02, $00, $00
4247   1CE4 02 00 03 04 
4247   1CE8 00 05 00 01 
4247   1CEC 00 02 00 00 
4248   1CF0 08 03 04 00                        .DB $08, $03, $04, $00, $01, $00, $02, $00, $03, $00, $04, $00, $00, $06, $00, $03
4248   1CF4 01 00 02 00 
4248   1CF8 03 00 04 00 
4248   1CFC 00 06 00 03 
4249   1D00             
4250   1D00             ; Mother ship object 26x9 tiles (upside down)
4251   1D00             ; Object 1D00
4252   1D00             ; Maybe these are upside down because the mother ship scrolls down from the top
4253   1D00             ; of the screen. The rows appear in the order given here.
4254   1D00             T1D00:
4255   1D00 0C 0D 0C 0F                        .DB $0C, $0D, $0C, $0F, $07, $07, $01, $00, $00, $4C, $4D, $4E, $4F, $4F, $4E, $4D, $4C, $00, $00, $1F, $0E, $06, $0D, $01, $0E, $05
4255   1D04 07 07 01 00 
4255   1D08 00 4C 4D 4E 
4255   1D0C 4F 4F 4E 4D 
4255   1D10 4C 00 00 1F 
4255   1D14 0E 06 0D 01 
4255   1D18 0E 05 
4256   1D1A 08 0C 0E 0C                        .DB $08, $0C, $0E, $0C, $0A, $00, $00, $4D, $4F, $5E, $5E, $5E, $5E, $5E, $5E, $5E, $5E, $4F, $4D, $00, $00, $06, $0B, $0D, $08, $0E
4256   1D1E 0A 00 00 4D 
4256   1D22 4F 5E 5E 5E 
4256   1D26 5E 5E 5E 5E 
4256   1D2A 5E 4F 4D 00 
4256   1D2E 00 06 0B 0D 
4256   1D32 08 0E 
4257   1D34 03 02 00 01                        .DB $03, $02, $00, $01, $00, $4C, $4F, $5E, $5E, $5E, $5E, $5E, $5E, $5E, $5E, $5E, $5E, $5E, $5E, $4F, $4C, $00, $09, $07, $0A, $03
4257   1D38 00 4C 4F 5E 
4257   1D3C 5E 5E 5E 5E 
4257   1D40 5E 5E 5E 5E 
4257   1D44 5E 5E 5E 4F 
4257   1D48 4C 00 09 07 
4257   1D4C 0A 03 
4258   1D4E 04 00 0A 00                        .DB $04, $00, $0A, $00, $4D, $5E, $5E, $5E, $5E, $5E, $5E, $5E, $5E, $5E, $5E, $5E, $5E, $5E, $5E, $5E, $5E, $4D, $00, $00, $0E, $0F
4258   1D52 4D 5E 5E 5E 
4258   1D56 5E 5E 5E 5E 
4258   1D5A 5E 5E 5E 5E 
4258   1D5E 5E 5E 5E 5E 
4258   1D62 5E 4D 00 00 
4258   1D66 0E 0F 
4259   1D68 08 08 00 5C                        .DB $08, $08, $00, $5C, $60, $6A, $60, $6A, $60, $6A, $60, $6A, $60, $6A, $60, $6A, $60, $6A, $60, $6A, $60, $6A, $5D, $00, $01, $02
4259   1D6C 60 6A 60 6A 
4259   1D70 60 6A 60 6A 
4259   1D74 60 6A 60 6A 
4259   1D78 60 6A 60 6A 
4259   1D7C 60 6A 5D 00 
4259   1D80 01 02 
4260   1D82 02 06 01 00                        .DB $02, $06, $01, $00, $00, $00, $58, $59, $5A, $5B, $5B, $5B, $7E, $7F, $5B, $5B, $5B, $4A, $49, $48, $00, $00, $00, $03, $0E, $0B
4260   1D86 00 00 58 59 
4260   1D8A 5A 5B 5B 5B 
4260   1D8E 7E 7F 5B 5B 
4260   1D92 5B 4A 49 48 
4260   1D96 00 00 00 03 
4260   1D9A 0E 0B 
4261   1D9C 0D 05 04 05                        .DB $0D, $05, $04, $05, $0A, $08, $00, $00, $58, $59, $5A, $4B, $76, $77, $4B, $4A, $49, $48, $00, $00, $01, $03, $0F, $02, $03, $00
4261   1DA0 0A 08 00 00 
4261   1DA4 58 59 5A 4B 
4261   1DA8 76 77 4B 4A 
4261   1DAC 49 48 00 00 
4261   1DB0 01 03 0F 02 
4261   1DB4 03 00 
4262   1DB6 00 03 03 07                        .DB $00, $03, $03, $07, $02, $0A, $03, $07, $00, $00, $58, $50, $51, $52, $53, $48, $00, $00, $0B, $01, $02, $03, $0F, $0E, $0C, $02
4262   1DBA 02 0A 03 07 
4262   1DBE 00 00 58 50 
4262   1DC2 51 52 53 48 
4262   1DC6 00 00 0B 01 
4262   1DCA 02 03 0F 0E 
4262   1DCE 0C 02 
4263   1DD0 05 0C 06 00                        .DB $05, $0C, $06, $00, $04, $06, $07, $0E, $0F, $09, $00, $40, $41, $42, $43, $00, $07, $03, $0A, $08, $0D, $00, $09, $0B, $0C, $0A
4263   1DD4 04 06 07 0E 
4263   1DD8 0F 09 00 40 
4263   1DDC 41 42 43 00 
4263   1DE0 07 03 0A 08 
4263   1DE4 0D 00 09 0B 
4263   1DE8 0C 0A 
4264   1DEA             
4265   1DF0                                    .ORG $1DF0
4266   1DF0             ;
4267   1DF0             L1DF0:
4268   1DF0 3A 1D 43                           LD      A,(ForegroundScreen+$31D)
4269   1DF3 D6 01                              SUB     $01                 
4270   1DF5 C8                                 RET     Z                   
4271   1DF6             ; never called ?
4272   1DF6 32 8F 43                           LD      (CoinCount),A       ;
4273   1DF9 00                                 NOP                         
4274   1DFA 00                                 NOP                         
4275   1DFB 00                                 NOP                         
4276   1DFC 00                                 NOP                         
4277   1DFD 00                                 NOP                         
4278   1DFE 00                                 NOP                         
4279   1DFF 00                                 NOP                         
4280   1E00             ;
4281   1E00             ;data for the 8 (2x2) planets / galaxies from setB
4282   1E00             T1E00:
4283   1E00 20 30 21 31                        .DB $20, $30, $21, $31
4284   1E04 22 32 23 33                        .DB $22, $32, $23, $33
4285   1E08 24 34 25 35                        .DB $24, $34, $25, $35
4286   1E0C 26 36 27 37                        .DB $26, $36, $27, $37
4287   1E10 28 38 29 39                        .DB $28, $38, $29, $39
4288   1E14 2A 3A 2B 3B                        .DB $2A, $3A, $2B, $3B
4289   1E18 2C 3C 2D 3D                        .DB $2C, $3C, $2D, $3D
4290   1E1C 2E 3E 2F 3F                        .DB $2E, $3E, $2F, $3F
4291   1E20             ;MSB's of screen ram for planets / galaxies
4292   1E20             T1E20:
4293   1E20 49 48 4A 4B                        .DB $49, $48, $4A, $4B
4294   1E24 4A 49 4A 49                        .DB $4A, $49, $4A, $49
4295   1E28 48 4A 48 49                        .DB $48, $4A, $48, $49
4296   1E2C 4B 48 4A 48                        .DB $4B, $48, $4A, $48
4297   1E30 4A 49 4B 49                        .DB $4A, $49, $4B, $49
4298   1E34 4B 4A 49 48                        .DB $4B, $4A, $49, $48
4299   1E38 49 49 4A 4A                        .DB $49, $49, $4A, $4A
4300   1E3C 48 49 4A 48                        .DB $48, $49, $4A, $48
4301   1E40             ;
4302   1E40             T1E40:
4303   1E40 A0 60 40 00                        .DB $A0, $60, $40, $00
4304   1E44 E0 C0 C0 60                        .DB $E0, $C0, $C0, $60
4305   1E48 80 20 60 40                        .DB $80, $20, $60, $40
4306   1E4C 20 40 00 80                        .DB $20, $40, $00, $80
4307   1E50 40 00 20 E0                        .DB $40, $00, $20, $E0
4308   1E54 00 60 00 A0                        .DB $00, $60, $00, $A0
4309   1E58 E0 20 80 00                        .DB $E0, $20, $80, $00
4310   1E5C C0 80 A0 E0                        .DB $C0, $80, $A0, $E0
4311   1E60             ;LSB's of screen ram for planets / galaxies
4312   1E60             T1E60:
4313   1E60 00 04 08 0C                        .DB $00, $04, $08, $0C
4314   1E64 10 14 18 1C                        .DB $10, $14, $18, $1C
4315   1E68 00 08 10 18                        .DB $00, $08, $10, $18
4316   1E6C 04 0C 14 1C                        .DB $04, $0C, $14, $1C
4317   1E70 00 0C 18 04                        .DB $00, $0C, $18, $04
4318   1E74 04 1C 08 14                        .DB $04, $1C, $08, $14
4319   1E78 00 10 04 14                        .DB $00, $10, $04, $14
4320   1E7C 08 18 0C 1C                        .DB $08, $18, $0C, $1C
4321   1E80             ;data for the 16 (1x1) small galaxies from setB
4322   1E80             T1E80:
4323   1E80 10 11 12 13                        .DB $10, $11, $12, $13
4324   1E84 14 15 16 17                        .DB $14, $15, $16, $17
4325   1E88 18 19 1A 1B                        .DB $18, $19, $1A, $1B
4326   1E8C 1C 1D 1E 1F                        .DB $1C, $1D, $1E, $1F
4327   1E90 10 12 14 16                        .DB $10, $12, $14, $16
4328   1E94 18 1A 1C 1E                        .DB $18, $1A, $1C, $1E
4329   1E98 11 13 15 17                        .DB $11, $13, $15, $17
4330   1E9C 19 1B 1D 1F                        .DB $19, $1B, $1D, $1F
4331   1EA0             ;
4332   1EA0             T1EA0:
4333   1EA0 4A 4B 49 4A                        .DB $4A, $4B, $49, $4A
4334   1EA4 48 4A 48 49                        .DB $48, $4A, $48, $49
4335   1EA8 49 4A 49 4B                        .DB $49, $4A, $49, $4B
4336   1EAC 48 4B 4A 4A                        .DB $48, $4B, $4A, $4A
4337   1EB0 48 49 48 4A                        .DB $48, $49, $48, $4A
4338   1EB4 48 48 49 4A                        .DB $48, $48, $49, $4A
4339   1EB8 49 49 4A 48                        .DB $49, $49, $4A, $48
4340   1EBC 4A 49 4B 48                        .DB $4A, $49, $4B, $48
4341   1EC0             ;
4342   1EC0             T1EC0:
4343   1EC0 00 20 60 40                        .DB $00, $20, $60, $40
4344   1EC4 E0 80 20 60                        .DB $E0, $80, $20, $60
4345   1EC8 40 A0 00 00                        .DB $40, $A0, $00, $00
4346   1ECC 40 20 C0 20                        .DB $40, $20, $C0, $20
4347   1ED0 A0 80 E0 40                        .DB $A0, $80, $E0, $40
4348   1ED4 60 C0 20 A0                        .DB $60, $C0, $20, $A0
4349   1ED8 E0 40 60 C0                        .DB $E0, $40, $60, $C0
4350   1EDC 20 40 20 80                        .DB $20, $40, $20, $80
4351   1EE0             
4352   1EE0             ;*****************************************************************************
4353   1EE0             ;* Used for the animation speed at bird intro.
4354   1EE0             ;*****************************************************************************
4355   1EE0             L1EE0:
4356   1EE0 11 3D 43                           LD      DE,ForegroundScreen+$33D ; holding 0
4357   1EE3 01 1A 00                           LD      BC,$001A            ;
4358   1EE6             L1EE6:
4359   1EE6 1A                                 LD      A,(DE)              ;
4360   1EE7 80                                 ADD     A,B                 ;
4361   1EE8 47                                 LD      B,A                 ;
4362   1EE9 CD 17 02                           CALL    RightOneColumn      ;
4363   1EEC 0D                                 DEC     C                   ;
4364   1EED C2 E6 1E                           JP      NZ,L1EE6            ;
4365   1EF0 1A                                 LD      A,(DE)              ;
4366   1EF1 80                                 ADD     A,B                 ;
4367   1EF2 C6 27                              ADD     $27                 ;
4368   1EF4 21 89 43                           LD      HL,HiScorehigh      ;
4369   1EF7 86                                 ADD     A,(HL)              ;
4370   1EF8 77                                 LD      (HL),A              ;
4371   1EF9 00                                 NOP                         ;
4372   1EFA C9                                 RET                         ;
4373   1EFB             
4374   1F00                                    .ORG $1F00
4375   1F00             ;
4376   1F00             ; Part of the starfield background without planets
4377   1F00             T1F00:
4378   1F00 00 00 00 01                        .DB $00, $00, $00, $01, $00, $00, $00, $02, $00, $00, $00, $00, $03, $00, $00, $00
4378   1F04 00 00 00 02 
4378   1F08 00 00 00 00 
4378   1F0C 03 00 00 00 
4379   1F10 00 04 00 00                        .DB $00, $04, $00, $00, $00, $00, $01, $00, $00, $00, $05, $00, $02, $00, $03, $00
4379   1F14 00 00 01 00 
4379   1F18 00 00 05 00 
4379   1F1C 02 00 03 00 
4380   1F20 00 00 04 00                        .DB $00, $00, $04, $00, $07, $00, $00, $00, $06, $00, $01, $00, $02, $0C, $00, $03
4380   1F24 07 00 00 00 
4380   1F28 06 00 01 00 
4380   1F2C 02 0C 00 03 
4381   1F30 04 00 00 01                        .DB $04, $00, $00, $01, $00, $08, $00, $00, $02, $00, $0C, $03, $04, $0E, $00, $00
4381   1F34 00 08 00 00 
4381   1F38 02 00 0C 03 
4381   1F3C 04 0E 00 00 
4382   1F40 00 01 02 00                        .DB $00, $01, $02, $00, $0D, $03, $04, $0F, $01, $0C, $07, $0A, $02, $0D, $03, $08
4382   1F44 0D 03 04 0F 
4382   1F48 01 0C 07 0A 
4382   1F4C 02 0D 03 08 
4383   1F50 06 0C 04 09                        .DB $06, $0C, $04, $09, $05, $0F, $01, $02, $0D, $03, $0C, $04, $0D, $05, $0F, $0C
4383   1F54 05 0F 01 02 
4383   1F58 0D 03 0C 04 
4383   1F5C 0D 05 0F 0C 
4384   1F60 01 02 0E 0C                        .DB $01, $02, $0E, $0C, $03, $0F, $0D, $05, $0E, $0D, $0C, $0F, $0D, $04, $0C, $01
4384   1F64 03 0F 0D 05 
4384   1F68 0E 0D 0C 0F 
4384   1F6C 0D 04 0C 01 
4385   1F70 0E 05 0F 0D                        .DB $0E, $05, $0F, $0D, $07, $0C, $06, $0E, $0D, $0F, $09, $0C, $0F, $0D, $0E, $0D
4385   1F74 07 0C 06 0E 
4385   1F78 0D 0F 09 0C 
4385   1F7C 0F 0D 0E 0D 
4386   1F80 02 0D 0C 0F                        .DB $02, $0D, $0C, $0F, $05, $0E, $0D, $0C, $0F, $06, $0E, $0F, $0C, $0D, $0F, $0C
4386   1F84 05 0E 0D 0C 
4386   1F88 0F 06 0E 0F 
4386   1F8C 0C 0D 0F 0C 
4387   1F90 06 0D 04 0B                        .DB $06, $0D, $04, $0B, $0C, $0F, $05, $0D, $05, $03, $0E, $07, $0C, $0D, $04, $05
4387   1F94 0C 0F 05 0D 
4387   1F98 05 03 0E 07 
4387   1F9C 0C 0D 04 05 
4388   1FA0 01 02 0E 03                        .DB $01, $02, $0E, $03, $0C, $04, $0F, $05, $08, $0C, $07, $01, $0D, $04, $0E, $02
4388   1FA4 0C 04 0F 05 
4388   1FA8 08 0C 07 01 
4388   1FAC 0D 04 0E 02 
4389   1FB0 0C 01 0F 03                        .DB $0C, $01, $0F, $03, $05, $0D, $00, $0E, $00, $09, $0C, $06, $0D, $00, $01, $02
4389   1FB4 05 0D 00 0E 
4389   1FB8 00 09 0C 06 
4389   1FBC 0D 00 01 02 
4390   1FC0 01 02 03 00                        .DB $01, $02, $03, $00, $00, $0D, $00, $0A, $00, $00, $00, $0E, $00, $05, $00, $08
4390   1FC4 00 0D 00 0A 
4390   1FC8 00 00 00 0E 
4390   1FCC 00 05 00 08 
4391   1FD0 00 0C 00 00                        .DB $00, $0C, $00, $00, $03, $00, $00, $07, $00, $00, $00, $04, $00, $00, $06, $00
4391   1FD4 03 00 00 07 
4391   1FD8 00 00 00 04 
4391   1FDC 00 00 06 00 
4392   1FE0 00 00 00 01                        .DB $00, $00, $00, $01, $00, $00, $00, $00, $02, $00, $00, $00, $00, $03, $00, $00
4392   1FE4 00 00 00 00 
4392   1FE8 02 00 00 00 
4392   1FEC 00 03 00 00 
4393   1FF0 00 04 00 05                        .DB $00, $04, $00, $05, $00, $00, $00, $00, $00, $01, $00, $00, $00, $00, $02, $00
4393   1FF4 00 00 00 00 
4393   1FF8 00 01 00 00 
4393   1FFC 00 00 02 00 
4394   2000             ;*****************************************************************************
4395   2000             ;* Game level 1, 3 and B:
4396   2000             ;* 'player alife' with aliens, after 'fade in'
4397   2000             ;*****************************************************************************
4398   2000             L2000:
4399   2000 CD 76 08                           CALL    PlayerUpdate        ; Updates the player ship, player bullet and the shield.
4400   2003 CD F0 0D                           CALL    L0DF0               ; alien bullet to player, collission detection ?
4401   2006 CD A0 24                           CALL    L24A0               ; 
4402   2009 21 5F 43                           LD      HL,M435F            ; 8 bit counter for alien movement
4403   200C 7E                                 LD      A,(HL)              ; get value
4404   200D E6 03                              AND     $03                 ; mask out 0000_0011 for count 0 to 3
4405   200F 47                                 LD      B,A                 ; save the masked counter
4406   2010 34                                 INC     (HL)                ; increment alien movement counter
4407   2011 3A BA 43                           LD      A,(AliensLeft)      ; 
4408   2014 A7                                 AND     A                   ; updates the zero flag
4409   2015 CA BA 21                           JP      Z,L21BA             ; if no AliensLeft
4410   2018 FE 05                              CP      $05                 ;
4411   201A D2 30 21                           JP      NC,L2130            ; if <= 5 left
4412   201D 2D                                 DEC     L                   ; $435E
4413   201E 78                                 LD      A,B                 ; get masked counter
4414   201F A7                                 AND     A                   ; updates the zero flag
4415   2020 C2 25 20                           JP      NZ,L2025            ; if masked counter <> 0
4416   2023 36 FF                              LD      (HL),$FF            ; set all bits at $435E
4417   2025             L2025:
4418   2025 7E                                 LD      A,(HL)              ; get $435E
4419   2026 A7                                 AND     A                   ; updates the zero flag
4420   2027 CA 30 21                           JP      Z,L2130             ; if $435E = 0
4421   202A C3 46 21                           JP      L2146               ; 
4422   202D             
4423   2030                                    .ORG $2030
4424   2030             ;
4425   2030             L2030:
4426   2030 E6 03                              AND     $03                 
4427   2032 FE 01                              CP      $01                 
4428   2034 11 50 1B                           LD      DE,$1B50            
4429   2037 C3 AC 23                           JP      L23AC               ; 
4430   203A             
4431   2040                                    .ORG $2040
4432   2040             ;*****************************************************************************
4433   2040             ;* Add 1x1 small galaxies to background.
4434   2040             ;*****************************************************************************
4435   2040             AddGalaxiesToBackground:
4436   2040 21 AF 43                           LD      HL,M43AF            ; 
4437   2043 3A B9 43                           LD      A,(CounterB9)       ; 
4438   2046 4F                                 LD      C,A                 ;
4439   2047 BE                                 CP      (HL)                ;
4440   2048 C0                                 RET     NZ                  ;
4441   2049 7E                                 LD      A,(HL)              ;
4442   204A 2C                                 INC     L                   ;
4443   204B 96                                 SUB     (HL)                ;
4444   204C 2D                                 DEC     L                   ;
4445   204D 77                                 LD      (HL),A              ;
4446   204E 2C                                 INC     L                   ;
4447   204F 2C                                 INC     L                   ;
4448   2050 34                                 INC     (HL)                ;
4449   2051 7E                                 LD      A,(HL)              ;
4450   2052 21 80 1E                           LD      HL,T1E80            ; data for the 16 (1x1) small galaxies from setB
4451   2055 E6 1F                              AND     $1F                 ;
4452   2057 85                                 ADD     A,L                 ;
4453   2058 6F                                 LD      L,A                 ;
4454   2059 46                                 LD      B,(HL)              ;
4455   205A C6 20                              ADD     $20                 ;
4456   205C 6F                                 LD      L,A                 ;
4457   205D 56                                 LD      D,(HL)              ;
4458   205E C6 20                              ADD     $20                 ;
4459   2060 6F                                 LD      L,A                 ;
4460   2061 5E                                 LD      E,(HL)              ;
4461   2062 79                                 LD      A,C                 ;
4462   2063 0F                                 RRCA                        ;
4463   2064 0F                                 RRCA                        ;
4464   2065 0F                                 RRCA                        ;
4465   2066 E6 1F                              AND     $1F                 ;
4466   2068 83                                 ADD     A,E                 ;
4467   2069 3C                                 INC     A                   ;
4468   206A 5F                                 LD      E,A                 ;
4469   206B 78                                 LD      A,B                 ;
4470   206C 12                                 LD      (DE),A              ;
4471   206D C9                                 RET                         ;
4472   206E             
4473   2070                                    .ORG $2070
4474   2070             ;
4475   2070             L2070:
4476   2070 7B                                 LD      A,E                 
4477   2071 D6 0A                              SUB     $0A                 
4478   2073 C6 C0                              ADD     $C0                 
4479   2075 4F                                 LD      C,A                 
4480   2076 7A                                 LD      A,D                 
4481   2077 CE 00                              ADC     $00                 
4482   2079 47                                 LD      B,A                 
4483   207A 7E                                 LD      A,(HL)              
4484   207B 11 00 28                           LD      DE,T2800            ; get the foreground tiles of the player ship particles explosion
4485   207E 21 00 29                           LD      HL,T2900            ; and get the control data for it
4486   2081 C3 85 20                           JP      L2085               ; 
4487   2084             
4488   2085                                    .ORG $2085
4489   2085             ;
4490   2085             L2085:
4491   2085 D6 20                              SUB     $20                 
4492   2087 07                                 RLCA                        ; Multiply by 4 ..
4493   2088 07                                 RLCA                        ; ..
4494   2089 00                                 NOP                         
4495   208A E6 E0                              AND     $E0                 
4496   208C 6F                                 LD      L,A                 
4497   208D 3E E0                              LD      A,$E0               
4498   208F 95                                 SUB     L                   
4499   2090 6F                                 LD      L,A                 
4500   2091             L2091:
4501   2091 3E 3F                              LD      A,$3F               
4502   2093 91                                 SUB     C                   
4503   2094 3E 43                              LD      A,$43               
4504   2096 98                                 SBC     B                   
4505   2097 D2 B0 20                           JP      NC,L20B0            ; 
4506   209A 23                                 INC     HL                  
4507   209B 23                                 INC     HL                  
4508   209C 7B                                 LD      A,E                 
4509   209D C6 10                              ADD     $10                 
4510   209F 5F                                 LD      E,A                 
4511   20A0 79                                 LD      A,C                 
4512   20A1 D6 20                              SUB     $20                 
4513   20A3 4F                                 LD      C,A                 
4514   20A4 78                                 LD      A,B                 
4515   20A5 DE 00                              SBC     $00                 
4516   20A7 47                                 LD      B,A                 
4517   20A8 C3 91 20                           JP      L2091               ; 
4518   20AB             
4519   20B0                                    .ORG $20B0
4520   20B0             ;*****************************************************************************
4521   20B0             ;* Player ship particles explosion.
4522   20B0             ;*****************************************************************************
4523   20B0             L20B0:
4524   20B0 C5                                 PUSH    BC                  
4525   20B1             L20B1:
4526   20B1 7E                                 LD      A,(HL)              
4527   20B2 E3                                 EX      (SP),HL             
4528   20B3 06 08                              LD      B,$08               
4529   20B5             L20B5:
4530   20B5 36 00                              LD      (HL),$00            
4531   20B7 0F                                 RRCA                        
4532   20B8 D2 BF 20                           JP      NC,L20BF            ; 
4533   20BB EB                                 EX      DE,HL               
4534   20BC 4E                                 LD      C,(HL)              
4535   20BD EB                                 EX      DE,HL               ; get data from $2800
4536   20BE 71                                 LD      (HL),C              
4537   20BF             L20BF:
4538   20BF 23                                 INC     HL                  
4539   20C0 13                                 INC     DE                  
4540   20C1 05                                 DEC     B                   
4541   20C2 C2 B5 20                           JP      NZ,L20B5            ; 
4542   20C5 E3                                 EX      (SP),HL             
4543   20C6 23                                 INC     HL                  
4544   20C7 7D                                 LD      A,L                 
4545   20C8 0F                                 RRCA                        
4546   20C9 DA B1 20                           JP      C,L20B1             ; 
4547   20CC 7D                                 LD      A,L                 
4548   20CD E6 1F                              AND     $1F                 
4549   20CF CA E1 20                           JP      Z,L20E1             ; 
4550   20D2 E3                                 EX      (SP),HL             
4551   20D3 7D                                 LD      A,L                 
4552   20D4 D6 30                              SUB     $30                 
4553   20D6 6F                                 LD      L,A                 
4554   20D7 7C                                 LD      A,H                 
4555   20D8 DE 00                              SBC     $00                 
4556   20DA 67                                 LD      H,A                 
4557   20DB E3                                 EX      (SP),HL             
4558   20DC FE 3F                              CP      $3F                 
4559   20DE C2 B1 20                           JP      NZ,L20B1            ; 
4560   20E1             L20E1:
4561   20E1 C1                                 POP     BC                  
4562   20E2 C9                                 RET                         
4563   20E3             
4564   20E8                                    .ORG $20E8
4565   20E8             ;
4566   20E8             L20E8:
4567   20E8 47                                 LD      B,A                 
4568   20E9 7A                                 LD      A,D                 
4569   20EA C6 08                              ADD     $08                 
4570   20EC 57                                 LD      D,A                 
4571   20ED CD 1C 21                           CALL    L211C               ; 
4572   20F0 0F                                 RRCA                        
4573   20F1 0F                                 RRCA                        
4574   20F2 0F                                 RRCA                        
4575   20F3 83                                 ADD     A,E                 
4576   20F4 E6 1F                              AND     $1F                 
4577   20F6 4F                                 LD      C,A                 
4578   20F7 7B                                 LD      A,E                 
4579   20F8 E6 E0                              AND     $E0                 
4580   20FA B1                                 OR      C                   
4581   20FB 5F                                 LD      E,A                 
4582   20FC 78                                 LD      A,B                 
4583   20FD 0F                                 RRCA                        
4584   20FE 0F                                 RRCA                        
4585   20FF E6 0E                              AND     $0E                 
4586   2101 C6 90                              ADD     $90                 
4587   2103 6F                                 LD      L,A                 
4588   2104 26 1B                              LD      H,$1B               
4589   2106 7E                                 LD      A,(HL)              
4590   2107 2C                                 INC     L                   
4591   2108 6E                                 LD      L,(HL)              
4592   2109 67                                 LD      H,A                 
4593   210A 01 04 04                           LD      BC,$0404            ; images are 4x4
4594   210D C3 D6 0A                           JP      DrawImageCbyB       ; 
4595   2110             
4596   211C                                    .ORG $211C
4597   211C             ;
4598   211C             L211C:
4599   211C 21 B9 43                           LD      HL,CounterB9        ; 
4600   211F 7E                                 LD      A,(HL)              
4601   2120 FE 10                              CP      $10                 
4602   2122 D8                                 RET     C                   
4603   2123 FE 30                              CP      $30                 
4604   2125 D0                                 RET     NC                  
4605   2126 3E 10                              LD      A,$10               
4606   2128 77                                 LD      (HL),A              
4607   2129 32 00 58                           LD      (scrollRegister),A  ; 58xx scroll register
4608   212C C9                                 RET                         
4609   212D             
4610   2130                                    .ORG $2130
4611   2130             ;
4612   2130             L2130:
4613   2130 78                                 LD      A,B                 ; get masked counter
4614   2131 A7                                 AND     A                   ; updates the zero flag
4615   2132 CA 50 21                           JP      Z,L2150             ; if = 0
4616   2135 FE 01                              CP      $01                 ;
4617   2137 CA 60 21                           JP      Z,L2160             ; if = 1
4618   213A FE 02                              CP      $02                 ;
4619   213C CA 70 21                           JP      Z,L2170             ; if = 2
4620   213F C3 80 21                           JP      L2180               ; counter = 3
4621   2142             
4622   2146                                    .ORG $2146
4623   2146             ;
4624   2146             L2146:
4625   2146 78                                 LD      A,B                 
4626   2147 0F                                 RRCA                        
4627   2148 D2 90 21                           JP      NC,L2190            ; 
4628   214B C3 A5 21                           JP      L21A5               ; 
4629   214E             
4630   2150                                    .ORG $2150
4631   2150             ; masked counter = 0
4632   2150             L2150:
4633   2150 CD 50 0A                           CALL    AlienDataController ; draw or delete alien
4634   2153 CD 00 30                           CALL    L3000               ; 
4635   2156 C3 00 0F                           JP      L0F00               ; 'alien with player' collision check
4636   2159             
4637   2160                                    .ORG $2160
4638   2160             ; masked counter = 1
4639   2160             L2160:
4640   2160 CD C4 24                           CALL    L24C4               ; 
4641   2163 CD 40 0C                           CALL    L0C40               ; 
4642   2166 CD 1C 0D                           CALL    L0D1C               ; 
4643   2169 C3 C0 0F                           JP      L0FC0               ; Handle animations for killed aliens
4644   216C             
4645   2170                                    .ORG $2170
4646   2170             ; masked counter = 2
4647   2170             L2170:
4648   2170 CD 70 0D                           CALL    L0D70               ; 
4649   2173 C3 60 25                           JP      L2560               ; 
4650   2176             
4651   2180                                    .ORG $2180
4652   2180             ; masked counter = 3
4653   2180             L2180:
4654   2180 CD C4 24                           CALL    L24C4               ; 
4655   2183 CD 40 0C                           CALL    L0C40               ; 
4656   2186 CD 6C 0A                           CALL    L0A6C               ; get screen ram adress for all aliens
4657   2189 C3 C0 0F                           JP      L0FC0               ; Handle animations for killed aliens
4658   218C             
4659   2190                                    .ORG $2190
4660   2190             ;
4661   2190             L2190:
4662   2190 CD 50 0A                           CALL    AlienDataController ; draw or delete alien
4663   2193 CD 00 30                           CALL    L3000               ; 
4664   2196 CD 00 0F                           CALL    L0F00               ; 'alien with player' collision check
4665   2199 CD 60 25                           CALL    L2560               ; 
4666   219C C3 40 0C                           JP      L0C40               ; 
4667   219F             
4668   21A5                                    .ORG $21A5
4669   21A5             ;
4670   21A5             L21A5:
4671   21A5 CD 1C 0D                           CALL    L0D1C               ; 
4672   21A8 CD 70 0D                           CALL    L0D70               ; 
4673   21AB CD 6C 0A                           CALL    L0A6C               ; get screen ram adress for all aliens
4674   21AE CD C0 0F                           CALL    L0FC0               ; Handle animations for killed aliens
4675   21B1 C3 C4 24                           JP      L24C4               ; 
4676   21B4             
4677   21BA                                    .ORG $21BA
4678   21BA             ;
4679   21BA             L21BA:
4680   21BA 78                                 LD      A,B                 ;
4681   21BB 0F                                 RRCA                        ;
4682   21BC D2 04 22                           JP      NC,L2204            ; 
4683   21BF CD 40 0C                           CALL    L0C40               ; 
4684   21C2 CD C0 0F                           CALL    L0FC0               ; Handle animations for killed aliens
4685   21C5 CD C4 24                           CALL    L24C4               ; 
4686   21C8 3A B8 43                           LD      A,(LevelAndRound)   ; 
4687   21CB E6 0F                              AND     $0F                 ; mask out 0000_1111
4688   21CD FE 0B                              CP      $0B                 ;
4689   21CF DA 04 22                           JP      C,L2204             ; if < game level B
4690   21D2 3E 10                              LD      A,$10               ; 16 aliens for a new wave
4691   21D4 32 BA 43                           LD      (AliensLeft),A      ; 
4692   21D7 C3 26 05                           JP      L0526               ; init alien data
4693   21DA             
4694   21DC                                    .ORG $21DC
4695   21DC             ;*****************************************************************************
4696   21DC             ;* Handles the bird animation at intro.
4697   21DC             ;*****************************************************************************
4698   21DC             DrawIntroBirdAnimationFrame:
4699   21DC 7E                                 LD      A,(HL)              ; {ram.M4399} Actual index for slow print at intro splash (starts with $300)
4700   21DD 00                                 NOP                         ;
4701   21DE 47                                 LD      B,A                 ; save it
4702   21DF 21 73 4B                           LD      HL,B4B73            ; used as temp memory
4703   21E2 E6 07                              AND     $07                 ; mask out 0000_0111 in order to count from 0 to 7
4704   21E4 77                                 LD      (HL),A              ; save it
4705   21E5 2D                                 DEC     L                   ;
4706   21E6 36 EF                              LD      (HL),$EF            ; use $4B72 for LSB of screen ram
4707   21E8 2D                                 DEC     L                   ;
4708   21E9 36 49                              LD      (HL),$49            ; use $4B71 for MSB of screen ram
4709   21EB 2D                                 DEC     L                   ; $4B70 (bird0 index character block shape)
4710   21EC 78                                 LD      A,B                 ; restore $4399
4711   21ED E6 F8                              AND     $F8                 ; mask out 1111_1000
4712   21EF 0F                                 RRCA                        ; Divide by 8 ..
4713   21F0 0F                                 RRCA                        ; ..
4714   21F1 0F                                 RRCA                        ; ..
4715   21F2 C6 3A                              ADD     T233A & $FF         ; LSB of T233A
4716   21F4 5F                                 LD      E,A                 ;
4717   21F5 16 23                              LD      D,T233A >> 8        ; MSB of T233A
4718   21F7 1A                                 LD      A,(DE)              ; get data starting at T233A for animation frame index
4719   21F8 77                                 LD      (HL),A              ; write to $4B70
4720   21F9 CD C0 34                           CALL    DrawBirdObject      ; draw the bird at intro
4721   21FC C3 E0 1E                           JP      L1EE0               ; 
4722   21FF             
4723   2204                                    .ORG $2204
4724   2204             ;
4725   2204             L2204:
4726   2204 21 B6 43                           LD      HL,M43B6            ; 
4727   2207 35                                 DEC     (HL)                ;
4728   2208 7E                                 LD      A,(HL)              ;
4729   2209 FE A0                              CP      $A0                 ;
4730   220B D0                                 RET     NC                  ;
4731   220C 2E A4                              LD      L,$A4               ;
4732   220E 36 02                              LD      (HL),$02            ; set GameState to: 'initialization of game and level data'
4733   2210 2E A6                              LD      L,$A6               ;
4734   2212 36 00                              LD      (HL),$00            ; clear ShieldCount
4735   2214 2E B8                              LD      L,$B8               ;
4736   2216 34                                 INC     (HL)                ; increment LevelAndRound
4737   2217 7E                                 LD      A,(HL)              ;
4738   2218 E6 0E                              AND     $0E                 ; mask out 0000_1110
4739   221A 0F                                 RRCA                        ; divide by 2
4740   221B C6 60                              ADD     T1760 & $FF         ; add to base of table T1760
4741   221D 5F                                 LD      E,A                 ;
4742   221E 16 17                              LD      D,T1760 >> 8        ;
4743   2220 2C                                 INC     L                   ;
4744   2221 2C                                 INC     L                   ;
4745   2222 1A                                 LD      A,(DE)              ; get value from table T1760
4746   2223 A7                                 AND     A                   ; updates the flags
4747   2224 F2 2A 22                           JP      P,L222A             ; if not positive.
4748   2227 2C                                 INC     L                   ; use BirdsLeft
4749   2228 E6 7F                              AND     $7F                 ; mask out 0111_1111
4750   222A             L222A:
4751   222A 77                                 LD      (HL),A              ; save to $43BA (AliensLeft) or $43BB (BirdsLeft)
4752   222B C3 80 03                           JP      ClearForeground     ; 
4753   222E             
4754   2230                                    .ORG $2230
4755   2230             ;*****************************************************************************
4756   2230             ;* Game level 4, 6 and 8:
4757   2230             ;* Do the 'spiral fill' animation.
4758   2230             ;*****************************************************************************
4759   2230             L2230:
4760   2230 21 9C 43                           LD      HL,M439C            ; 
4761   2233 7E                                 LD      A,(HL)              ;
4762   2234 34                                 INC     (HL)                ;
4763   2235 00                                 NOP                         ;
4764   2236 0F                                 RRCA                        ;
4765   2237 E6 3F                              AND     $3F                 ; mask out 0011_1111
4766   2239 FE 0D                              CP      $0D                 ;
4767   223B CA 92 22                           JP      Z,L2292             ; 
4768   223E 06 1F                              LD      B,$1F               ; The asterisk character
4769   2240 DA 60 22                           JP      C,L2260             ; 
4770   2243 06 00                              LD      B,$00               ; The space character
4771   2245 D6 0E                              SUB     $0E                 ;
4772   2247 FE 0D                              CP      $0D                 ;
4773   2249 C2 60 22                           JP      NZ,L2260            ; 
4774   224C 21 B8 43                           LD      HL,LevelAndRound    ; 
4775   224F 34                                 INC     (HL)                ; increment game level $43B8
4776   2250 2E A4                              LD      L,$A4               ; HL=43A4 -- game state
4777   2252 36 02                              LD      (HL),$02            ; Next interval game state is 2: 'init game and level data'
4778   2254 C9                                 RET                         ;
4779   2255             
4780   2260                                    .ORG $2260
4781   2260             ;
4782   2260             L2260:
4783   2260 4F                                 LD      C,A                 ;
4784   2261 0F                                 RRCA                        ;
4785   2262 0F                                 RRCA                        ;
4786   2263 0F                                 RRCA                        ;
4787   2264 57                                 LD      D,A                 ;
4788   2265 E6 1F                              AND     $1F                 ;
4789   2267 5F                                 LD      E,A                 ;
4790   2268 7A                                 LD      A,D                 ;
4791   2269 E6 E0                              AND     $E0                 ;
4792   226B C6 B0                              ADD     $B0                 ;
4793   226D 6F                                 LD      L,A                 ;
4794   226E 7B                                 LD      A,E                 ;
4795   226F CE 41                              ADC     $41                 ;
4796   2271 67                                 LD      H,A                 ;
4797   2272 7D                                 LD      A,L                 ;
4798   2273 91                                 SUB     C                   ;
4799   2274 6F                                 LD      L,A                 ;
4800   2275 79                                 LD      A,C                 ;
4801   2276 3C                                 INC     A                   ;
4802   2277 4F                                 LD      C,A                 ;
4803   2278 07                                 RLCA                        ; Multiply by 2
4804   2279 5F                                 LD      E,A                 ;
4805   227A             ;
4806   227A             L227A:
4807   227A 51                                 LD      D,C                 ; D is the height counter for each pass
4808   227B             ;
4809   227B             L227B:
4810   227B 70                                 LD      (HL),B              ; draw the asterisk or space
4811   227C 23                                 INC     HL                  ; one row down
4812   227D 70                                 LD      (HL),B              ; another asterisk or space
4813   227E 23                                 INC     HL                  ; one row down
4814   227F 15                                 DEC     D                   ; all of this column done?
4815   2280 C2 7B 22                           JP      NZ,L227B            ; No ... do all rows
4816   2283 7D                                 LD      A,L                 ; LSB of screen pointer
4817   2284 91                                 SUB     C                   ; move up ...
4818   2285 91                                 SUB     C                   ; ... height * 2
4819   2286 D6 20                              SUB     $20                 ; Move right one column
4820   2288 6F                                 LD      L,A                 ; New LSB
4821   2289 7C                                 LD      A,H                 ; Borrow into ...
4822   228A DE 00                              SBC     $00                 ; ... the ...
4823   228C 67                                 LD      H,A                 ; ... MSB
4824   228D 1D                                 DEC     E                   ; All columns done?
4825   228E C2 7A 22                           JP      NZ,L227A            ; no ... do all columns
4826   2291 C9                                 RET                         ; Done
4827   2292             ;
4828   2292             L2292:
4829   2292 21 B8 43                           LD      HL,LevelAndRound    ; 
4830   2295 7E                                 LD      A,(HL)              ;
4831   2296 E6 08                              AND     $08                 ; mask out 0000_1000
4832   2298 CA F0 22                           JP      Z,L22F0             ; 
4833   229B 21 00 1C                           LD      HL,T1C00            ; Background stars to erase mother ship
4834   229E 11 3F 4B                           LD      DE,$4B3F            ; End of background screen memory
4835   22A1 06 47                              LD      B,$47               ;
4836   22A3             L22A3:
4837   22A3 7E                                 LD      A,(HL)              ;
4838   22A4 12                                 LD      (DE),A              ;
4839   22A5 2C                                 INC     L                   ;
4840   22A6 1B                                 DEC     DE                  ;
4841   22A7 7E                                 LD      A,(HL)              ;
4842   22A8 12                                 LD      (DE),A              ;
4843   22A9 2C                                 INC     L                   ;
4844   22AA 1B                                 DEC     DE                  ;
4845   22AB 78                                 LD      A,B                 ;
4846   22AC BA                                 CP      D                   ;
4847   22AD C2 A3 22                           JP      NZ,L22A3            ; 
4848   22B0 C3 E0 22                           JP      L22E0               ; 
4849   22B3             
4850   22B4                                    .ORG $22B4
4851   22B4             ;*****************************************************************************
4852   22B4             ;* Game level 9:
4853   22B4             ;* Mothership 'fade in' animation.
4854   22B4             ;*****************************************************************************
4855   22B4             L22B4:
4856   22B4 CD 7A 06                           CALL    StarsScrollDown     ; 
4857   22B7 21 B4 43                           LD      HL,CounterB4        ; 
4858   22BA 35                                 DEC     (HL)                ;
4859   22BB 7E                                 LD      A,(HL)              ;
4860   22BC FE 28                              CP      $28                 ;
4861   22BE C2 48 08                           JP      NZ,L0848            ; 
4862   22C1 2E 67                              LD      L,$67               ;
4863   22C3 36 FF                              LD      (HL),$FF            ;
4864   22C5 C9                                 RET                         ;
4865   22C6             
4866   22CA                                    .ORG $22CA
4867   22CA             ;*****************************************************************************
4868   22CA             ;* Game level A:
4869   22CA             ;* Mothership and aliens 'fade in'
4870   22CA             ;*****************************************************************************
4871   22CA             L22CA:
4872   22CA 21 B4 43                           LD      HL,CounterB4        ; 
4873   22CD 7E                                 LD      A,(HL)              ;
4874   22CE FE C0                              CP      $C0                 ;
4875   22D0 C2 34 08                           JP      NZ,L0834            ; Stars scrolling down and 'aliens fade in'
4876   22D3 36 30                              LD      (HL),$30            ;
4877   22D5 2E 67                              LD      L,$67               ;
4878   22D7 36 FF                              LD      (HL),$FF            ;
4879   22D9 2E BC                              LD      L,$BC               ;
4880   22DB 36 3F                              LD      (HL),$3F            ;
4881   22DD C9                                 RET                         ;
4882   22DE             
4883   22E0                                    .ORG $22E0
4884   22E0             ;
4885   22E0             L22E0:
4886   22E0 3E 71                              LD      A,$71               ; init the ...
4887   22E2             ;
4888   22E2             L22E2:
4889   22E2 32 B9 43                           LD      (CounterB9),A       ; free running 8 bit backwards counter
4890   22E5 32 00 58                           LD      (scrollRegister),A  ; 58xx scroll register
4891   22E8 C9                                 RET                         ;
4892   22E9             
4893   22F0                                    .ORG $22F0
4894   22F0             ;
4895   22F0             L22F0:
4896   22F0 CD A0 03                           CALL    ClearBackground     ; 
4897   22F3 AF                                 XOR     A                   ; A=0
4898   22F4 C3 E2 22                           JP      L22E2               ; 
4899   22F7             
4900   22FA                                    .ORG $22FA
4901   22FA             ;
4902   22FA             L22FA:
4903   22FA 21 AA 4A                           LD      HL,BackgroundScreen+$2AA
4904   22FD 06 12                              LD      B,$12               
4905   22FF 3A 8A 48                           LD      A,(BackgroundScreen+$8A)
4906   2302 4F                                 LD      C,A                 
4907   2303             L2303:
4908   2303 79                                 LD      A,C                 
4909   2304 E6 03                              AND     $03                 
4910   2306 07                                 RLCA                        ; Multiply by 4 ..
4911   2307 07                                 RLCA                        ; ..
4912   2308 57                                 LD      D,A                 
4913   2309 4E                                 LD      C,(HL)              
4914   230A 79                                 LD      A,C                 
4915   230B E6 0C                              AND     $0C                 
4916   230D 0F                                 RRCA                        
4917   230E 0F                                 RRCA                        
4918   230F B2                                 OR      D                   
4919   2310 F6 60                              OR      $60                 
4920   2312 77                                 LD      (HL),A              
4921   2313 7D                                 LD      A,L                 
4922   2314 D6 20                              SUB     $20                 
4923   2316 6F                                 LD      L,A                 
4924   2317 D2 1B 23                           JP      NC,L231B            ; 
4925   231A 25                                 DEC     H                   
4926   231B             L231B:
4927   231B 05                                 DEC     B                   
4928   231C C2 03 23                           JP      NZ,L2303            ; 
4929   231F C9                                 RET                         
4930   2320             
4931   2322                                    .ORG $2322
4932   2322             ;*****************************************************************************
4933   2322             ;* Animation of the mothership's antenna and the alien pilot.
4934   2322             ;*****************************************************************************
4935   2322             L2322:
4936   2322 21 A7 43                           LD      HL,AnimationCounter ; 
4937   2325 34                                 INC     (HL)                ; increment the animation counter
4938   2326 7E                                 LD      A,(HL)              ;
4939   2327 E6 07                              AND     $07                 ; mask out 0000_0111, in order to count from 0 to 7 for 8 frames
4940   2329 07                                 RLCA                        ; Multiply by 8 ..
4941   232A 07                                 RLCA                        ; ..to get..
4942   232B 07                                 RLCA                        ; ..the frame data adress (8 characters per frame)
4943   232C C6 C0                              ADD     T1BC0 & $FF         ; LSB of T1BC0
4944   232E 6F                                 LD      L,A                 ;
4945   232F 26 1B                              LD      H,T1BC0 >> 8        ; MSB of T1BC0
4946   2331 11 A6 49                           LD      DE,BackgroundScreen+$1A6; at the middle of the mothership
4947   2334 01 02 04                           LD      BC,$0402            ; images are 2x4
4948   2337 C3 D6 0A                           JP      DrawImageCbyB       ; 
4949   233A             ;
4950   233A             ; Bird animation frame indexes at splash intro.
4951   233A             ; Mapping to:?
4952   233A             T233A:
4953   233A 01 02 03 04                        .DB $01, $02, $03, $04, $05, $06, $07, $0A, $07, $0A, $07, $0A, $07, $0A, $07, $0A
4953   233E 05 06 07 0A 
4953   2342 07 0A 07 0A 
4953   2346 07 0A 07 0A 
4954   234A 09 08 04 03                        .DB $09, $08, $04, $03, $02, $01, $FF
4954   234E 02 01 FF 
4955   2351             ;
4956   2351             L2351:
4957   2351 1A                                 LD      A,(DE)              
4958   2352 E6 08                              AND     $08                 
4959   2354 C8                                 RET     Z                   
4960   2355 7E                                 LD      A,(HL)              
4961   2356 2C                                 INC     L                   
4962   2357 6E                                 LD      L,(HL)              
4963   2358 C6 08                              ADD     $08                 
4964   235A 67                                 LD      H,A                 
4965   235B 3A B9 43                           LD      A,(CounterB9)       ; 
4966   235E 0F                                 RRCA                        
4967   235F 0F                                 RRCA                        
4968   2360 0F                                 RRCA                        
4969   2361 85                                 ADD     A,L                 
4970   2362 E6 1F                              AND     $1F                 
4971   2364 47                                 LD      B,A                 
4972   2365 7D                                 LD      A,L                 
4973   2366 E6 E0                              AND     $E0                 
4974   2368 B0                                 OR      B                   
4975   2369 6F                                 LD      L,A                 
4976   236A 7E                                 LD      A,(HL)              
4977   236B 47                                 LD      B,A                 
4978   236C E6 FC                              AND     $FC                 
4979   236E FE 4C                              CP      $4C                 
4980   2370 CA 7B 23                           JP      Z,L237B             ; 
4981   2373 E6 F0                              AND     $F0                 
4982   2375 FE 60                              CP      $60                 
4983   2377 CA 98 23                           JP      Z,L2398             ; 
4984   237A C9                                 RET                         
4985   237B             ;
4986   237B             L237B:
4987   237B 1A                                 LD      A,(DE)              
4988   237C E6 F7                              AND     $F7                 
4989   237E 12                                 LD      (DE),A              
4990   237F 3E FF                              LD      A,$FF               
4991   2381 32 66 43                           LD      (M4366),A           ; 
4992   2384 78                                 LD      A,B                 
4993   2385 3D                                 DEC     A                   
4994   2386 77                                 LD      (HL),A              
4995   2387 FE 4B                              CP      $4B                 
4996   2389 C0                                 RET     NZ                  
4997   238A 36 00                              LD      (HL),$00            
4998   238C 2D                                 DEC     L                   
4999   238D 7E                                 LD      A,(HL)              
5000   238E FE 5E                              CP      $5E                 
5001   2390 C0                                 RET     NZ                  
5002   2391 36 4F                              LD      (HL),$4F            
5003   2393 C9                                 RET                         
5004   2394             
5005   2398                                    .ORG $2398
5006   2398             ;
5007   2398             L2398:
5008   2398 1A                                 LD      A,(DE)              
5009   2399 E6 F7                              AND     $F7                 
5010   239B 12                                 LD      (DE),A              
5011   239C 1C                                 INC     E                   
5012   239D 1C                                 INC     E                   
5013   239E 1A                                 LD      A,(DE)              
5014   239F E6 04                              AND     $04                 
5015   23A1 78                                 LD      A,B                 
5016   23A2 C2 30 20                           JP      NZ,L2030            ; 
5017   23A5 E6 0C                              AND     $0C                 
5018   23A7 FE 04                              CP      $04                 
5019   23A9 11 40 1B                           LD      DE,$1B40            
5020   23AC             L23AC:
5021   23AC CA C0 23                           JP      Z,L23C0             ; 
5022   23AF 78                                 LD      A,B                 
5023   23B0 E6 0F                              AND     $0F                 
5024   23B2 83                                 ADD     A,E                 
5025   23B3 5F                                 LD      E,A                 
5026   23B4 1A                                 LD      A,(DE)              
5027   23B5 77                                 LD      (HL),A              
5028   23B6 3E FF                              LD      A,$FF               
5029   23B8 32 66 43                           LD      (M4366),A           ; 
5030   23BB C9                                 RET                         
5031   23BC             
5032   23C0                                    .ORG $23C0
5033   23C0             L23C0:
5034   23C0 2D                                 DEC     L                   
5035   23C1 7E                                 LD      A,(HL)              
5036   23C2 E6 F0                              AND     $F0                 
5037   23C4 FE 70                              CP      $70                 
5038   23C6 C0                                 RET     NZ                  
5039   23C7 21 A4 43                           LD      HL,GameState        ; Next interval game state ...
5040   23CA 36 06                              LD      (HL),$06            ; ... is 6 (mother ship partikel explosion)
5041   23CC 2C                                 INC     L                   
5042   23CD 36 60                              LD      (HL),$60            
5043   23CF 2E 63                              LD      L,$63               
5044   23D1 36 FF                              LD      (HL),$FF            
5045   23D3 C9                                 RET                         
5046   23D4             
5047   23D6                                    .ORG $23D6
5048   23D6             ;
5049   23D6             L23D6:
5050   23D6 21 B8 43                           LD      HL,LevelAndRound    ; 
5051   23D9 7E                                 LD      A,(HL)              ;
5052   23DA E6 0F                              AND     $0F                 ; mask out 0000_1111
5053   23DC FE 01                              CP      $01                 ;
5054   23DE CA 98 3A                           JP      Z,L3A98             ; if game level is 1 (1st alien wave)
5055   23E1 FE 03                              CP      $03                 ;
5056   23E3 CA 98 3A                           JP      Z,L3A98             ; if game level is 3 (2nd alien wave)
5057   23E6 FE 05                              CP      $05                 ;
5058   23E8 CA D0 3A                           JP      Z,L3AD0             ; if game level is 5 (1st bird wave)
5059   23EB FE 07                              CP      $07                 ;
5060   23ED CA D0 3A                           JP      Z,L3AD0             ; if game level is 7 (2nd bird wave)
5061   23F0 FE 09                              CP      $09                 ;
5062   23F2 D8                                 RET     C                   ; if game level is 9 (mothership 'fade in')
5063   23F3 FE 0B                              CP      $0B                 ;
5064   23F5 DA 02 3B                           JP      C,L3B02             ; if game level is B (mothership)
5065   23F8 CD 02 3B                           CALL    L3B02               ; 
5066   23FB C3 98 3A                           JP      L3A98               ; 
5067   23FE             
5068   2400                                    .ORG $2400
5069   2400             ;*****************************************************************************
5070   2400             ;* Game state 6.
5071   2400             ;* Mother ship partikel explosion.
5072   2400             ;*****************************************************************************
5073   2400             L2400:
5074   2400 CD 2C 24                           CALL    L242C               ; 
5075   2403 CA 52 25                           JP      Z,L2552             ; 
5076   2406 FE 20                              CP      $20                 
5077   2408 DA 6A 24                           JP      C,EraseMothership   ; 
5078   240B CA 20 25                           JP      Z,L2520             ; Calculation and display of the bonus score for mothership explosion
5079   240E 47                                 LD      B,A                 
5080   240F 0F                                 RRCA                        
5081   2410 00                                 NOP                         
5082   2411 78                                 LD      A,B                 
5083   2412 D2 E8 20                           JP      NC,L20E8            ; 
5084   2415 7B                                 LD      A,E                 
5085   2416 D6 05                              SUB     $05                 
5086   2418 C6 C0                              ADD     $C0                 
5087   241A 4F                                 LD      C,A                 
5088   241B 7A                                 LD      A,D                 
5089   241C CE 00                              ADC     $00                 
5090   241E 47                                 LD      B,A                 
5091   241F 7E                                 LD      A,(HL)              
5092   2420 11 00 2A                           LD      DE,T2A00            ; get the foreground tiles of the mothership particles explosion
5093   2423 21 00 2B                           LD      HL,T2B00            ; get the control data
5094   2426 C3 85 20                           JP      L2085               ; 
5095   2429             
5096   242C                                    .ORG $242C
5097   242C             ;
5098   242C             L242C:
5099   242C 21 B9 43                           LD      HL,CounterB9        ; 
5100   242F 7E                                 LD      A,(HL)              
5101   2430 E6 F8                              AND     $F8                 
5102   2432 77                                 LD      (HL),A              
5103   2433 32 00 58                           LD      (scrollRegister),A  ; 58xx scroll register
5104   2436 11 C6 41                           LD      DE,$41C6            
5105   2439 0F                                 RRCA                        
5106   243A 0F                                 RRCA                        
5107   243B 0F                                 RRCA                        
5108   243C 47                                 LD      B,A                 
5109   243D 7B                                 LD      A,E                 
5110   243E 90                                 SUB     B                   
5111   243F E6 1F                              AND     $1F                 
5112   2441 47                                 LD      B,A                 
5113   2442 7B                                 LD      A,E                 
5114   2443 E6 E0                              AND     $E0                 
5115   2445 B0                                 OR      B                   
5116   2446 5F                                 LD      E,A                 
5117   2447 2E A5                              LD      L,$A5               
5118   2449 35                                 DEC     (HL)                
5119   244A 7E                                 LD      A,(HL)              
5120   244B C9                                 RET                         
5121   244C             
5122   244C             ;*****************************************************************************
5123   244C             ;* Game state 7.
5124   244C             ;* Mother ship score display.
5125   244C             ;*****************************************************************************
5126   244C             L244C:
5127   244C 21 A5 43                           LD      HL,CounterA5        ; 
5128   244F 35                                 DEC     (HL)                ;
5129   2450 7E                                 LD      A,(HL)              ;
5130   2451 0F                                 RRCA                        ;
5131   2452 DA F0 06                           JP      C,L06F0             ; update scroll register and fill background
5132   2455 A7                                 AND     A                   ; updates the zero flag
5133   2456 C0                                 RET     NZ                  ;
5134   2457 2D                                 DEC     L                   ;
5135   2458 36 02                              LD      (HL),$02            ;
5136   245A 2E B8                              LD      L,$B8               ;
5137   245C 7E                                 LD      A,(HL)              ;
5138   245D E6 F0                              AND     $F0                 ;
5139   245F C6 10                              ADD     $10                 ; go to next round and ..
5140   2461 77                                 LD      (HL),A              ; .. store at LevelAndRound $43B8
5141   2462 2E BA                              LD      L,$BA               ;
5142   2464 36 10                              LD      (HL),$10            ; set AliensLeft to 16
5143   2466 C3 80 03                           JP      ClearForeground     ; 
5144   2469             
5145   246A                                    .ORG $246A
5146   246A             ;
5147   246A             EraseMothership:
5148   246A 01 14 09                           LD      BC,$0914            ; 20x9 image
5149   246D 11 C6 4A                           LD      DE,$4AC6            ; Screen coordinate of mother ship
5150   2470 21 00 1C                           LD      HL,$1C00            ; Background stars to erase the mother ship
5151   2473 C3 D6 0A                           JP      DrawImageCbyB       ; Erase the mother ship
5152   2476             ;
5153   2476             L2476:
5154   2476 78                                 LD      A,B                 
5155   2477 81                                 ADD     A,C                 
5156   2478 CD 95 24                           CALL    L2495               ; 
5157   247B 2E D3                              LD      L,$D3               
5158   247D 77                                 LD      (HL),A              
5159   247E 21 BB 43                           LD      HL,BirdsLeft        ; 
5160   2481 3E 08                              LD      A,$08               ; number of birds
5161   2483 96                                 SUB     (HL)                ;
5162   2484 07                                 RLCA                        ; Multiply by 2
5163   2485 2E 9A                              LD      L,$9A               
5164   2487 86                                 ADD     A,(HL)              
5165   2488 07                                 RLCA                        ; Multiply by 2
5166   2489 47                                 LD      B,A                 
5167   248A 2E 6F                              LD      L,$6F               
5168   248C 7E                                 LD      A,(HL)              
5169   248D E6 1E                              AND     $1E                 
5170   248F 80                                 ADD     A,B                 
5171   2490 32 D1 4B                           LD      (M4BD1),A           ; 
5172   2493 C9                                 RET                         
5173   2494             
5174   2495                                    .ORG $2495
5175   2495             ;
5176   2495             L2495:
5177   2495 80                                 ADD     A,B                 
5178   2496 0D                                 DEC     C                   
5179   2497 C8                                 RET     Z                   
5180   2498 80                                 ADD     A,B                 
5181   2499 0D                                 DEC     C                   
5182   249A C8                                 RET     Z                   
5183   249B 80                                 ADD     A,B                 
5184   249C 0D                                 DEC     C                   
5185   249D C8                                 RET     Z                   
5186   249E 87                                 ADD     A,A                 
5187   249F C9                                 RET                         
5188   24A0             ;
5189   24A0             L24A0:
5190   24A0 3A B8 43                           LD      A,(LevelAndRound)   ; 
5191   24A3 E6 0F                              AND     $0F                 ; mask out 0000_1111
5192   24A5 FE 08                              CP      $08                 ;
5193   24A7 D8                                 RET     C                   ; return if game level < 8
5194   24A8 11 C4 43                           LD      DE,PlayerBulletState
5195   24AB 21 E6 43                           LD      HL,AbovePlayerBulletMSB
5196   24AE CD 51 23                           CALL    L2351               ; 
5197   24B1 3A 9B 43                           LD      A,(Counter9A+$1)    ; 
5198   24B4 E6 03                              AND     $03                 ; mask out 0000_0011
5199   24B6 FE 03                              CP      $03                 ;
5200   24B8 C0                                 RET     NZ                  ; return if <> 3
5201   24B9 C3 F2 24                           JP      L24F2               ; 
5202   24BC             
5203   24C4                                    .ORG $24C4
5204   24C4             ;
5205   24C4             L24C4:
5206   24C4 3A B8 43                           LD      A,(LevelAndRound)   ; 
5207   24C7 E6 0F                              AND     $0F                 ; mask out 0000_1111
5208   24C9 FE 08                              CP      $08                 ;
5209   24CB DA F0 06                           JP      C,L06F0             ; update scroll register and fill background if game level < 8
5210   24CE CD E0 24                           CALL    L24E0               ; 
5211   24D1 21 AA 43                           LD      HL,M43AA            ; 
5212   24D4 34                                 INC     (HL)                ;
5213   24D5 7E                                 LD      A,(HL)              ;
5214   24D6 E6 03                              AND     $03                 ; mask out 0000_0011
5215   24D8 CA FA 22                           JP      Z,L22FA             ; if $43AA <> 3
5216   24DB C3 22 23                           JP      L2322               ; Animation of the mothership's antenna and the alien pilot
5217   24DE             
5218   24E0                                    .ORG $24E0
5219   24E0             ;
5220   24E0             L24E0:
5221   24E0 3A AA 43                           LD      A,(M43AA)           ; 
5222   24E3 E6 0F                              AND     $0F                 
5223   24E5 C0                                 RET     NZ                  
5224   24E6 3A B9 43                           LD      A,(CounterB9)       ; 
5225   24E9 FE A0                              CP      $A0                 
5226   24EB D8                                 RET     C                   
5227   24EC C3 7A 06                           JP      StarsScrollDown     ; 
5228   24EF             
5229   24F2                                    .ORG $24F2
5230   24F2             ;
5231   24F2             L24F2:
5232   24F2 CD AA 30                           CALL    GetRandomNumber     ; 
5233   24F5 C6 60                              ADD     $60                 
5234   24F7 00                                 NOP                         
5235   24F8 47                                 LD      B,A                 
5236   24F9 21 9B 43                           LD      HL,Counter9A+$1    ; 
5237   24FC E6 0E                              AND     $0E                 
5238   24FE A6                                 AND     (HL)                
5239   24FF C0                                 RET     NZ                  
5240   2500 3A 9E 43                           LD      A,(M439E)           ; 
5241   2503 B8                                 CP      B                   
5242   2504 D0                                 RET     NC                  
5243   2505 3A 9F 43                           LD      A,(M439F)           ; 
5244   2508 B8                                 CP      B                   
5245   2509 D8                                 RET     C                   
5246   250A 78                                 LD      A,B                 
5247   250B D6 04                              SUB     $04                 
5248   250D 47                                 LD      B,A                 
5249   250E 3A B9 43                           LD      A,(CounterB9)       ; 
5250   2511 2F                                 CPL                         
5251   2512 3C                                 INC     A                   
5252   2513 E6 F8                              AND     $F8                 
5253   2515 C6 48                              ADD     $48                 
5254   2517 4F                                 LD      C,A                 
5255   2518 E5                                 PUSH    HL                  
5256   2519 E5                                 PUSH    HL                  
5257   251A C3 B7 25                           JP      L25B7               ; 
5258   251D             
5259   2520                                    .ORG $2520
5260   2520             ;*****************************************************************************
5261   2520             ;* The 'alien pilot' at mothership was hit.
5262   2520             ;* Calculation and display of the bonus score for mothership explosion.
5263   2520             ;*****************************************************************************
5264   2520             L2520:
5265   2520 D5                                 PUSH    DE                  ;
5266   2521 CD 80 03                           CALL    ClearForeground     ; remove all but the rest of the mothership
5267   2524 D1                                 POP     DE                  ;
5268   2525 3A B9 43                           LD      A,(CounterB9)       ; get value from 8 bit backwards counter
5269   2528 C6 60                              ADD     $60                 ; use it for a ...
5270   252A 0F                                 RRCA                        ; ... score value
5271   252B 47                                 LD      B,A                 ; save it
5272   252C 3A B8 43                           LD      A,(LevelAndRound)   ; 
5273   252F E6 F0                              AND     $F0                 ; mask out 1111_0000 (bit4 - 7: game round)
5274   2531 80                                 ADD     A,B                 ; add score value
5275   2532 06 90                              LD      B,$90               ;
5276   2534 DA 3D 25                           JP      C,L253D             ; 
5277   2537 FE 90                              CP      $90                 ;
5278   2539 D2 3D 25                           JP      NC,L253D            ; 
5279   253C 47                                 LD      B,A                 ;
5280   253D             L253D:
5281   253D AF                                 XOR     A                   ; A=0
5282   253E 78                                 LD      A,B                 ;
5283   253F 27                                 DAA                         ; adjust for BCD
5284   2540 21 9D 43                           LD      HL,M439D            ; 
5285   2543 77                                 LD      (HL),A              ; set value for fist two digits of BCD score
5286   2544 2C                                 INC     L                   ;
5287   2545 36 00                              LD      (HL),$00            ; last two digits of BCD score set to '00'
5288   2547 7B                                 LD      A,E                 ; get LSB of screen ram...
5289   2548 D6 5E                              SUB     $5E                 ; ...
5290   254A 5F                                 LD      E,A                 ; ...
5291   254B 06 04                              LD      B,$04               ; number of digits to print
5292   254D C3 C4 00                           JP      PrintNumber         ; score for mothership explosion
5293   2550             
5294   2552                                    .ORG $2552
5295   2552             ;
5296   2552             L2552:
5297   2552 2E A4                              LD      L,$A4               ;
5298   2554 36 07                              LD      (HL),$07            
5299   2556 2C                                 INC     L                   
5300   2557 36 40                              LD      (HL),$40            
5301   2559 2E 6B                              LD      L,$6B               
5302   255B 36 FF                              LD      (HL),$FF            
5303   255D C9                                 RET                         
5304   255E             
5305   2560                                    .ORG $2560
5306   2560             L2560:
5307   2560 21 93 43                           LD      HL,Counter93            ; 
5308   2563 7E                                 LD      A,(HL)              
5309   2564 E6 01                              AND     $01                 
5310   2566 07                                 RLCA                        ; Multiply by 32 ..
5311   2567 07                                 RLCA                        ; ..
5312   2568 07                                 RLCA                        ; ..
5313   2569 07                                 RLCA                        ; ..
5314   256A 07                                 RLCA                        ; ..
5315   256B C6 70                              ADD     $70                 
5316   256D 6F                                 LD      L,A                 
5317   256E 26 4B                              LD      H,$4B               
5318   2570 1E 08                              LD      E,$08               
5319   2572 3A 57 43                           LD      A,(M4357)           ; 
5320   2575 07                                 RLCA                        ; Multiply by 8 ..
5321   2576 07                                 RLCA                        ; ..
5322   2577 07                                 RLCA                        ; ..
5323   2578 00                                 NOP                         
5324   2579 C6 AD                              ADD     $AD                 
5325   257B 57                                 LD      D,A                 
5326   257C 3A 9F 43                           LD      A,(M439F)           ; 
5327   257F C6 03                              ADD     $03                 
5328   2581 4F                                 LD      C,A                 
5329   2582 3A 9E 43                           LD      A,(M439E)           ; 
5330   2585 D6 0A                              SUB     $0A                 
5331   2587 47                                 LD      B,A                 
5332   2588             L2588:
5333   2588 E5                                 PUSH    HL                  
5334   2589 CD 96 25                           CALL    L2596               ; 
5335   258C E1                                 POP     HL                  
5336   258D 7D                                 LD      A,L                 
5337   258E C6 04                              ADD     $04                 
5338   2590 6F                                 LD      L,A                 
5339   2591 1D                                 DEC     E                   
5340   2592 C2 88 25                           JP      NZ,L2588            ; 
5341   2595 C9                                 RET                         
5342   2596             ;
5343   2596             L2596:
5344   2596 7E                                 LD      A,(HL)              
5345   2597 E6 08                              AND     $08                 
5346   2599 C8                                 RET     Z                   
5347   259A 2C                                 INC     L                   
5348   259B 7E                                 LD      A,(HL)              
5349   259C FE 08                              CP      $08                 
5350   259E C8                                 RET     Z                   
5351   259F FE 88                              CP      $88                 
5352   25A1 D0                                 RET     NC                  
5353   25A2 2C                                 INC     L                   
5354   25A3 7E                                 LD      A,(HL)              
5355   25A4 B8                                 CP      B                   
5356   25A5 D8                                 RET     C                   
5357   25A6 B9                                 CP      C                   
5358   25A7 D0                                 RET     NC                  
5359   25A8 2C                                 INC     L                   
5360   25A9 7E                                 LD      A,(HL)              
5361   25AA BA                                 CP      D                   
5362   25AB D0                                 RET     NC                  
5363   25AC FE 80                              CP      $80                 
5364   25AE D8                                 RET     C                   
5365   25AF 00                                 NOP                         
5366   25B0 00                                 NOP                         
5367   25B1 00                                 NOP                         
5368   25B2 00                                 NOP                         
5369   25B3 00                                 NOP                         
5370   25B4 4F                                 LD      C,A                 
5371   25B5 2D                                 DEC     L                   
5372   25B6 46                                 LD      B,(HL)              
5373   25B7             L25B7:
5374   25B7 3A B8 43                           LD      A,(LevelAndRound)   ; 
5375   25BA 16 03                              LD      D,$03               ;
5376   25BC FE 10                              CP      $10                 ; 0001_0000
5377   25BE DA CA 25                           JP      C,L25CA             ; if game round < 1
5378   25C1 16 04                              LD      D,$04               ;
5379   25C3 FE 20                              CP      $20                 ; 0010_0000
5380   25C5 DA CA 25                           JP      C,L25CA             ; if game round < 2
5381   25C8 16 05                              LD      D,$05               ;
5382   25CA             L25CA:
5383   25CA 21 CC 43                           LD      HL,AlienBullet0State
5384   25CD             L25CD:
5385   25CD 7E                                 LD      A,(HL)              ;
5386   25CE E6 08                              AND     $08                 ; mask out 0000_1000
5387   25D0 CA E0 25                           JP      Z,L25E0             ; 
5388   25D3 7D                                 LD      A,L                 
5389   25D4 C6 04                              ADD     $04                 
5390   25D6 6F                                 LD      L,A                 
5391   25D7 15                                 DEC     D                   
5392   25D8 C2 CD 25                           JP      NZ,L25CD            ; 
5393   25DB E1                                 POP     HL                  
5394   25DC E1                                 POP     HL                  
5395   25DD C9                                 RET                         
5396   25DE             
5397   25E0                                    .ORG $25E0
5398   25E0             L25E0:
5399   25E0 78                                 LD      A,B                 
5400   25E1 C6 04                              ADD     $04                 
5401   25E3 47                                 LD      B,A                 
5402   25E4 79                                 LD      A,C                 
5403   25E5 C6 0C                              ADD     $0C                 
5404   25E7 4F                                 LD      C,A                 
5405   25E8 36 08                              LD      (HL),$08            
5406   25EA 2C                                 INC     L                   
5407   25EB 78                                 LD      A,B                 
5408   25EC 0F                                 RRCA                        
5409   25ED E6 03                              AND     $03                 
5410   25EF 57                                 LD      D,A                 
5411   25F0 79                                 LD      A,C                 
5412   25F1 E6 04                              AND     $04                 
5413   25F3 82                                 ADD     A,D                 
5414   25F4 C6 58                              ADD     $58                 
5415   25F6 77                                 LD      (HL),A              
5416   25F7 2C                                 INC     L                   
5417   25F8 70                                 LD      (HL),B              
5418   25F9 2C                                 INC     L                   
5419   25FA 71                                 LD      (HL),C              
5420   25FB E1                                 POP     HL                  
5421   25FC E1                                 POP     HL                  
5422   25FD C9                                 RET                         
5423   25FE             
5424   2600                                    .ORG $2600
5425   2600             ;*****************************************************************************
5426   2600             ;* Birds vertical movement update (with 58xx scroll register).
5427   2600             ;*****************************************************************************
5428   2600             L2600:
5429   2600 00                                 NOP                         ; Old command removed or space for a future replace patch
5430   2601 00                                 NOP                         ; ..
5431   2602 00                                 NOP                         ; ..
5432   2603 00                                 NOP                         ; ..
5433   2604 00                                 NOP                         ; ..
5434   2605 3A B9 43                           LD      A,(CounterB9)       ; 
5435   2608 2F                                 CPL                         
5436   2609 0F                                 RRCA                        
5437   260A 0F                                 RRCA                        
5438   260B 0F                                 RRCA                        
5439   260C E6 1F                              AND     $1F                 
5440   260E 21 D2 4B                           LD      HL,M4BD2            ; 
5441   2611 77                                 LD      (HL),A              
5442   2612 2C                                 INC     L                   
5443   2613 3A D1 4B                           LD      A,(M4BD1)           ; 
5444   2616 BE                                 CP      (HL)                
5445   2617 DA 50 26                           JP      C,L2650             ; 
5446   261A 3A D5 4B                           LD      A,(M4BD5)           ; 
5447   261D 57                                 LD      D,A                 
5448   261E E6 03                              AND     $03                 
5449   2620 5F                                 LD      E,A                 
5450   2621 3A 9B 43                           LD      A,(Counter9A+$1)    ; 
5451   2624 07                                 RLCA                        ; Multiply by 4 ..
5452   2625 07                                 RLCA                        ; ..
5453   2626 E6 0C                              AND     $0C                 
5454   2628 83                                 ADD     A,E                 
5455   2629 C6 D0                              ADD     $D0                 
5456   262B 6F                                 LD      L,A                 
5457   262C 26 3E                              LD      H,$3E               
5458   262E 7A                                 LD      A,D                 
5459   262F 0F                                 RRCA                        
5460   2630 0F                                 RRCA                        
5461   2631 E6 07                              AND     $07                 
5462   2633 86                                 ADD     A,(HL)              
5463   2634 57                                 LD      D,A                 
5464   2635 3A B9 43                           LD      A,(CounterB9)       ; 
5465   2638 92                                 SUB     D                   
5466   2639             L2639:
5467   2639 32 B9 43                           LD      (CounterB9),A       ; 
5468   263C 32 00 58                           LD      (scrollRegister),A  ; 58xx scroll register
5469   263F 3A 9B 43                           LD      A,(Counter9A+$1)    ; 
5470   2642 0F                                 RRCA                        
5471   2643 D2 D0 26                           JP      NC,L26D0            ; 
5472   2646 CD 68 26                           CALL    L2668               ; 
5473   2649 C3 AA 26                           JP      L26AA               ; 
5474   264C             
5475   2650                                    .ORG $2650
5476   2650             ;
5477   2650             L2650:
5478   2650 2C                                 INC     L                   ;
5479   2651 3A 9B 43                           LD      A,(Counter9A+$1)    ; 
5480   2654 07                                 RLCA                        ; Multiply by 4 ..
5481   2655 07                                 RLCA                        ; ..
5482   2656 E6 0C                              AND     $0C                 
5483   2658 86                                 ADD     A,(HL)              
5484   2659 C6 D0                              ADD     $D0                 
5485   265B 6F                                 LD      L,A                 
5486   265C 26 3E                              LD      H,$3E               
5487   265E 3A B9 43                           LD      A,(CounterB9)       ; 
5488   2661 86                                 ADD     A,(HL)              
5489   2662 C3 39 26                           JP      L2639               ; 
5490   2665 D2 AE 26                           JP      NC,L26AE            ; 
5491   2668             
5492   2668             ;
5493   2668             L2668:
5494   2668 3A 6E 43                           LD      A,(M436E)           ; 
5495   266B 00                                 NOP                         
5496   266C 47                                 LD      B,A                 
5497   266D 3A 9A 43                           LD      A,(Counter9A)       ; 
5498   2670 FE 18                              CP      $18                 
5499   2672 DA 76 26                           JP      C,L2676             ; 
5500   2675 04                                 INC     B                   
5501   2676             L2676:
5502   2676 FE 10                              CP      $10                 
5503   2678 DA 7C 26                           JP      C,L267C             ; 
5504   267B 04                                 INC     B                   
5505   267C             L267C:
5506   267C 3A BA 43                           LD      A,(AliensLeft)      ; 
5507   267F FE 03                              CP      $03                 
5508   2681 D2 85 26                           JP      NC,L2685            ; 
5509   2684 04                                 INC     B                   
5510   2685             L2685:
5511   2685 3A D6 4B                           LD      A,(M4BD6)           ; 
5512   2688 C6 E0                              ADD     $E0                 
5513   268A 6F                                 LD      L,A                 
5514   268B 26 3E                              LD      H,$3E               
5515   268D 78                                 LD      A,B                 
5516   268E BE                                 CP      (HL)                
5517   268F DA 93 26                           JP      C,L2693             ; 
5518   2692 7E                                 LD      A,(HL)              
5519   2693             L2693:
5520   2693 57                                 LD      D,A                 
5521   2694 3A BB 43                           LD      A,(BirdsLeft)       ; 
5522   2697 FE 04                              CP      $04                 
5523   2699 D2 9D 26                           JP      NC,L269D            ; 
5524   269C 14                                 INC     D                   
5525   269D             L269D:
5526   269D FE 02                              CP      $02                 
5527   269F D2 A3 26                           JP      NC,L26A3            ; 
5528   26A2 14                                 INC     D                   
5529   26A3             L26A3:
5530   26A3 7A                                 LD      A,D                 
5531   26A4 32 D5 4B                           LD      (M4BD5),A           ; 
5532   26A7 C9                                 RET                         
5533   26A8             
5534   26AA                                    .ORG $26AA
5535   26AA             L26AA:
5536   26AA 21 D3 4B                           LD      HL,M4BD3            ; 
5537   26AD 7E                                 LD      A,(HL)              
5538   26AE             L26AE:
5539   26AE 35                                 DEC     (HL)                
5540   26AF A7                                 AND     A                   ; updates the zero flag
5541   26B0 C0                                 RET     NZ                  
5542   26B1 34                                 INC     (HL)                
5543   26B2 2E D6                              LD      L,$D6               
5544   26B4 7E                                 LD      A,(HL)              
5545   26B5 FE 16                              CP      $16                 
5546   26B7 D0                                 RET     NC                  
5547   26B8 FE 08                              CP      $08                 
5548   26BA D8                                 RET     C                   
5549   26BB 2C                                 INC     L                   
5550   26BC 96                                 SUB     (HL)                
5551   26BD 07                                 RLCA                        ; Multiply by 2
5552   26BE 47                                 LD      B,A                 
5553   26BF 3A 6F 43                           LD      A,(M436F)           ; 
5554   26C2 E6 03                              AND     $03                 
5555   26C4 2E D4                              LD      L,$D4               
5556   26C6 77                                 LD      (HL),A              
5557   26C7 2F                                 CPL                         
5558   26C8 E6 03                              AND     $03                 
5559   26CA 3C                                 INC     A                   
5560   26CB 4F                                 LD      C,A                 
5561   26CC C3 76 24                           JP      L2476               ; 
5562   26CF             
5563   26D0                                    .ORG $26D0
5564   26D0             ;
5565   26D0             L26D0:
5566   26D0 21 A8 4B                           LD      HL,M4BA8            ; 
5567   26D3 01 00 08                           LD      BC,$0800            
5568   26D6 11 00 80                           LD      DE,$8000            
5569   26D9             L26D9:
5570   26D9 7E                                 LD      A,(HL)              
5571   26DA A7                                 AND     A                   ; updates the zero flag
5572   26DB CA E5 26                           JP      Z,L26E5             ; 
5573   26DE 7A                                 LD      A,D                 
5574   26DF 07                                 RLCA                        ; Multiply by 2
5575   26E0 D2 E4 26                           JP      NC,L26E4            ; 
5576   26E3 51                                 LD      D,C                 
5577   26E4             L26E4:
5578   26E4 59                                 LD      E,C                 
5579   26E5             L26E5:
5580   26E5 0C                                 INC     C                   
5581   26E6 7D                                 LD      A,L                 
5582   26E7 90                                 SUB     B                   
5583   26E8 6F                                 LD      L,A                 
5584   26E9 FE 68                              CP      $68                 
5585   26EB C2 D9 26                           JP      NZ,L26D9            ; 
5586   26EE 3A D2 4B                           LD      A,(M4BD2)           ; 
5587   26F1 82                                 ADD     A,D                 
5588   26F2 83                                 ADD     A,E                 
5589   26F3 E6 1F                              AND     $1F                 
5590   26F5 32 D6 4B                           LD      (M4BD6),A           ; 
5591   26F8 7B                                 LD      A,E                 
5592   26F9 92                                 SUB     D                   
5593   26FA 32 D7 4B                           LD      (M4BD7),A           ; 
5594   26FD C9                                 RET                         
5595   26FE             
5596   2700                                    .ORG $2700
5597   2700             ;*****************************************************************************
5598   2700             ;* Handles the scoring, and the update of sound control HW.
5599   2700             ;*****************************************************************************
5600   2700             UpdateScoresAndSound:
5601   2700 21 A2 43                           LD      HL,GameOrAttract    ; 
5602   2703 7E                                 LD      A,(HL)              ; get it
5603   2704 A7                                 AND     A                   ; updates the zero flag
5604   2705 C8                                 RET     Z                   ; if GameOrAttract is 'Attract mode'.
5605   2706 2C                                 INC     L                   ;
5606   2707 7E                                 LD      A,(HL)              ; get GameAndDemoOrSplash
5607   2708 E6 01                              AND     $01                 ; mask out 0000_0001 'Game for player 2'
5608   270A 07                                 RLCA                        ; Multiply by 4 ..
5609   270B 07                                 RLCA                        ; ..
5610   270C C6 83                              ADD     $83                 ;
5611   270E 6F                                 LD      L,A                 ;
5612   270F 3E FF                              LD      A,$FF               ;
5613   2711 32 97 43                           LD      (M4397),A           ; 
5614   2714 11 70 43                           LD      DE,M4370            ; 
5615   2717             L2717:
5616   2717 CD 48 27                           CALL    L2748               ; add score values for all enemies hit.
5617   271A 1C                                 INC     E                   ;
5618   271B 1C                                 INC     E                   ;
5619   271C 1C                                 INC     E                   ;
5620   271D 7B                                 LD      A,E                 ;
5621   271E FE 80                              CP      $80                 ; from $4370 to $4380
5622   2720 C2 17 27                           JP      NZ,L2717            ; 
5623   2723 1E 9D                              LD      E,$9D               ;
5624   2725 3A A4 43                           LD      A,(GameState)       ; 
5625   2728 FE 06                              CP      $06                 ;
5626   272A C2 39 27                           JP      NZ,L2739            ; 
5627   272D 1A                                 LD      A,(DE)              ;
5628   272E 47                                 LD      B,A                 ;
5629   272F 0E 00                              LD      C,$00               ;
5630   2731 CD 20 02                           CALL    AddToScore          ; 
5631   2734 AF                                 XOR     A                   ; A=0
5632   2735 12                                 LD      (DE),A              ;
5633   2736 32 97 43                           LD      (M4397),A           ; 
5634   2739             L2739:
5635   2739 3A 97 43                           LD      A,(M4397)           ; 
5636   273C A7                                 AND     A                   ; updates the zero flag
5637   273D CC 68 27                           CALL    Z,L2768             ; if $4397 is 0.
5638   2740 CD A8 27                           CALL    UpdateSoundControlHW
5639   2743 C3 10 3A                           JP      L3A10               ; 
5640   2746             
5641   2748                                    .ORG $2748
5642   2748             ; Add score values for enemies hit.
5643   2748             L2748:
5644   2748 1A                                 LD      A,(DE)              ; get $4370
5645   2749 1C                                 INC     E                   ;
5646   274A FE 01                              CP      $01                 ;
5647   274C C0                                 RET     NZ                  ; if not 1
5648   274D 1A                                 LD      A,(DE)              ;
5649   274E A7                                 AND     A                   ; updates the zero flag
5650   274F C8                                 RET     Z                   ;
5651   2750 0F                                 RRCA                        ; enemy has been hit
5652   2751 0F                                 RRCA                        ;
5653   2752 0F                                 RRCA                        ;
5654   2753 0F                                 RRCA                        ;
5655   2754 47                                 LD      B,A                 ;
5656   2755 E6 F0                              AND     $F0                 ;
5657   2757 4F                                 LD      C,A                 ;
5658   2758 78                                 LD      A,B                 ;
5659   2759 E6 0F                              AND     $0F                 ;
5660   275B 47                                 LD      B,A                 ;
5661   275C CD 20 02                           CALL    AddToScore          ; 
5662   275F AF                                 XOR     A                   ; Clear A Reg.
5663   2760 12                                 LD      (DE),A              ; clear the temp. score storage and ...
5664   2761 32 97 43                           LD      (M4397),A           ; ... the first two digits of BCD score value
5665   2764 C9                                 RET                         ;
5666   2765             
5667   2768                                    .ORG $2768
5668   2768             ;
5669   2768             L2768:
5670   2768 E5                                 PUSH    HL                  
5671   2769 11 61 42                           LD      DE,$4261            ; end of the screen area of player 1 score
5672   276C 06 06                              LD      B,$06               ; number of digits to print
5673   276E 3A A3 43                           LD      A,(GameAndDemoOrSplash)
5674   2771 A7                                 AND     A                   ; updates the zero flag
5675   2772 CA 78 27                           JP      Z,$2778             ; if GameAndDemoOrSplash is 'Game and demo for player 1'
5676   2775 11 21 40                           LD      DE,$4021            ; end of the screen area of player 2 score
5677   2778 CD C4 00                           CALL    PrintNumber         ; update the score on screen
5678   277B E1                                 POP     HL                  
5679   277C 11 BD 43                           LD      DE,M43BD            ; 
5680   277F EB                                 EX      DE,HL               
5681   2780 7E                                 LD      A,(HL)              
5682   2781 2C                                 INC     L                   
5683   2782 B6                                 OR      (HL)                
5684   2783 C8                                 RET     Z                   
5685   2784 2C                                 INC     L                   
5686   2785 EB                                 EX      DE,HL               
5687   2786 CD 14 03                           CALL    L0314               ; 
5688   2789 D0                                 RET     NC                  
5689   278A 3A A3 43                           LD      A,(GameAndDemoOrSplash)
5690   278D C6 90                              ADD     $90                 
5691   278F 6F                                 LD      L,A                 
5692   2790 34                                 INC     (HL)                
5693   2791 CD 67 03                           CALL    UpdateLivesScreen   ; 
5694   2794 3E FF                              LD      A,$FF               
5695   2796 32 6A 43                           LD      (M436A),A           ; 
5696   2799 2E BE                              LD      L,$BE               
5697   279B 7E                                 LD      A,(HL)              
5698   279C 36 00                              LD      (HL),$00            
5699   279E 0F                                 RRCA                        
5700   279F 0F                                 RRCA                        
5701   27A0 0F                                 RRCA                        
5702   27A1 0F                                 RRCA                        
5703   27A2 2D                                 DEC     L                   
5704   27A3 77                                 LD      (HL),A              
5705   27A4 C9                                 RET                         
5706   27A5             
5707   27A8                                    .ORG $27A8
5708   27A8             ;*****************************************************************************
5709   27A8             ;* Update the sound control hardware registers
5710   27A8             ;*****************************************************************************
5711   27A8             UpdateSoundControlHW:
5712   27A8 21 8C 43                           LD      HL,SoundControlA    ; ..
5713   27AB 7E                                 LD      A,(HL)              ; .. to
5714   27AC 32 00 60                           LD      (SOUNDCTLA),A       ; 60xx sound A
5715   27AF 2C                                 INC     L                   ; SoundControlB ..
5716   27B0 7E                                 LD      A,(HL)              ; .. to
5717   27B1 32 00 68                           LD      (SOUNDCTLB),A       ; 68xx sound B
5718   27B4 F6 0F                              OR      $0F                 ; 0000_1111
5719   27B6 77                                 LD      (HL),A              ;
5720   27B7 2D                                 DEC     L                   ;
5721   27B8 36 0F                              LD      (HL),$0F            ;
5722   27BA C9                                 RET                         ;
5723   27BB             
5724   27BD                                    .ORG $27BD
5725   27BD             ;
5726   27BD             L27BD:
5727   27BD 21 63 43                           LD      HL,ParticleExplosion
5728   27C0 7E                                 LD      A,(HL)              ;
5729   27C1 A7                                 AND     A                   ; updates the zero flag
5730   27C2 C2 E2 27                           JP      NZ,L27E2            ; if player ship was hit.
5731   27C5 2E 61                              LD      L,$61               
5732   27C7 7E                                 LD      A,(HL)              
5733   27C8 A7                                 AND     A                   ; updates the zero flag
5734   27C9 C8                                 RET     Z                   
5735   27CA FE 19                              CP      $19                 
5736   27CC D2 D8 27                           JP      NC,L27D8            ; 
5737   27CF 35                                 DEC     (HL)                
5738   27D0 2E 8C                              LD      L,$8C               
5739   27D2 7E                                 LD      A,(HL)              
5740   27D3 F6 40                              OR      $40                 
5741   27D5 77                                 LD      (HL),A              
5742   27D6 C9                                 RET                         
5743   27D7             
5744   27D8                                    .ORG $27D8
5745   27D8             L27D8:
5746   27D8 36 18                              LD      (HL),$18            
5747   27DA 2E 8C                              LD      L,$8C               
5748   27DC 7E                                 LD      A,(HL)              
5749   27DD E6 BF                              AND     $BF                 
5750   27DF 77                                 LD      (HL),A              
5751   27E0 C9                                 RET                         
5752   27E1             
5753   27E2                                    .ORG $27E2
5754   27E2             L27E2:
5755   27E2 FE 40                              CP      $40                 
5756   27E4 DA E9 27                           JP      C,L27E9             ; 
5757   27E7 36 40                              LD      (HL),$40            
5758   27E9             L27E9:
5759   27E9 35                                 DEC     (HL)                
5760   27EA 2E 8C                              LD      L,$8C               
5761   27EC 36 8F                              LD      (HL),$8F            
5762   27EE C9                                 RET                         
5763   27EF             
5764   2800                                    .ORG $2800
5765   2800             ;foreground tiles of the player ship particles explosion
5766   2800             T2800:
5767   2800 00 32 00 00                        .DB $00, $32, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $42, $42
5767   2804 00 00 00 00 
5767   2808 00 00 00 00 
5767   280C 00 00 42 42 
5768   2810 00 00 00 00                        .DB $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $E1, $00, $00, $E2, $00, $00
5768   2814 00 00 00 00 
5768   2818 00 00 E1 00 
5768   281C 00 E2 00 00 
5769   2820 32 00 00 00                        .DB $32, $00, $00, $00, $00, $00, $00, $00, $00, $E0, $00, $00, $40, $00, $00, $C3
5769   2824 00 00 00 00 
5769   2828 00 E0 00 00 
5769   282C 40 00 00 C3 
5770   2830 00 00 00 00                        .DB $00, $00, $00, $00, $00, $00, $DF, $00, $00, $E2, $00, $00, $E0, $00, $E1, $00
5770   2834 00 00 DF 00 
5770   2838 00 E2 00 00 
5770   283C E0 00 E1 00 
5771   2840 00 30 00 00                        .DB $00, $30, $00, $00, $00, $00, $DE, $00, $00, $00, $C2, $00, $40, $00, $E0, $00
5771   2844 00 00 DE 00 
5771   2848 00 00 C2 00 
5771   284C 40 00 E0 00 
5772   2850 00 00 00 30                        .DB $00, $00, $00, $30, $00, $30, $00, $5A, $00, $00, $E1, $00, $40, $00, $E2, $00
5772   2854 00 30 00 5A 
5772   2858 00 00 E1 00 
5772   285C 40 00 E2 00 
5773   2860 00 00 00 00                        .DB $00, $00, $00, $00, $00, $00, $00, $30, $C1, $3E, $00, $E0, $00, $40, $C2, $00
5773   2864 00 00 00 30 
5773   2868 C1 3E 00 E0 
5773   286C 00 40 C2 00 
5774   2870 00 00 00 00                        .DB $00, $00, $00, $00, $00, $00, $00, $00, $00, $5A, $C1, $3E, $C8, $D8, $00, $00
5774   2874 00 00 00 00 
5774   2878 00 5A C1 3E 
5774   287C C8 D8 00 00 
5775   2880 E0 E1 C2 E2                        .DB $E0, $E1, $C2, $E2, $E0, $00, $E1, $00, $C2, $00, $E2, $CE, $CA, $DA, $00, $00
5775   2884 E0 00 E1 00 
5775   2888 C2 00 E2 CE 
5775   288C CA DA 00 00 
5776   2890 00 00 00 00                        .DB $00, $00, $00, $00, $00, $00, $00, $00, $CF, $CF, $C3, $3F, $C2, $41, $E0, $00
5776   2894 00 00 00 00 
5776   2898 CF CF C3 3F 
5776   289C C2 41 E0 00 
5777   28A0 00 00 00 00                        .DB $00, $00, $00, $00, $00, $00, $00, $DE, $00, $3F, $00, $C2, $41, $00, $E1, $00
5777   28A4 00 00 00 DE 
5777   28A8 00 3F 00 C2 
5777   28AC 41 00 E1 00 
5778   28B0 00 00 00 00                        .DB $00, $00, $00, $00, $00, $3D, $DF, $3D, $00, $00, $E1, $00, $41, $00, $00, $C2
5778   28B4 00 3D DF 3D 
5778   28B8 00 00 E1 00 
5778   28BC 41 00 00 C2 
5779   28C0 00 00 00 3D                        .DB $00, $00, $00, $3D, $00, $00, $00, $00, $00, $E0, $00, $00, $41, $00, $00, $E2
5779   28C4 00 00 00 00 
5779   28C8 00 E0 00 00 
5779   28CC 41 00 00 E2 
5780   28D0 00 00 3D 00                        .DB $00, $00, $3D, $00, $00, $00, $00, $00, $E2, $00, $00, $00, $00, $4F, $00, $E0
5780   28D4 00 00 00 00 
5780   28D8 E2 00 00 00 
5780   28DC 00 4F 00 E0 
5781   28E0 00 3B 00 00                        .DB $00, $3B, $00, $00, $00, $00, $00, $00, $00, $C2, $00, $00, $00, $4F, $00, $00
5781   28E4 00 00 00 00 
5781   28E8 00 C2 00 00 
5781   28EC 00 4F 00 00 
5782   28F0 00 00 3B 00                        .DB $00, $00, $3B, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $4D, $4D
5782   28F4 00 00 00 00 
5782   28F8 00 00 00 00 
5782   28FC 00 00 4D 4D 
5783   2900             
5784   2900             ;control data of the player ship particles explosion
5785   2900             T2900:
5786   2900 00 00 00 00                        .DB $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $20, $00, $38
5786   2904 00 00 00 00 
5786   2908 00 00 00 00 
5786   290C 00 20 00 38 
5787   2910 00 34 00 28                        .DB $00, $34, $00, $28, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
5787   2914 00 00 00 00 
5787   2918 00 00 00 00 
5787   291C 00 00 00 00 
5788   2920 00 00 00 00                        .DB $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $10, $00, $02, $00, $00
5788   2924 00 00 00 00 
5788   2928 00 00 00 10 
5788   292C 00 02 00 00 
5789   2930 00 01 00 00                        .DB $00, $01, $00, $00, $12, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
5789   2934 12 00 00 00 
5789   2938 00 00 00 00 
5789   293C 00 00 00 00 
5790   2940 00 00 00 00                        .DB $00, $00, $00, $00, $00, $00, $00, $00, $00, $10, $00, $00, $80, $48, $00, $04
5790   2944 00 00 00 00 
5790   2948 00 10 00 00 
5790   294C 80 48 00 04 
5791   2950 40 08 00 50                        .DB $40, $08, $00, $50, $00, $00, $80, $10, $00, $00, $00, $00, $00, $00, $00, $00
5791   2954 00 00 80 10 
5791   2958 00 00 00 00 
5791   295C 00 00 00 00 
5792   2960 00 00 00 00                        .DB $00, $00, $00, $00, $00, $00, $00, $10, $00, $00, $20, $44, $00, $00, $00, $02
5792   2964 00 00 00 10 
5792   2968 00 00 20 44 
5792   296C 00 00 00 02 
5793   2970 10 00 00 04                        .DB $10, $00, $00, $04, $00, $48, $20, $00, $00, $10, $00, $00, $00, $00, $00, $00
5793   2974 00 48 20 00 
5793   2978 00 10 00 00 
5793   297C 00 00 00 00 
5794   2980 00 00 00 00                        .DB $00, $00, $00, $00, $00, $10, $00, $00, $00, $44, $08, $00, $00, $01, $00, $00
5794   2984 00 10 00 00 
5794   2988 00 44 08 00 
5794   298C 00 01 00 00 
5795   2990 08 00 00 02                        .DB $08, $00, $00, $02, $00, $00, $00, $84, $08, $00, $00, $20, $00, $00, $00, $00
5795   2994 00 00 00 84 
5795   2998 08 00 00 20 
5795   299C 00 00 00 00 
5796   29A0 00 00 00 20                        .DB $00, $00, $00, $20, $00, $00, $00, $42, $02, $00, $80, $00, $00, $00, $00, $00
5796   29A4 00 00 00 42 
5796   29A8 02 00 80 00 
5796   29AC 00 00 00 00 
5797   29B0 04 00 00 01                        .DB $04, $00, $00, $01, $00, $00, $00, $00, $00, $82, $04, $00, $00, $20, $00, $00
5797   29B4 00 00 00 00 
5797   29B8 00 82 04 00 
5797   29BC 00 20 00 00 
5798   29C0 00 40 00 00                        .DB $00, $40, $00, $00, $01, $82, $00, $00, $40, $00, $00, $00, $00, $00, $00, $00
5798   29C4 01 82 00 00 
5798   29C8 40 00 00 00 
5798   29CC 00 00 00 00 
5799   29D0 02 00 00 00                        .DB $02, $00, $00, $00, $80, $00, $00, $00, $00, $00, $00, $81, $02, $00, $00, $40
5799   29D4 80 00 00 00 
5799   29D8 00 00 00 81 
5799   29DC 02 00 00 40 
5800   29E0 02 80 00 04                        .DB $02, $80, $00, $04, $00, $00, $40, $00, $00, $00, $00, $00, $00, $00, $00, $00
5800   29E4 00 00 40 00 
5800   29E8 00 00 00 00 
5800   29EC 00 00 00 00 
5801   29F0 01 00 00 00                        .DB $01, $00, $00, $00, $00, $00, $40, $00, $00, $00, $00, $00, $00, $02, $04, $08
5801   29F4 00 00 40 00 
5801   29F8 00 00 00 00 
5801   29FC 00 02 04 08 
5802   2A00             
5803   2A00             ;foreground, $tiles of the mothership particles explosion
5804   2A00             T2A00:
5805   2A00 00 00 00 00                        .DB $00, $00, $00, $00, $00, $00, $00, $D2, $00, $00, $00, $00, $00, $00, $00, $00
5805   2A04 00 00 00 D2 
5805   2A08 00 00 00 00 
5805   2A0C 00 00 00 00 
5806   2A10 00 00 00 00                        .DB $00, $00, $00, $00, $00, $DE, $00, $5E, $E0, $00, $00, $E1, $00, $00, $00, $00
5806   2A14 00 DE 00 5E 
5806   2A18 E0 00 00 E1 
5806   2A1C 00 00 00 00 
5807   2A20 00 00 C1 00                        .DB $00, $00, $C1, $00, $00, $CF, $53, $E2, $00, $D2, $E0, $00, $00, $D0, $00, $00
5807   2A24 00 CF 53 E2 
5807   2A28 00 D2 E0 00 
5807   2A2C 00 D0 00 00 
5808   2A30 00 00 00 DE                        .DB $00, $00, $00, $DE, $00, $CE, $53, $E1, $D1, $E3, $00, $E1, $D3, $00, $00, $00
5808   2A34 00 CE 53 E1 
5808   2A38 D1 E3 00 E1 
5808   2A3C D3 00 00 00 
5809   2A40 00 00 CF C0                        .DB $00, $00, $CF, $C0, $DE, $DF, $53, $D3, $E2, $00, $E2, $D2, $00, $5E, $E2, $00
5809   2A44 DE DF 53 D3 
5809   2A48 E2 00 E2 D2 
5809   2A4C 00 5E E2 00 
5810   2A50 00 00 00 CE                        .DB $00, $00, $00, $CE, $C1, $C2, $DE, $D2, $E1, $E3, $D1, $00, $D2, $00, $00, $00
5810   2A54 C1 C2 DE D2 
5810   2A58 E1 E3 D1 00 
5810   2A5C D2 00 00 00 
5811   2A60 00 00 00 00                        .DB $00, $00, $00, $00, $DF, $DE, $C2, $CF, $E0, $D0, $E2, $E1, $C2, $C3, $00, $00
5811   2A64 DF DE C2 CF 
5811   2A68 E0 D0 E2 E1 
5811   2A6C C2 C3 00 00 
5812   2A70 DF DE CF CE                        .DB $DF, $DE, $CF, $CE, $DF, $DE, $CF, $C8, $D8, $5E, $CE, $00, $CF, $DE, $DF, $CE
5812   2A74 DF DE CF C8 
5812   2A78 D8 5E CE 00 
5812   2A7C CF DE DF CE 
5813   2A80 E0 E3 E2 E1                        .DB $E0, $E3, $E2, $E1, $00, $E0, $D1, $CA, $DA, $D1, $D2, $D3, $D0, $D1, $D2, $D3
5813   2A84 00 E0 D1 CA 
5813   2A88 DA D1 D2 D3 
5813   2A8C D0 D1 D2 D3 
5814   2A90 00 00 00 00                        .DB $00, $00, $00, $00, $E3, $D2, $CE, $D2, $E2, $E0, $D3, $D1, $D3, $00, $00, $00
5814   2A94 E3 D2 CE D2 
5814   2A98 E2 E0 D3 D1 
5814   2A9C D3 00 00 00 
5815   2AA0 00 00 00 E2                        .DB $00, $00, $00, $E2, $D3, $CF, $DF, $E1, $D0, $E3, $E1, $D2, $00, $00, $00, $00
5815   2AA4 D3 CF DF E1 
5815   2AA8 D0 E3 E1 D2 
5815   2AAC 00 00 00 00 
5816   2AB0 00 00 E1 D0                        .DB $00, $00, $E1, $D0, $DE, $00, $DE, $E2, $00, $D3, $53, $E2, $5E, $C1, $C0, $00
5816   2AB4 DE 00 DE E2 
5816   2AB8 00 D3 53 E2 
5816   2ABC 5E C1 C0 00 
5817   2AC0 00 00 00 DF                        .DB $00, $00, $00, $DF, $00, $00, $CF, $5E, $D1, $D2, $00, $53, $E3, $00, $00, $00
5817   2AC4 00 00 CF 5E 
5817   2AC8 D1 D2 00 53 
5817   2ACC E3 00 00 00 
5818   2AD0 00 00 CE 00                        .DB $00, $00, $CE, $00, $CF, $00, $CE, $D2, $D2, $00, $53, $00, $5E, $E0, $00, $00
5818   2AD4 CF 00 CE D2 
5818   2AD8 D2 00 53 00 
5818   2ADC 5E E0 00 00 
5819   2AE0 00 00 00 00                        .DB $00, $00, $00, $00, $00, $DE, $00, $E1, $D3, $00, $E2, $00, $00, $00, $00, $00
5819   2AE4 00 DE 00 E1 
5819   2AE8 D3 00 E2 00 
5819   2AEC 00 00 00 00 
5820   2AF0 00 00 00 00                        .DB $00, $00, $00, $00, $00, $00, $00, $5E, $D0, $00, $00, $00, $00, $00, $00, $00
5820   2AF4 00 00 00 5E 
5820   2AF8 D0 00 00 00 
5820   2AFC 00 00 00 00 
5821   2B00             
5822   2B00             ;control data of the mothership particles explosion
5823   2B00             T2B00:
5824   2B00 00 00 00 00                        .DB $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $80, $01, $40, $02, $80, $05
5824   2B04 00 00 00 00 
5824   2B08 00 00 80 01 
5824   2B0C 40 02 80 05 
5825   2B10 A0 01 40 02                        .DB $A0, $01, $40, $02, $00, $01, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
5825   2B14 00 01 00 00 
5825   2B18 00 00 00 00 
5825   2B1C 00 00 00 00 
5826   2B20 00 00 00 00                        .DB $00, $00, $00, $00, $00, $00, $80, $00, $00, $01, $20, $04, $00, $01, $40, $12
5826   2B24 00 00 80 00 
5826   2B28 00 01 20 04 
5826   2B2C 00 01 40 12 
5827   2B30 48 02 80 01                        .DB $48, $02, $80, $01, $20, $04, $00, $00, $00, $01, $00, $00, $00, $00, $00, $00
5827   2B34 20 04 00 00 
5827   2B38 00 01 00 00 
5827   2B3C 00 00 00 00 
5828   2B40 00 00 00 00                        .DB $00, $00, $00, $00, $80, $00, $00, $02, $10, $08, $00, $01, $80, $04, $A0, $21
5828   2B44 80 00 00 02 
5828   2B48 10 08 00 01 
5828   2B4C 80 04 A0 21 
5829   2B50 84 05 20 02                        .DB $84, $05, $20, $02, $80, $01, $10, $08, $00, $00, $00, $01, $00, $00, $00, $00
5829   2B54 80 01 10 08 
5829   2B58 00 00 00 01 
5829   2B5C 00 00 00 00 
5830   2B60 00 00 80 00                        .DB $00, $00, $80, $00, $00, $04, $08, $10, $00, $01, $40, $00, $40, $0A, $10, $40
5830   2B64 00 04 08 10 
5830   2B68 00 01 40 00 
5830   2B6C 40 0A 10 40 
5831   2B70 02 08 40 00                        .DB $02, $08, $40, $00, $10, $04, $80, $02, $08, $10, $00, $00, $00, $01, $00, $00
5831   2B74 10 04 80 02 
5831   2B78 08 10 00 00 
5831   2B7C 00 01 00 00 
5832   2B80 80 00 00 08                        .DB $80, $00, $00, $08, $04, $20, $00, $02, $20, $00, $20, $14, $00, $01, $08, $80
5832   2B84 04 20 00 02 
5832   2B88 20 00 20 14 
5832   2B8C 00 01 08 80 
5833   2B90 01 10 80 02                        .DB $01, $10, $80, $02, $20, $00, $08, $04, $80, $02, $04, $20, $00, $00, $00, $01
5833   2B94 20 00 08 04 
5833   2B98 80 02 04 20 
5833   2B9C 00 00 00 01 
5834   2BA0 01 01 01 01                        .DB $01, $01, $01, $01, $01, $04, $20, $00, $10, $28, $80, $02, $04, $00, $00, $04
5834   2BA4 01 04 20 00 
5834   2BA8 10 28 80 02 
5834   2BAC 04 00 00 04 
5835   2BB0 20 20 00 04                        .DB $20, $20, $00, $04, $40, $01, $10, $00, $04, $08, $80, $04, $00, $00, $00, $00
5835   2BB4 40 01 10 00 
5835   2BB8 04 08 80 04 
5835   2BBC 00 00 00 00 
5836   2BC0 00 00 00 08                        .DB $00, $00, $00, $08, $20, $00, $88, $10, $00, $44, $00, $00, $00, $10, $02, $00
5836   2BC4 20 00 88 10 
5836   2BC8 00 44 00 00 
5836   2BCC 00 10 02 00 
5837   2BD0 08 40 00 00                        .DB $08, $40, $00, $00, $00, $08, $40, $00, $08, $01, $00, $10, $80, $04, $00, $00
5837   2BD4 00 08 40 00 
5837   2BD8 08 01 00 10 
5837   2BDC 80 04 00 00 
5838   2BE0 00 00 20 00                        .DB $00, $00, $20, $00, $84, $20, $00, $08, $00, $00, $00, $00, $00, $20, $01, $00
5838   2BE4 84 20 00 08 
5838   2BE8 00 00 00 00 
5838   2BEC 00 20 01 00 
5839   2BF0 04 80 00 00                        .DB $04, $80, $00, $00, $00, $00, $00, $10, $40, $00, $04, $01, $00, $00, $80, $00
5839   2BF4 00 00 00 10 
5839   2BF8 40 00 04 01 
5839   2BFC 00 00 80 00 
5840   2C00             
5841   2C00             ; movement pattern table for aliens
5842   2C00             ; Pattern 18
5843   2C00             T2C00:
5844   2C00 0B 0C 0D 0E                        .DB $0B, $0C, $0D, $0E, $0B, $0C, $0A, $0A, $0A, $0A, $0A, $0A, $0A, $06, $06, $1E
5844   2C04 0B 0C 0A 0A 
5844   2C08 0A 0A 0A 0A 
5844   2C0C 0A 06 06 1E 
5845   2C10 03 03 1F 05                        .DB $03, $03, $1F, $05, $05, $1C, $04, $04, $04, $1D, $06, $06, $1A, $04, $04, $04
5845   2C14 05 1C 04 04 
5845   2C18 04 1D 06 06 
5845   2C1C 1A 04 04 04 
5846   2C20 1B 05 05 05                        .DB $1B, $05, $05, $05, $05, $18, $1F, $07, $07, $07, $07, $07, $07, $07, $07, $07
5846   2C24 05 18 1F 07 
5846   2C28 07 07 07 07 
5846   2C2C 07 07 07 07 
5847   2C30 00 FF FF FF                        .DB $00, $FF, $FF, $FF
5848   2C34             ; Pattern 19
5849   2C34             T2C34:
5850   2C34 05 05 1C 04                        .DB $05, $05, $1C, $04, $1D, $0A, $0A, $0A, $0A, $0A, $0A, $06
5850   2C38 1D 0A 0A 0A 
5850   2C3C 0A 0A 0A 06 
5851   2C40 06 1E 03 03                        .DB $06, $1E, $03, $03, $1F, $05, $1C, $04, $04, $1D, $0A, $06, $06, $1E, $03, $03
5851   2C44 1F 05 1C 04 
5851   2C48 04 1D 0A 06 
5851   2C4C 06 1E 03 03 
5852   2C50 1F 05 1C 04                        .DB $1F, $05, $1C, $04, $04, $1D, $0A, $06, $06, $1E, $03, $03, $1F, $05, $1C, $04
5852   2C54 04 1D 0A 06 
5852   2C58 06 1E 03 03 
5852   2C5C 1F 05 1C 04 
5853   2C60 04 1D 0A 06                        .DB $04, $1D, $0A, $06, $1E, $03, $1F, $05, $1C, $04, $1D, $06, $1E, $03, $03, $03
5853   2C64 1E 03 1F 05 
5853   2C68 1C 04 1D 06 
5853   2C6C 1E 03 03 03 
5854   2C70 03 15 16 17                        .DB $03, $15, $16, $17, $01, $01, $05, $05, $01, $01, $05, $05, $01, $01, $05, $05
5854   2C74 01 01 05 05 
5854   2C78 01 01 05 05 
5854   2C7C 01 01 05 05 
5855   2C80 01 01 05 05                        .DB $01, $01, $05, $05, $02, $02, $18, $07, $07, $07, $00, $FF, $FF, $FF, $FF, $FF
5855   2C84 02 02 18 07 
5855   2C88 07 07 00 FF 
5855   2C8C FF FF FF FF 
5856   2C90             ; Pattern 20
5857   2C90             T2C90:
5858   2C90 1C 04 04 04                        .DB $1C, $04, $04, $04, $04, $04, $04, $04, $04, $04, $04, $04, $04, $04, $04, $1D
5858   2C94 04 04 04 04 
5858   2C98 04 04 04 04 
5858   2C9C 04 04 04 1D 
5859   2CA0 06 06 06 06                        .DB $06, $06, $06, $06, $06, $06, $06, $1E, $03, $03, $03, $03, $03, $03, $1F, $05
5859   2CA4 06 06 06 1E 
5859   2CA8 03 03 03 03 
5859   2CAC 03 03 1F 05 
5860   2CB0 05 05 05 1C                        .DB $05, $05, $05, $1C, $04, $04, $1D, $06, $09, $09, $09, $1E, $03, $07, $07, $08
5860   2CB4 04 04 1D 06 
5860   2CB8 09 09 09 1E 
5860   2CBC 03 07 07 08 
5861   2CC0 08 07 07 08                        .DB $08, $07, $07, $08, $07, $00, $FF, $FF
5861   2CC4 07 00 FF FF 
5862   2CC8             ; Pattern 21
5863   2CC8             T2CC8:
5864   2CC8 05 05 05 05                        .DB $05, $05, $05, $05, $1C, $04, $04, $04
5864   2CCC 1C 04 04 04 
5865   2CD0 04 04 04 04                        .DB $04, $04, $04, $04, $04, $04, $04, $04, $04, $04, $04, $1D, $09, $09, $09, $09
5865   2CD4 04 04 04 04 
5865   2CD8 04 04 04 1D 
5865   2CDC 09 09 09 09 
5866   2CE0 0A 0A 0A 09                        .DB $0A, $0A, $0A, $09, $0A, $0A, $06, $1E, $03, $03, $03, $1F, $05, $05, $18, $03
5866   2CE4 0A 0A 06 1E 
5866   2CE8 03 03 03 1F 
5866   2CEC 05 05 18 03 
5867   2CF0 19 06 06 1E                        .DB $19, $06, $06, $1E, $03, $03, $1F, $05, $05, $05, $05, $05, $05, $05, $00, $FF
5867   2CF4 03 03 1F 05 
5867   2CF8 05 05 05 05 
5867   2CFC 05 05 00 FF 
5868   2D00             ; Pattern 22
5869   2D00             T2D00:
5870   2D00 0B 0C 0D 0E                        .DB $0B, $0C, $0D, $0E, $0B, $0C, $06, $1E, $03, $03, $03, $03, $03, $03, $03, $03
5870   2D04 0B 0C 06 1E 
5870   2D08 03 03 03 03 
5870   2D0C 03 03 03 03 
5871   2D10 03 03 03 03                        .DB $03, $03, $03, $03, $03, $03, $1F, $05, $05, $1C, $04, $04, $04, $04, $04, $04
5871   2D14 03 03 1F 05 
5871   2D18 05 1C 04 04 
5871   2D1C 04 04 04 04 
5872   2D20 04 04 04 04                        .DB $04, $04, $04, $04, $1D, $06, $06, $1E, $03, $03, $03, $03, $03, $03, $1F, $05
5872   2D24 1D 06 06 1E 
5872   2D28 03 03 03 03 
5872   2D2C 03 03 1F 05 
5873   2D30 05 05 05 05                        .DB $05, $05, $05, $05, $1C, $04, $04, $04, $04, $04, $04, $04, $04, $04, $04, $1B
5873   2D34 1C 04 04 04 
5873   2D38 04 04 04 04 
5873   2D3C 04 04 04 1B 
5874   2D40 00 FF FF FF                        .DB $00, $FF, $FF, $FF
5875   2D44             ; Pattern 23
5876   2D44             T2D44:
5877   2D44 05 05 05 18                        .DB $05, $05, $05, $18, $03, $03, $03, $03, $03, $03, $03, $03
5877   2D48 03 03 03 03 
5877   2D4C 03 03 03 03 
5878   2D50 03 19 06 06                        .DB $03, $19, $06, $06, $1A, $04, $04, $1B, $05, $05, $18, $03, $03, $03, $03, $03
5878   2D54 1A 04 04 1B 
5878   2D58 05 05 18 03 
5878   2D5C 03 03 03 03 
5879   2D60 03 03 19 06                        .DB $03, $03, $19, $06, $06, $06, $06, $06, $06, $06, $06, $06, $06, $1A, $04, $04
5879   2D64 06 06 06 06 
5879   2D68 06 06 06 06 
5879   2D6C 06 1A 04 04 
5880   2D70 1B 05 05 1C                        .DB $1B, $05, $05, $1C, $04, $04, $1D, $06, $06, $1A, $04, $04, $1B, $05, $05, $05
5880   2D74 04 04 1D 06 
5880   2D78 06 1A 04 04 
5880   2D7C 1B 05 05 05 
5881   2D80 05 05 05 05                        .DB $05, $05, $05, $05, $00, $FF, $FF, $FF
5881   2D84 00 FF FF FF 
5882   2D88             ; Pattern 24
5883   2D88             T2D88:
5884   2D88 1C 04 04 1D                        .DB $1C, $04, $04, $1D, $06, $06, $09, $0A
5884   2D8C 06 06 09 0A 
5885   2D90 0A 09 09 09                        .DB $0A, $09, $09, $09, $16, $17, $14, $03, $03, $03, $1F, $05, $05, $1C, $04, $04
5885   2D94 16 17 14 03 
5885   2D98 03 03 1F 05 
5885   2D9C 05 1C 04 04 
5886   2DA0 1D 06 06 1E                        .DB $1D, $06, $06, $1E, $03, $03, $03, $03, $07, $07, $08, $08, $07, $07, $05, $05
5886   2DA4 03 03 03 03 
5886   2DA8 07 07 08 08 
5886   2DAC 07 07 05 05 
5887   2DB0 1C 04 04 04                        .DB $1C, $04, $04, $04, $04, $04, $04, $04, $1D, $1A, $04, $1B, $00, $FF, $FF, $FF
5887   2DB4 04 04 04 04 
5887   2DB8 1D 1A 04 1B 
5887   2DBC 00 FF FF FF 
5888   2DC0             ; Pattern 25
5889   2DC0             T2DC0:
5890   2DC0 14 03 03 19                        .DB $14, $03, $03, $19, $06, $0A, $0A, $09, $09, $09, $0A, $12, $13, $10, $11, $12
5890   2DC4 06 0A 0A 09 
5890   2DC8 09 09 0A 12 
5890   2DCC 13 10 11 12 
5891   2DD0 13 10 11 12                        .DB $13, $10, $11, $12, $13, $10, $04, $04, $04, $04, $1B, $05, $18, $03, $19, $06
5891   2DD4 13 10 04 04 
5891   2DD8 04 04 1B 05 
5891   2DDC 18 03 19 06 
5892   2DE0 1A 04 1B 05                        .DB $1A, $04, $1B, $05, $18, $07, $07, $07, $08, $08, $07, $07, $07, $03, $03, $19
5892   2DE4 18 07 07 07 
5892   2DE8 08 08 07 07 
5892   2DEC 07 03 03 19 
5893   2DF0 0D 0E 00 FF                        .DB $0D, $0E, $00, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF
5893   2DF4 FF FF FF FF 
5893   2DF8 FF FF FF FF 
5893   2DFC FF FF FF FF 
5894   2E00             ; Pattern, 26
5895   2E00             T2E00:
5896   2E00 0B 0C 0D 0E                        .DB $0B, $0C, $0D, $0E, $02, $02, $02, $02, $0B, $0C, $0D, $0E, $01, $01, $14, $15
5896   2E04 02 02 02 02 
5896   2E08 0B 0C 0D 0E 
5896   2E0C 01 01 14 15 
5897   2E10 16 17 01 01                        .DB $16, $17, $01, $01, $05, $05, $05, $05, $02, $02, $02, $02, $00, $FF, $FF, $FF
5897   2E14 05 05 05 05 
5897   2E18 02 02 02 02 
5897   2E1C 00 FF FF FF 
5898   2E20             ; Pattern, 27
5899   2E20             T2E20:
5900   2E20 0B 0C 0D 0E                        .DB $0B, $0C, $0D, $0E, $0B, $0C, $0D, $0E, $02, $02, $02, $02, $02, $02, $02, $02
5900   2E24 0B 0C 0D 0E 
5900   2E28 02 02 02 02 
5900   2E2C 02 02 02 02 
5901   2E30 05 05 01 05                        .DB $05, $05, $01, $05, $05, $01, $05, $05, $01, $05, $05, $01, $00, $FF, $FF, $FF
5901   2E34 05 01 05 05 
5901   2E38 01 05 05 01 
5901   2E3C 00 FF FF FF 
5902   2E40             ; Pattern, 28
5903   2E40             T2E40:
5904   2E40 0B 0C 0D 0E                        .DB $0B, $0C, $0D, $0E, $01, $01, $01, $18, $03, $19, $06, $06, $1A, $04, $1B, $05
5904   2E44 01 01 01 18 
5904   2E48 03 19 06 06 
5904   2E4C 1A 04 1B 05 
5905   2E50 18 03 19 06                        .DB $18, $03, $19, $06, $06, $1A, $04, $04, $04, $04, $04, $04, $04, $04, $04, $1B
5905   2E54 06 1A 04 04 
5905   2E58 04 04 04 04 
5905   2E5C 04 04 04 1B 
5906   2E60 05 05 05 01                        .DB $05, $05, $05, $01, $01, $01, $01, $01, $00, $FF, $FF, $FF
5906   2E64 01 01 01 01 
5906   2E68 00 FF FF FF 
5907   2E6C             ; Pattern, 29
5908   2E6C             T2E6C:
5909   2E6C 0B 0C 0D 0E                        .DB $0B, $0C, $0D, $0E
5910   2E70 01 01 0B 0C                        .DB $01, $01, $0B, $0C, $0D, $0E, $01, $01, $05, $05, $05, $05, $01, $01, $0B, $0C
5910   2E74 0D 0E 01 01 
5910   2E78 05 05 05 05 
5910   2E7C 01 01 0B 0C 
5911   2E80 0D 0E 01 01                        .DB $0D, $0E, $01, $01, $07, $08, $08, $07, $08, $08, $08, $07, $00, $FF, $FF, $FF
5911   2E84 07 08 08 07 
5911   2E88 08 08 08 07 
5911   2E8C 00 FF FF FF 
5912   2E90             ; Pattern, 30
5913   2E90             T2E90:
5914   2E90 14 15 16 17                        .DB $14, $15, $16, $17, $14, $15, $16, $17, $14, $03, $03, $03, $03, $03, $03, $03
5914   2E94 14 15 16 17 
5914   2E98 14 03 03 03 
5914   2E9C 03 03 03 03 
5915   2EA0 03 03 03 03                        .DB $03, $03, $03, $03, $03, $19, $09, $0A, $0A, $09, $09, $0A, $0A, $12, $13, $08
5915   2EA4 03 19 09 0A 
5915   2EA8 0A 09 09 0A 
5915   2EAC 0A 12 13 08 
5916   2EB0 08 07 07 08                        .DB $08, $07, $07, $08, $08, $08, $08, $04, $04, $04, $11, $12, $13, $10, $11, $12
5916   2EB4 08 08 08 04 
5916   2EB8 04 04 11 12 
5916   2EBC 13 10 11 12 
5917   2EC0 13 00 FF FF                        .DB $13, $00, $FF, $FF
5918   2EC4             ; Pattern, 31
5919   2EC4             T2EC4:
5920   2EC4 10 11 12 13                        .DB $10, $11, $12, $13, $10, $11, $12, $13, $10, $04, $04, $04
5920   2EC8 10 11 12 13 
5920   2ECC 10 04 04 04 
5921   2ED0 04 04 04 04                        .DB $04, $04, $04, $04, $04, $04, $0A, $0A, $0A, $09, $0A, $09, $0A, $09, $16, $17
5921   2ED4 04 04 0A 0A 
5921   2ED8 0A 09 0A 09 
5921   2EDC 0A 09 16 17 
5922   2EE0 14 03 03 03                        .DB $14, $03, $03, $03, $07, $07, $07, $07, $03, $19, $06, $1A, $04, $1B, $05, $18
5922   2EE4 07 07 07 07 
5922   2EE8 03 19 06 1A 
5922   2EEC 04 1B 05 18 
5923   2EF0 07 07 07 07                        .DB $07, $07, $07, $07, $00, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF
5923   2EF4 00 FF FF FF 
5923   2EF8 FF FF FF FF 
5923   2EFC FF FF FF FF 
5924   2F00             ; Pattern, 32
5925   2F00             T2F00:
5926   2F00 05 1C 04 1D                        .DB $05, $1C, $04, $1D, $06, $06, $06, $06, $06, $09, $09, $09, $0A, $0A, $0A, $09
5926   2F04 06 06 06 06 
5926   2F08 06 09 09 09 
5926   2F0C 0A 0A 0A 09 
5927   2F10 09 16 17 14                        .DB $09, $16, $17, $14, $1F, $05, $18, $03, $19, $06, $1E, $03, $1F, $05, $18, $03
5927   2F14 1F 05 18 03 
5927   2F18 19 06 1E 03 
5927   2F1C 1F 05 18 03 
5928   2F20 19 06 1E 03                        .DB $19, $06, $1E, $03, $1F, $05, $05, $1C, $08, $08, $08, $08, $08, $08, $08, $08
5928   2F24 1F 05 05 1C 
5928   2F28 08 08 08 08 
5928   2F2C 08 08 08 08 
5929   2F30 00 FF FF FF                        .DB $00, $FF, $FF, $FF
5930   2F34             ; Pattern, 33
5931   2F34             T2F34:
5932   2F34 05 18 03 19                        .DB $05, $18, $03, $19, $06, $06, $06, $06, $0A, $0A, $09, $09
5932   2F38 06 06 06 06 
5932   2F3C 0A 0A 09 09 
5933   2F40 0A 0A 09 0A                        .DB $0A, $0A, $09, $0A, $0A, $12, $13, $10, $1B, $05, $1C, $04, $1D, $1E, $1F, $1C
5933   2F44 0A 12 13 10 
5933   2F48 1B 05 1C 04 
5933   2F4C 1D 1E 1F 1C 
5934   2F50 04 1D 06 1A                        .DB $04, $1D, $06, $1A, $04, $04, $1B, $05, $18, $07, $07, $07, $07, $08, $07, $07
5934   2F54 04 04 1B 05 
5934   2F58 18 07 07 07 
5934   2F5C 07 08 07 07 
5935   2F60 07 07 00 FF                        .DB $07, $07, $00, $FF
5936   2F64             ; Pattern, 34
5937   2F64             T2F64:
5938   2F64 0B 0C 0D 0E                        .DB $0B, $0C, $0D, $0E, $0B, $0C, $1E, $03, $19, $06, $1E, $03
5938   2F68 0B 0C 1E 03 
5938   2F6C 19 06 1E 03 
5939   2F70 19 06 1E 03                        .DB $19, $06, $1E, $03, $19, $06, $1E, $1F, $1C, $1D, $1E, $03, $03, $03, $1F, $05
5939   2F74 19 06 1E 1F 
5939   2F78 1C 1D 1E 03 
5939   2F7C 03 03 1F 05 
5940   2F80 18 03 19 06                        .DB $18, $03, $19, $06, $1E, $03, $1F, $05, $08, $08, $08, $08, $08, $08, $08, $07
5940   2F84 1E 03 1F 05 
5940   2F88 08 08 08 08 
5940   2F8C 08 08 08 07 
5941   2F90 07 08 08 08                        .DB $07, $08, $08, $08, $08, $08, $00, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF
5941   2F94 08 08 00 FF 
5941   2F98 FF FF FF FF 
5941   2F9C FF FF FF FF 
5942   2FA0             ; Pattern, 35
5943   2FA0             T2FA0:
5944   2FA0 05 05 18 03                        .DB $05, $05, $18, $03, $03, $03, $03, $03, $03, $03, $03, $19, $06, $06, $06, $06
5944   2FA4 03 03 03 03 
5944   2FA8 03 03 03 19 
5944   2FAC 06 06 06 06 
5945   2FB0 06 06 06 1A                        .DB $06, $06, $06, $1A, $04, $1B, $05, $18, $03, $03, $03, $03, $19, $06, $06, $06
5945   2FB4 04 1B 05 18 
5945   2FB8 03 03 03 03 
5945   2FBC 19 06 06 06 
5946   2FC0 1A 04 1B 05                        .DB $1A, $04, $1B, $05, $18, $03, $03, $03, $03, $19, $06, $06, $06, $1A, $04, $1B
5946   2FC4 18 03 03 03 
5946   2FC8 03 19 06 06 
5946   2FCC 06 1A 04 1B 
5947   2FD0 05 18 03 03                        .DB $05, $18, $03, $03, $03, $03, $19, $06, $06, $06, $1A, $04, $1B, $05, $18, $03
5947   2FD4 03 03 19 06 
5947   2FD8 06 06 1A 04 
5947   2FDC 1B 05 18 03 
5948   2FE0 03 19 06 06                        .DB $03, $19, $06, $06, $1A, $11, $12, $13, $02, $02, $02, $05, $05, $02, $02, $02
5948   2FE4 1A 11 12 13 
5948   2FE8 02 02 02 05 
5948   2FEC 05 02 02 02 
5949   2FF0 05 05 02 02                        .DB $05, $05, $02, $02, $02, $05, $1C, $08, $08, $07, $07, $08, $08, $08, $00, $FF
5949   2FF4 02 05 1C 08 
5949   2FF8 08 07 07 08 
5949   2FFC 08 08 00 FF 
5950   3000             
5951   3000             ;
5952   3000             L3000:
5953   3000 21 93 43                           LD      HL,Counter93        ; 
5954   3003 7E                                 LD      A,(HL)              ; load and save ram value
5955   3004 34                                 INC     (HL)                ; increment Counter93
5956   3005 E6 07                              AND     $07                 ; masc out 0000_0111 the saved value in order to count from 0 to 7
5957   3007 21 18 30                           LD      HL,T3018            ; base of jump table
5958   300A 07                                 RLCA                        ; Multiply by 2 to get a 2 byte offset
5959   300B 85                                 ADD     A,L                 ;
5960   300C 6F                                 LD      L,A                 ;
5961   300D 7E                                 LD      A,(HL)              ; get MSB from jump table
5962   300E 23                                 INC     HL                  ;
5963   300F 6E                                 LD      L,(HL)              ; get LSB from jump table
5964   3010 67                                 LD      H,A                 ;
5965   3011 E9                                 JP      (HL)                ; jump to the corresponding function
5966   3012             ; from jump table T3018 if Counter93 is 7
5967   3012             L3012:
5968   3012 C9                                 RET                         ;
5969   3013             
5970   3018                                    .ORG $3018
5971   3018             ;
5972   3018             T3018:
5973   3018                                    .MSFIRST
5974   3018 32 64                              .DW L3264 ; if Counter93 is 0
5975   301A 30 28                              .DW L3028 ; if Counter93 is 1
5976   301C 30 BA                              .DW L30BA ; if Counter93 is 2
5977   301E 31 24                              .DW L3124 ; if Counter93 is 3
5978   3020 31 5A                              .DW L315A ; if Counter93 is 4
5979   3022 31 B4                              .DW L31B4 ; if Counter93 is 5
5980   3024 32 2C                              .DW L322C ; if Counter93 is 6
5981   3026 30 12                              .DW L3012 ; if Counter93 is 7
5982   3028             
5983   3028             ; from jump table T3018 if Counter93 is 1
5984   3028             L3028:
5985   3028 21 57 43                           LD      HL,M4357            ; 
5986   302B 7E                                 LD      A,(HL)              
5987   302C FE 03                              CP      $03                 
5988   302E D0                                 RET     NC                  ; if >= 3
5989   302F 2E 50                              LD      L,$50               
5990   3031 7E                                 LD      A,(HL)              ; get $4350
5991   3032 FE 04                              CP      $04                 
5992   3034 D0                                 RET     NC                  ; if >= 4
5993   3035 2E 58                              LD      L,$58               
5994   3037 7E                                 LD      A,(HL)              ; get $4358
5995   3038 A7                                 AND     A                   ; updates the zero flag
5996   3039 CA 5C 30                           JP      Z,L305C             ; 
5997   303C 35                                 DEC     (HL)                ; $4358
5998   303D C0                                 RET     NZ                  
5999   303E 2D                                 DEC     L                   
6000   303F 34                                 INC     (HL)                ; $4357
6001   3040 2E 50                              LD      L,$50               
6002   3042 36 04                              LD      (HL),$04            ; set $4350
6003   3044 2E 53                              LD      L,$53               
6004   3046 36 10                              LD      (HL),$10            ; set $4353
6005   3048 2C                                 INC     L                   
6006   3049 36 50                              LD      (HL),$50            ; set $4354
6007   304B 2E 51                              LD      L,$51               
6008   304D 36 2E                              LD      (HL),$2E            ; set $4351
6009   304F 2C                                 INC     L                   
6010   3050 36 00                              LD      (HL),$00            ; clear $4352
6011   3052 3A C2 43                           LD      A,(PlayerShipX)     ; 
6012   3055 0F                                 RRCA                        
6013   3056 D8                                 RET     C                   
6014   3057 36 40                              LD      (HL),$40            ; set $4352
6015   3059 C9                                 RET                         
6016   305A             
6017   305C                                    .ORG $305C
6018   305C             ;
6019   305C             L305C:
6020   305C CD 74 30                           CALL    L3074               ; 
6021   305F 21 57 43                           LD      HL,M4357            ; 
6022   3062 7E                                 LD      A,(HL)              ; get $4357
6023   3063 07                                 RLCA                        ; Multiply by 4 ..
6024   3064 07                                 RLCA                        ; ..
6025   3065 00                                 NOP                         ;
6026   3066 00                                 NOP                         ;
6027   3067 81                                 ADD     A,C                 ;
6028   3068 C6 07                              ADD     $07                 ;
6029   306A 2E 58                              LD      L,$58               ;
6030   306C 77                                 LD      (HL),A              ; store to $4358
6031   306D C9                                 RET                         ;
6032   306E             
6033   3074                                    .ORG $3074
6034   3074             ;
6035   3074             L3074:
6036   3074 21 B8 43                           LD      HL,LevelAndRound    ; 
6037   3077 7E                                 LD      A,(HL)              
6038   3078 0F                                 RRCA                        
6039   3079 00                                 NOP                         
6040   307A E6 07                              AND     $07                 ; 0000_0111
6041   307C 47                                 LD      B,A                 
6042   307D 3E 07                              LD      A,$07               
6043   307F 90                                 SUB     B                   
6044   3080 4F                                 LD      C,A                 
6045   3081 7E                                 LD      A,(HL)              ; get LevelAndRound
6046   3082 FE 80                              CP      $80                 
6047   3084 DA 89 30                           JP      C,L3089             ; 
6048   3087 3E 70                              LD      A,$70               
6049   3089             L3089:
6050   3089 0F                                 RRCA                        
6051   308A 0F                                 RRCA                        
6052   308B 0F                                 RRCA                        
6053   308C 0F                                 RRCA                        
6054   308D E6 07                              AND     $07                 
6055   308F 47                                 LD      B,A                 
6056   3090 3E 07                              LD      A,$07               
6057   3092 90                                 SUB     B                   
6058   3093 81                                 ADD     A,C                 
6059   3094 4F                                 LD      C,A                 
6060   3095 3A BA 43                           LD      A,(AliensLeft)      ; 
6061   3098 D6 05                              SUB     $05                 
6062   309A D2 9F 30                           JP      NC,L309F            ; 
6063   309D 3E 10                              LD      A,$10               
6064   309F             L309F:
6065   309F 81                                 ADD     A,C                 
6066   30A0 4F                                 LD      C,A                 
6067   30A1 CD AA 30                           CALL    GetRandomNumber     ; 
6068   30A4 E6 07                              AND     $07                 
6069   30A6 81                                 ADD     A,C                 
6070   30A7 4F                                 LD      C,A                 
6071   30A8 C9                                 RET                         
6072   30A9             
6073   30AA                                    .ORG $30AA
6074   30AA             ;*****************************************************************************
6075   30AA             ;* Free running counter ($439B) and the X position of the player ship ($43C2)
6076   30AA             ;* is the base for a pseudo random number.
6077   30AA             ;* Returns A-register: $00 to $0F.
6078   30AA             ;*****************************************************************************
6079   30AA             GetRandomNumber:
6080   30AA 21 9B 43                           LD      HL,Counter9A+$1     ; 
6081   30AD 7E                                 LD      A,(HL)              ;
6082   30AE 07                                 RLCA                        ; Multiply by 8 ..
6083   30AF 07                                 RLCA                        ; ..
6084   30B0 07                                 RLCA                        ; ..
6085   30B1 E6 07                              AND     $07                 ; mask out 0000_0111 in order to count from 0 to 7
6086   30B3 2E C2                              LD      L,$C2               ; get $43C2 PlayerShipX
6087   30B5 86                                 ADD     A,(HL)              ; add to counter value
6088   30B6 E6 0F                              AND     $0F                 ; mask out 0000_1111
6089   30B8 C9                                 RET                         ;
6090   30B9             
6091   30BA                                    .ORG $30BA
6092   30BA             ; from jump table T3018 if Counter93 is 2
6093   30BA             L30BA:
6094   30BA 21 58 43                           LD      HL,M4358            ; 
6095   30BD CD DA 30                           CALL    L30DA               ; for $4359
6096   30C0 CD DA 30                           CALL    L30DA               ; for $435A
6097   30C3 CD DA 30                           CALL    L30DA               ; for $435B
6098   30C6 2E 50                              LD      L,$50               
6099   30C8 7E                                 LD      A,(HL)              ; get $4350
6100   30C9 A7                                 AND     A                   ; updates the zero flag
6101   30CA C0                                 RET     NZ                  ; if <> 0
6102   30CB 2E 55                              LD      L,$55               
6103   30CD 7E                                 LD      A,(HL)              ; get $4355
6104   30CE A7                                 AND     A                   ; updates the zero flag
6105   30CF CA E4 30                           JP      Z,L30E4             ; if 0
6106   30D2 35                                 DEC     (HL)                
6107   30D3 C0                                 RET     NZ                  
6108   30D4 2E 50                              LD      L,$50               
6109   30D6 36 01                              LD      (HL),$01            
6110   30D8 C9                                 RET                         
6111   30D9             
6112   30DA                                    .ORG $30DA
6113   30DA             ;
6114   30DA             L30DA:
6115   30DA 2C                                 INC     L                   
6116   30DB 7E                                 LD      A,(HL)              
6117   30DC A7                                 AND     A                   ; updates the zero flag
6118   30DD C8                                 RET     Z                   ; if 4359, 435A, 435B = 0
6119   30DE 35                                 DEC     (HL)                
6120   30DF C9                                 RET                         
6121   30E0             
6122   30E4                                    .ORG $30E4
6123   30E4             L30E4:
6124   30E4 CD 74 30                           CALL    L3074               ; 
6125   30E7 21 9A 43                           LD      HL,Counter9A        ; 
6126   30EA 7E                                 LD      A,(HL)              
6127   30EB FE 10                              CP      $10                 
6128   30ED DA F2 30                           JP      C,L30F2             ; 
6129   30F0 3E 0F                              LD      A,$0F               
6130   30F2             L30F2:
6131   30F2 47                                 LD      B,A                 
6132   30F3 3E 0F                              LD      A,$0F               
6133   30F5 90                                 SUB     B                   
6134   30F6 81                                 ADD     A,C                 
6135   30F7 4F                                 LD      C,A                 
6136   30F8 06 01                              LD      B,$01               
6137   30FA 2E 58                              LD      L,$58               
6138   30FC CD 12 31                           CALL    L3112               ; for $4359
6139   30FF CD 12 31                           CALL    L3112               ; for $435A
6140   3102 CD 12 31                           CALL    L3112               ; for $435B
6141   3105 79                                 LD      A,C                 
6142   3106 0F                                 RRCA                        
6143   3107 0F                                 RRCA                        
6144   3108 E6 3F                              AND     $3F                 ; 0011_1111
6145   310A C6 01                              ADD     $01                 
6146   310C 2E 55                              LD      L,$55               
6147   310E 77                                 LD      (HL),A              ; set $4355
6148   310F C9                                 RET                         
6149   3110             
6150   3112                                    .ORG $3112
6151   3112             ;
6152   3112             L3112:
6153   3112 2C                                 INC     L                   
6154   3113 7E                                 LD      A,(HL)              
6155   3114 A7                                 AND     A                   ; updates the zero flag
6156   3115 C0                                 RET     NZ                  ; if <> 0
6157   3116 79                                 LD      A,C                 
6158   3117 0F                                 RRCA                        
6159   3118 E6 7F                              AND     $7F                 ; 0111_1111
6160   311A 4F                                 LD      C,A                 
6161   311B 78                                 LD      A,B                 
6162   311C A7                                 AND     A                   ; updates the zero flag
6163   311D C8                                 RET     Z                   
6164   311E 05                                 DEC     B                   
6165   311F 36 0C                              LD      (HL),$0C            
6166   3121 C9                                 RET                         
6167   3122             
6168   3124                                    .ORG $3124
6169   3124             ; from jump table T3018 if Counter93 is 3
6170   3124             L3124:
6171   3124 21 50 43                           LD      HL,M4350            ; 
6172   3127 7E                                 LD      A,(HL)              
6173   3128 FE 01                              CP      $01                 
6174   312A C0                                 RET     NZ                  ; if <> 1
6175   312B 36 02                              LD      (HL),$02            ; set $4350
6176   312D 2E B8                              LD      L,$B8               
6177   312F 7E                                 LD      A,(HL)              ; get LevelAndRound
6178   3130 0F                                 RRCA                        
6179   3131 0F                                 RRCA                        
6180   3132 E6 0F                              AND     $0F                 
6181   3134 C6 05                              ADD     $05                 
6182   3136 FE 11                              CP      $11                 
6183   3138 DA 3D 31                           JP      C,L313D             ; 
6184   313B 3E 05                              LD      A,$05               
6185   313D             L313D:
6186   313D 2E 57                              LD      L,$57               
6187   313F 96                                 SUB     (HL)                
6188   3140 47                                 LD      B,A                 
6189   3141 CD AA 30                           CALL    GetRandomNumber     ; 
6190   3144 3C                                 INC     A                   
6191   3145 B8                                 CP      B                   
6192   3146 DA 4B 31                           JP      C,L314B             ; 
6193   3149 3E 01                              LD      A,$01               
6194   314B             L314B:
6195   314B 2E 53                              LD      L,$53               
6196   314D 77                                 LD      (HL),A              
6197   314E C9                                 RET                         
6198   314F             
6199   315A                                    .ORG $315A
6200   315A             ; from jump table T3018 if Counter93 is 4
6201   315A             L315A:
6202   315A 21 50 43                           LD      HL,M4350            ; 
6203   315D 7E                                 LD      A,(HL)              
6204   315E FE 02                              CP      $02                 
6205   3160 C0                                 RET     NZ                  ; if <> 2
6206   3161 CD AA 30                           CALL    GetRandomNumber     ; 
6207   3164 00                                 NOP                         
6208   3165 47                                 LD      B,A                 
6209   3166 07                                 RLCA                        ; Multiply by 2
6210   3167 C6 50                              ADD     $50                 
6211   3169 6F                                 LD      L,A                 
6212   316A 26 4B                              LD      H,$4B               
6213   316C 78                                 LD      A,B                 
6214   316D 07                                 RLCA                        ; Multiply by 4 ..
6215   316E 07                                 RLCA                        ;
6216   316F C6 70                              ADD     $70                 
6217   3171 5F                                 LD      E,A                 
6218   3172 16 4B                              LD      D,$4B               
6219   3174 0E 10                              LD      C,$10               
6220   3176 79                                 LD      A,C                 
6221   3177 90                                 SUB     B                   
6222   3178 47                                 LD      B,A                 
6223   3179             L3179:
6224   3179 CD 92 31                           CALL    L3192               ; 
6225   317C 13                                 INC     DE                  
6226   317D 13                                 INC     DE                  
6227   317E 13                                 INC     DE                  
6228   317F 13                                 INC     DE                  
6229   3180 23                                 INC     HL                  
6230   3181 23                                 INC     HL                  
6231   3182 05                                 DEC     B                   
6232   3183 C2 8A 31                           JP      NZ,L318A            ; 
6233   3186 1E 70                              LD      E,$70               
6234   3188 2E 50                              LD      L,$50               
6235   318A             L318A:
6236   318A 0D                                 DEC     C                   
6237   318B C2 79 31                           JP      NZ,L3179            ; 
6238   318E C9                                 RET                         
6239   318F             
6240   3192                                    .ORG $3192
6241   3192             ;
6242   3192             L3192:
6243   3192 1A                                 LD      A,(DE)              
6244   3193 E6 08                              AND     $08                 
6245   3195 C8                                 RET     Z                   
6246   3196 3A 94 43                           LD      A,(M4394)           ; 
6247   3199 BE                                 CP      (HL)                
6248   319A C0                                 RET     NZ                  
6249   319B 3A 56 43                           LD      A,(M4356)           ; 
6250   319E 2C                                 INC     L                   
6251   319F 46                                 LD      B,(HL)              
6252   31A0 2D                                 DEC     L                   
6253   31A1 B8                                 CP      B                   
6254   31A2 C0                                 RET     NZ                  
6255   31A3 7D                                 LD      A,L                 
6256   31A4 32 54 43                           LD      (M4354),A           ; 
6257   31A7 3E 03                              LD      A,$03               
6258   31A9 32 50 43                           LD      (M4350),A           ; 
6259   31AC E1                                 POP     HL                  
6260   31AD C9                                 RET                         
6261   31AE             
6262   31B4                                    .ORG $31B4
6263   31B4             ; from jump table T3018 if Counter93 is 5
6264   31B4             L31B4:
6265   31B4 3A 50 43                           LD      A,(M4350)           ; 
6266   31B7 FE 03                              CP      $03                 
6267   31B9 C0                                 RET     NZ                  ; if <> 3
6268   31BA 3A 54 43                           LD      A,(M4354)           ; 
6269   31BD D6 50                              SUB     $50                 
6270   31BF 07                                 RLCA                        ; Multiply by 2
6271   31C0 C6 72                              ADD     $72                 
6272   31C2 6F                                 LD      L,A                 
6273   31C3 26 4B                              LD      H,$4B               
6274   31C5 46                                 LD      B,(HL)              
6275   31C6 2C                                 INC     L                   
6276   31C7 56                                 LD      D,(HL)              
6277   31C8 3A C2 43                           LD      A,(PlayerShipX)     ; 
6278   31CB 0E 04                              LD      C,$04               
6279   31CD B8                                 CP      B                   
6280   31CE D2 D6 31                           JP      NC,L31D6            ; 
6281   31D1 4F                                 LD      C,A                 
6282   31D2 78                                 LD      A,B                 
6283   31D3 41                                 LD      B,C                 
6284   31D4 0E 00                              LD      C,$00               
6285   31D6             L31D6:
6286   31D6 90                                 SUB     B                   
6287   31D7 07                                 RLCA                        ; Multiply by 8 ..
6288   31D8 07                                 RLCA                        ; ..
6289   31D9 07                                 RLCA                        ; ..
6290   31DA E6 07                              AND     $07                 
6291   31DC C6 00                              ADD     $00                 ; LSB for table T3300
6292   31DE 6F                                 LD      L,A                 
6293   31DF 26 33                              LD      H,$33               ; get MSB for table T3300
6294   31E1 7E                                 LD      A,(HL)              
6295   31E2 81                                 ADD     A,C                 
6296   31E3 07                                 RLCA                        ; Multiply by 4 ..
6297   31E4 07                                 RLCA                        ; ..
6298   31E5 4F                                 LD      C,A                 
6299   31E6 00                                 NOP                         
6300   31E7 00                                 NOP                         
6301   31E8 00                                 NOP                         
6302   31E9 3A 57 43                           LD      A,(M4357)           ; 
6303   31EC 47                                 LD      B,A                 
6304   31ED CD 10 32                           CALL    L3210               ; 
6305   31F0 79                                 LD      A,C                 
6306   31F1 80                                 ADD     A,B                 
6307   31F2 C6 10                              ADD     $10                 ; LSB for table T3310
6308   31F4 6F                                 LD      L,A                 
6309   31F5 26 33                              LD      H,$33               ; get MSB for table T3310
6310   31F7 4E                                 LD      C,(HL)              
6311   31F8 CD AA 30                           CALL    GetRandomNumber     ; 
6312   31FB E6 06                              AND     $06                 
6313   31FD 81                                 ADD     A,C                 
6314   31FE 6F                                 LD      L,A                 
6315   31FF 26 33                              LD      H,$33               ; get MSB for table T3330 (base adresses of closed loops pattern tables for aliens)
6316   3201 7E                                 LD      A,(HL)              
6317   3202 2C                                 INC     L                   
6318   3203 46                                 LD      B,(HL)              
6319   3204 21 50 43                           LD      HL,M4350            ; 
6320   3207 36 05                              LD      (HL),$05            
6321   3209 2C                                 INC     L                   
6322   320A 77                                 LD      (HL),A              
6323   320B 2C                                 INC     L                   
6324   320C 70                                 LD      (HL),B              
6325   320D C9                                 RET                         
6326   320E             
6327   3210                                    .ORG $3210
6328   3210             ;
6329   3210             L3210:
6330   3210 3A 53 43                           LD      A,(M4353)           ; 
6331   3213 FE 01                              CP      $01                 
6332   3215 C0                                 RET     NZ                  ; if <> 1
6333   3216 7A                                 LD      A,D                 
6334   3217 06 00                              LD      B,$00               
6335   3219 FE 58                              CP      $58                 
6336   321B D8                                 RET     C                   
6337   321C 06 01                              LD      B,$01               
6338   321E FE 78                              CP      $78                 
6339   3220 D8                                 RET     C                   
6340   3221 06 02                              LD      B,$02               
6341   3223 FE 98                              CP      $98                 
6342   3225 D8                                 RET     C                   
6343   3226 06 03                              LD      B,$03               
6344   3228 C9                                 RET                         
6345   3229             
6346   322C                                    .ORG $322C
6347   322C             ; from jump table T3018 if Counter93 is 6
6348   322C             L322C:
6349   322C 3A 50 43                           LD      A,(M4350)           ; 
6350   322F FE 04                              CP      $04                 
6351   3231 C0                                 RET     NZ                  ; if <> 4
6352   3232 21 50 4B                           LD      HL,M4B50            ; Pointer to alien movement pattern
6353   3235 11 70 4B                           LD      DE,M4B70            ; Alien data structure (grid)
6354   3238 3A 56 43                           LD      A,(M4356)           ; 
6355   323B 4F                                 LD      C,A                 
6356   323C 3A 94 43                           LD      A,(M4394)           ; 
6357   323F 47                                 LD      B,A                 
6358   3240             L3240:
6359   3240 1A                                 LD      A,(DE)              
6360   3241 E6 08                              AND     $08                 
6361   3243 CA 4E 32                           JP      Z,L324E             ; 
6362   3246 7E                                 LD      A,(HL)              
6363   3247 B8                                 CP      B                   
6364   3248 C0                                 RET     NZ                  
6365   3249 2C                                 INC     L                   
6366   324A 7E                                 LD      A,(HL)              
6367   324B 2D                                 DEC     L                   
6368   324C B9                                 CP      C                   
6369   324D C0                                 RET     NZ                  
6370   324E             L324E:
6371   324E 2C                                 INC     L                   
6372   324F 2C                                 INC     L                   
6373   3250 7B                                 LD      A,E                 
6374   3251 C6 04                              ADD     $04                 
6375   3253 5F                                 LD      E,A                 
6376   3254 FE B0                              CP      $B0                 
6377   3256 C2 40 32                           JP      NZ,L3240            ; 
6378   3259 3E 06                              LD      A,$06               
6379   325B 32 50 43                           LD      (M4350),A           ; 
6380   325E C9                                 RET                         
6381   325F             
6382   3264                                    .ORG $3264
6383   3264             ; from jump table T3018 if Counter93 is 0
6384   3264             L3264:
6385   3264 21 95 43                           LD      HL,M4395            ; 
6386   3267 7E                                 LD      A,(HL)              ;
6387   3268 32 56 43                           LD      (M4356),A           ; 
6388   326B 3C                                 INC     A                   
6389   326C E6 0F                              AND     $0F                 ; 0000_1111
6390   326E 77                                 LD      (HL),A              
6391   326F 2E 50                              LD      L,$50               
6392   3271 7E                                 LD      A,(HL)              ; get $4350
6393   3272 FE 05                              CP      $05                 
6394   3274 D8                                 RET     C                   ; if < 5
6395   3275 36 00                              LD      (HL),$00            ; clear $4350
6396   3277 2E 53                              LD      L,$53               
6397   3279 4E                                 LD      C,(HL)              ; get $4353
6398   327A 2C                                 INC     L                   
6399   327B 6E                                 LD      L,(HL)              ; get $4354
6400   327C 26 4B                              LD      H,$4B               
6401   327E 3A 56 43                           LD      A,(M4356)           ; 
6402   3281 57                                 LD      D,A                 
6403   3282 3A 94 43                           LD      A,(M4394)           ; 
6404   3285 5F                                 LD      E,A                 
6405   3286 7D                                 LD      A,L                 
6406   3287 D6 50                              SUB     $50                 
6407   3289 0F                                 RRCA                        
6408   328A 47                                 LD      B,A                 
6409   328B 3E 10                              LD      A,$10               
6410   328D 90                                 SUB     B                   
6411   328E 47                                 LD      B,A                 
6412   328F             L328F:
6413   328F 7E                                 LD      A,(HL)              
6414   3290 2C                                 INC     L                   
6415   3291 BB                                 CP      E                   
6416   3292 C2 A4 32                           JP      NZ,L32A4            ; 
6417   3295 7E                                 LD      A,(HL)              
6418   3296 BA                                 CP      D                   
6419   3297 C2 A4 32                           JP      NZ,L32A4            ; 
6420   329A 2D                                 DEC     L                   
6421   329B 3A 51 43                           LD      A,(M4351)           ; 
6422   329E 77                                 LD      (HL),A              
6423   329F 2C                                 INC     L                   
6424   32A0 3A 52 43                           LD      A,(M4352)           ; 
6425   32A3 77                                 LD      (HL),A              
6426   32A4             L32A4:
6427   32A4 2C                                 INC     L                   
6428   32A5 05                                 DEC     B                   
6429   32A6 C2 AB 32                           JP      NZ,L32AB            ; 
6430   32A9 2E 50                              LD      L,$50               
6431   32AB             L32AB:
6432   32AB 0D                                 DEC     C                   
6433   32AC C2 8F 32                           JP      NZ,L328F            ; 
6434   32AF C9                                 RET                         
6435   32B0             
6436   32B0             ;
6437   32B0             L32B0:
6438   32B0 21 50 43                           LD      HL,M4350            ; 
6439   32B3 06 30                              LD      B,$30               ; 4350 to 437F
6440   32B5 CD D8 05                           CALL    ClearBbytesAtHL     ; 
6441   32B8 2E 9A                              LD      L,$9A               ;
6442   32BA 06 04                              LD      B,$04               ; 439A to 439D
6443   32BC CD D8 05                           CALL    ClearBbytesAtHL     ; 
6444   32BF 3A BB 43                           LD      A,(BirdsLeft)       ; 
6445   32C2 A7                                 AND     A                   ; updates the zero flag
6446   32C3 C8                                 RET     Z                   ; if no BirdsLeft
6447   32C4 07                                 RLCA                        ; Multiply by 8 ..
6448   32C5 07                                 RLCA                        ; ..
6449   32C6 07                                 RLCA                        ; ..
6450   32C7 4F                                 LD      C,A                 
6451   32C8 21 70 4B                           LD      HL,M4B70            ; 
6452   32CB 06 40                              LD      B,$40               
6453   32CD CD D8 05                           CALL    ClearBbytesAtHL     ; 
6454   32D0 16 4B                              LD      D,$4B               
6455   32D2 26 3F                              LD      H,$3F               
6456   32D4 3E 40                              LD      A,$40               
6457   32D6 91                                 SUB     C                   
6458   32D7 C6 70                              ADD     $70                 
6459   32D9 5F                                 LD      E,A                 
6460   32DA C6 10                              ADD     $10                 
6461   32DC 6F                                 LD      L,A                 
6462   32DD 41                                 LD      B,C                 
6463   32DE 3A B8 43                           LD      A,(LevelAndRound)   ; 
6464   32E1 0F                                 RRCA                        
6465   32E2 0F                                 RRCA                        
6466   32E3 D2 E0 05                           JP      NC,CopyBbytesHLtoDE ; 
6467   32E6 7D                                 LD      A,L                 
6468   32E7 C6 40                              ADD     $40                 
6469   32E9 6F                                 LD      L,A                 
6470   32EA C3 E0 05                           JP      CopyBbytesHLtoDE    ; 
6471   32ED             
6472   3300                                    .ORG $3300
6473   3300             ;?
6474   3300             T3300:
6475   3300 00 01 02 02                        .DB $00, $01, $02, $02, $03, $03, $03, $03
6475   3304 03 03 03 03 
6476   3308 FF FF FF FF                        .DB $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF
6476   330C FF FF FF FF 
6477   3310             ;?
6478   3310             T3310:
6479   3310 88 90 98 A0                        .DB $88, $90, $98, $A0, $68, $70, $78, $80, $48, $50, $58, $60, $48, $30, $38, $40
6479   3314 68 70 78 80 
6479   3318 48 50 58 60 
6479   331C 48 30 38 40 
6480   3320 88 90 98 A0                        .DB $88, $90, $98, $A0, $A8, $B0, $B8, $C0, $C8, $D0, $D8, $E0, $C8, $E8, $F0, $F8
6480   3324 A8 B0 B8 C0 
6480   3328 C8 D0 D8 E0 
6480   332C C8 E8 F0 F8 
6481   3330             
6482   3330             ; Base adresses of closed loops pattern tables for aliens.
6483   3330             ; T1130, T2C00, T2FA0...
6484   3330             T3330:
6485   3330                                    .MSFIRST
6486   3330 11 30 2C 00                        .DW T1130, T2C00, T2FA0, T2C00, T2EC4, T2FA0, T2F34, T2FA0
6486   3334 2F A0 2C 00 
6486   3338 2E C4 2F A0 
6486   333C 2F 34 2F A0 
6487   3340 2C C8 2E C4                        .DW T2CC8, T2EC4, T2E20, T2EC4, T1130, T139C, T13D0, T2C00
6487   3344 2E 20 2E C4 
6487   3348 11 30 13 9C 
6487   334C 13 D0 2C 00 
6488   3350 11 30 13 28                        .DW T1130, T1328, T2C00, T2F34, T11A4, T2C90, T2F34, T2FA0
6488   3354 2C 00 2F 34 
6488   3358 11 A4 2C 90 
6488   335C 2F 34 2F A0 
6489   3360 2C 90 2C C8                        .DW T2C90, T2CC8, T2E20, T2EC4, T1160, T1354, T139C, T13D0
6489   3364 2E 20 2E C4 
6489   3368 11 60 13 54 
6489   336C 13 9C 13 D0 
6490   3370 10 20 10 64                        .DW T1020, T1064, T11A4, T1328, T1020, T11A4, T1200, T2F34
6490   3374 11 A4 13 28 
6490   3378 10 20 11 A4 
6490   337C 12 00 2F 34 
6491   3380 2C 90 2C C8                        .DW T2C90, T2CC8, T2DC0, T2E20, T1160, T1244, T1288, T1354
6491   3384 2D C0 2E 20 
6491   3388 11 60 12 44 
6491   338C 12 88 13 54 
6492   3390 10 20 10 64                        .DW T1020, T1064, T1200, T1244, T1020, T1200, T1020, T1200
6492   3394 12 00 12 44 
6492   3398 10 20 12 00 
6492   339C 10 20 12 00 
6493   33A0 10 A8 2D 88                        .DW T10A8, T2D88, T10A8, T2DC0, T11D0, T12CA, T1300, T1354
6493   33A4 10 A8 2D C0 
6493   33A8 11 D0 12 CA 
6493   33AC 13 00 13 54 
6494   33B0 10 20 10 64                        .DW T1020, T1064, T10D4, T1300, T1020, T10D4, T1200, T2F00
6494   33B4 10 D4 13 00 
6494   33B8 10 20 10 D4 
6494   33BC 12 00 2F 00 
6495   33C0 2D 00 2D 44                        .DW T2D00, T2D44, T2D88, T2E6C, T1100, T11D0, T12CA, T2F64
6495   33C4 2D 88 2E 6C 
6495   33C8 11 00 11 D0 
6495   33CC 12 CA 2F 64 
6496   33D0 11 00 13 00                        .DW T1100, T1300, T2F64, T2F00, T10D4, T2D00, T2F00, T2C34
6496   33D4 2F 64 2F 00 
6496   33D8 10 D4 2D 00 
6496   33DC 2F 00 2C 34 
6497   33E0 2D 00 2D 44                        .DW T2D00, T2D44, T2E6C, T2E90, T1100, T2C34, T2F64, T2F64
6497   33E4 2E 6C 2E 90 
6497   33E8 11 00 2C 34 
6497   33EC 2F 64 2F 64 
6498   33F0 2E 90 2F 00                        .DW T2E90, T2F00, T2C34, T2C34, T2D44, T2E6C, T2E90, T2E90
6498   33F4 2C 34 2C 34 
6498   33F8 2D 44 2E 6C 
6498   33FC 2E 90 2E 90 
6499   3400             
6500   3400             ;*****************************************************************************
6501   3400             ;* Game level 7
6502   3400             ;* birds level including 'fade in'
6503   3400             ;*****************************************************************************
6504   3400             L3400:
6505   3400 CD 76 08                           CALL    PlayerUpdate        ; Updates the player ship, player bullet and the shield.
6506   3403 CD 00 38                           CALL    L3800               ; Collision detection for birds
6507   3406 CD 00 26                           CALL    L2600               ; birds vertical movement update (with 58xx scroll register)
6508   3409 CD 00 38                           CALL    L3800               ; Collision detection for birds
6509   340C CD 80 39                           CALL    L3980               ; 
6510   340F 3A BB 43                           LD      A,(BirdsLeft)       ; 
6511   3412 A7                                 AND     A                   ; updates the zero flag
6512   3413 CA 62 34                           JP      Z,L3462             ; if no BirdsLeft.
6513   3416 FE 04                              CP      $04                 ;
6514   3418 D2 38 34                           JP      NC,L3438            ; 
6515   341B CD 74 34                           CALL    DrawFirst4BirdObjects ; including the horizontal movement update
6516   341E CD 86 34                           CALL    DrawSecond4BirdObjects ; including the horizontal movement update
6517   3421 CD 60 35                           CALL    L3560               ; 
6518   3424 CD 98 34                           CALL    L3498               ; 
6519   3427 CD AA 34                           CALL    L34AA               ; 
6520   342A 3A 9B 43                           LD      A,(Counter9A+$1)    ; 
6521   342D 0F                                 RRCA                        
6522   342E DA C0 0F                           JP      C,L0FC0             ; Handle animations for killed aliens
6523   3431 CD 30 39                           CALL    L3930               ; 
6524   3434 C3 40 0C                           JP      L0C40               ; 
6525   3437             
6526   3438                                    .ORG $3438
6527   3438             ;
6528   3438             L3438:
6529   3438 3A 9B 43                           LD      A,(Counter9A+$1)    ; 
6530   343B 0F                                 RRCA                        
6531   343C DA 52 34                           JP      C,L3452             ; 
6532   343F CD 74 34                           CALL    DrawFirst4BirdObjects
6533   3442 CD 60 35                           CALL    L3560               ; 
6534   3445 CD 98 34                           CALL    L3498               ; 
6535   3448 CD 30 39                           CALL    L3930               ; 
6536   344B C3 40 0C                           JP      L0C40               ; 
6537   344E             
6538   3452                                    .ORG $3452
6539   3452             ;
6540   3452             L3452:
6541   3452 CD 86 34                           CALL    DrawSecond4BirdObjects
6542   3455 CD 60 35                           CALL    L3560               ; 
6543   3458 CD AA 34                           CALL    L34AA               ; 
6544   345B C3 C0 0F                           JP      L0FC0               ; Handle animations for killed aliens
6545   345E             
6546   3462                                    .ORG $3462
6547   3462             ;
6548   3462             L3462:
6549   3462 3A 9B 43                           LD      A,(Counter9A+$1)    ; 
6550   3465 0F                                 RRCA                        
6551   3466 D8                                 RET     C                   
6552   3467 CD 40 0C                           CALL    L0C40               ; 
6553   346A CD C0 0F                           CALL    L0FC0               ; Handle animations for killed aliens
6554   346D C3 04 22                           JP      L2204               ; 
6555   3470             
6556   3474                                    .ORG $3474
6557   3474             ;*****************************************************************************
6558   3474             ;* Draw bird objects 0 to 3.
6559   3474             ;* Including the horizontal movement update.
6560   3474             ;*****************************************************************************
6561   3474             DrawFirst4BirdObjects:
6562   3474 21 70 4B                           LD      HL,B4B70            ; 
6563   3477             ;
6564   3477             L3477:
6565   3477 E5                                 PUSH    HL                  ;
6566   3478 CD C0 34                           CALL    DrawBirdObject      ; 
6567   347B E1                                 POP     HL                  ;
6568   347C 7D                                 LD      A,L                 ;
6569   347D C6 08                              ADD     $08                 ; go to next bird object
6570   347F 6F                                 LD      L,A                 ;
6571   3480 FE 90                              CP      $90                 ; for bird0 to bird3
6572   3482 C2 77 34                           JP      NZ,L3477            ; 
6573   3485 C9                                 RET                         ;
6574   3486             
6575   3486             ;*****************************************************************************
6576   3486             ;* Draw bird objects 4 to 7.
6577   3486             ;* Including the horizontal movement update.
6578   3486             ;*****************************************************************************
6579   3486             DrawSecond4BirdObjects:
6580   3486 21 90 4B                           LD      HL,B4B90            ; 
6581   3489             ;
6582   3489             L3489:
6583   3489 E5                                 PUSH    HL                  ;
6584   348A CD C0 34                           CALL    DrawBirdObject      ; 
6585   348D E1                                 POP     HL                  ;
6586   348E 7D                                 LD      A,L                 ;
6587   348F C6 08                              ADD     $08                 ; go to next bird object
6588   3491 6F                                 LD      L,A                 ;
6589   3492 FE B0                              CP      $B0                 ; for bird4 to bird7
6590   3494 C2 89 34                           JP      NZ,L3489            ; 
6591   3497 C9                                 RET                         ;
6592   3498             
6593   3498             ;
6594   3498             L3498:
6595   3498 21 70 4B                           LD      HL,B4B70            ; 
6596   349B             ;
6597   349B             L349B:
6598   349B E5                                 PUSH    HL                  ;
6599   349C CD B0 35                           CALL    L35B0               ; 
6600   349F E1                                 POP     HL                  ;
6601   34A0 7D                                 LD      A,L                 ;
6602   34A1 C6 08                              ADD     $08                 ; go to next bird object
6603   34A3 6F                                 LD      L,A                 ;
6604   34A4 FE 90                              CP      $90                 ; for bird 0 to bird3
6605   34A6 C2 9B 34                           JP      NZ,L349B            ; 
6606   34A9 C9                                 RET                         ;
6607   34AA             
6608   34AA             ;
6609   34AA             L34AA:
6610   34AA 21 90 4B                           LD      HL,B4B90            ; 
6611   34AD             ;
6612   34AD             L34AD:
6613   34AD E5                                 PUSH    HL                  ;
6614   34AE CD B0 35                           CALL    L35B0               ; 
6615   34B1 E1                                 POP     HL                  ;
6616   34B2 7D                                 LD      A,L                 ;
6617   34B3 C6 08                              ADD     $08                 ; go to next bird object
6618   34B5 6F                                 LD      L,A                 ;
6619   34B6 FE B0                              CP      $B0                 ; for bird4 to bird7
6620   34B8 C2 AD 34                           JP      NZ,L34AD            ; 
6621   34BB C9                                 RET                         ;
6622   34BC             
6623   34C0                                    .ORG $34C0
6624   34C0             ;*****************************************************************************
6625   34C0             ;* Draw a given bird object.
6626   34C0             ;* Input HL is the data structur of one bird object.
6627   34C0             ;* (For the 8 birds: $4B70, $4B78, $4B80, $4B88, $4B90, $4B98, $4BA0, $4BA8)
6628   34C0             ;*****************************************************************************
6629   34C0             DrawBirdObject:
6630   34C0 7E                                 LD      A,(HL)              ; HL=$4B70 (or $4B78,...)
6631   34C1 A7                                 AND     A                   ; updates the zero flag
6632   34C2 C8                                 RET     Z                   ; if 0
6633   34C3 47                                 LD      B,A                 ; save it
6634   34C4 C6 C0                              ADD     $C0                 ; add to base for table T3EC0
6635   34C6 5F                                 LD      E,A                 ; save it
6636   34C7 16 3E                              LD      D,$3E               ; MSB for T3EC0
6637   34C9 1A                                 LD      A,(DE)              ; get data starting from $3EC1
6638   34CA 4F                                 LD      C,A                 ;
6639   34CB 2C                                 INC     L                   ;
6640   34CC 56                                 LD      D,(HL)              ; get $4B71 MSB of screen ram
6641   34CD 2C                                 INC     L                   ;
6642   34CE 5E                                 LD      E,(HL)              ; get $4B72 LSB of screen ram
6643   34CF 2C                                 INC     L                   ;
6644   34D0 78                                 LD      A,B                 ; restore it
6645   34D1 07                                 RLCA                        ; Multiply by 8 ..
6646   34D2 07                                 RLCA                        ; ..
6647   34D3 07                                 RLCA                        ; ..
6648   34D4 86                                 ADD     A,(HL)              ; and add to $4B73 alien0 screen coordinate Y
6649   34D5 E6 7E                              AND     $7E                 ; mask out 0111_1110
6650   34D7 6F                                 LD      L,A                 ;
6651   34D8 26 3E                              LD      H,$3E               ;
6652   34DA 7E                                 LD      A,(HL)              ; get MSB from address table for bird character block shapes (T3E08)
6653   34DB 2C                                 INC     L                   ;
6654   34DC 6E                                 LD      L,(HL)              ; get LSB
6655   34DD 67                                 LD      H,A                 ;
6656   34DE             L34DE:
6657   34DE 7A                                 LD      A,D                 ;
6658   34DF FE 4B                              CP      $4B                 ; MSB of screen ram
6659   34E1 C2 0C 35                           JP      NZ,L350C            ; if value is not equal $4B
6660   34E4 7B                                 LD      A,E                 ;
6661   34E5 FE 50                              CP      $50                 ;
6662   34E7 DA 0C 35                           JP      C,L350C             ; 
6663   34EA 06 08                              LD      B,$08               ;
6664   34EC 2C                                 INC     L                   ;
6665   34ED 2C                                 INC     L                   ;
6666   34EE D6 20                              SUB     $20                 ;
6667   34F0 5F                                 LD      E,A                 ;
6668   34F1 FE 50                              CP      $50                 ;
6669   34F3 DA 09 35                           JP      C,L3509             ; 
6670   34F6 06 10                              LD      B,$10               ;
6671   34F8 2C                                 INC     L                   ;
6672   34F9 2C                                 INC     L                   ;
6673   34FA D6 20                              SUB     $20                 ;
6674   34FC 5F                                 LD      E,A                 ;
6675   34FD FE 50                              CP      $50                 ;
6676   34FF DA 09 35                           JP      C,L3509             ; 
6677   3502 06 18                              LD      B,$18               ;
6678   3504 2C                                 INC     L                   ;
6679   3505 2C                                 INC     L                   ;
6680   3506 D6 20                              SUB     $20                 ;
6681   3508 5F                                 LD      E,A                 ;
6682   3509             ;
6683   3509             L3509:
6684   3509 79                                 LD      A,C                 ;
6685   350A 80                                 ADD     A,B                 ;
6686   350B 4F                                 LD      C,A                 ;
6687   350C             ;
6688   350C             L350C:
6689   350C 06 35                              LD      B,$35               ; MSB of return address for the draw shape entry.
6690   350E C5                                 PUSH    BC                  ;
6691   350F 01 DF FF                           LD      BC,$FFDF            ; Screen offset constant -33 right one column (-1), up one row (-32)
6692   3512 EB                                 EX      DE,HL               ;
6693   3513 36 00                              LD      (HL),$00            ; delete character on screen
6694   3515 23                                 INC     HL                  ;
6695   3516 36 00                              LD      (HL),$00            ; delete character on screen
6696   3518 09                                 ADD     HL,BC               ;
6697   3519 C9                                 RET                         ; jumps to draw shape entry.
6698   351A             
6699   3520                                    .ORG $3520
6700   3520             ;*****************************************************************************
6701   3520             ;* Draw a shape.
6702   3520             ;* Entry dep. on size of shape: 2x2,3x2,4x2,5x2,6x2,7x2.
6703   3520             ;*****************************************************************************
6704   3520             Draw7x2:
6705   3520 1A                                 LD      A,(DE)              ;
6706   3521 77                                 LD      (HL),A              ;
6707   3522 13                                 INC     DE                  ;
6708   3523 23                                 INC     HL                  ;
6709   3524 1A                                 LD      A,(DE)              ;
6710   3525 77                                 LD      (HL),A              ;
6711   3526 13                                 INC     DE                  ;
6712   3527 09                                 ADD     HL,BC               ;
6713   3528             Draw6x2:
6714   3528 1A                                 LD      A,(DE)              ;
6715   3529 77                                 LD      (HL),A              ;
6716   352A 13                                 INC     DE                  ;
6717   352B 23                                 INC     HL                  ;
6718   352C 1A                                 LD      A,(DE)              ;
6719   352D 77                                 LD      (HL),A              ;
6720   352E 13                                 INC     DE                  ;
6721   352F 09                                 ADD     HL,BC               ;
6722   3530             Draw5x2:
6723   3530 1A                                 LD      A,(DE)              ;
6724   3531 77                                 LD      (HL),A              ;
6725   3532 13                                 INC     DE                  ;
6726   3533 23                                 INC     HL                  ;
6727   3534 1A                                 LD      A,(DE)              ;
6728   3535 77                                 LD      (HL),A              ;
6729   3536 13                                 INC     DE                  ;
6730   3537 09                                 ADD     HL,BC               ;
6731   3538             Draw4x2:
6732   3538 1A                                 LD      A,(DE)              ;
6733   3539 77                                 LD      (HL),A              ;
6734   353A 13                                 INC     DE                  ;
6735   353B 23                                 INC     HL                  ;
6736   353C 1A                                 LD      A,(DE)              ;
6737   353D 77                                 LD      (HL),A              ;
6738   353E 13                                 INC     DE                  ;
6739   353F 09                                 ADD     HL,BC               ;
6740   3540             Draw3x2:
6741   3540 1A                                 LD      A,(DE)              ;
6742   3541 77                                 LD      (HL),A              ;
6743   3542 13                                 INC     DE                  ;
6744   3543 23                                 INC     HL                  ;
6745   3544 1A                                 LD      A,(DE)              ;
6746   3545 77                                 LD      (HL),A              ;
6747   3546 13                                 INC     DE                  ;
6748   3547 09                                 ADD     HL,BC               ;
6749   3548             Draw2x2:
6750   3548 1A                                 LD      A,(DE)              ;
6751   3549 77                                 LD      (HL),A              ;
6752   354A 13                                 INC     DE                  ;
6753   354B 23                                 INC     HL                  ;
6754   354C 1A                                 LD      A,(DE)              ;
6755   354D 77                                 LD      (HL),A              ;
6756   354E 13                                 INC     DE                  ;
6757   354F 09                                 ADD     HL,BC               ;
6758   3550             Draw1x2:
6759   3550 1A                                 LD      A,(DE)              ;
6760   3551 77                                 LD      (HL),A              ;
6761   3552 13                                 INC     DE                  ;
6762   3553 23                                 INC     HL                  ;
6763   3554 1A                                 LD      A,(DE)              ;
6764   3555 77                                 LD      (HL),A              ;
6765   3556 13                                 INC     DE                  ;
6766   3557 09                                 ADD     HL,BC               ;
6767   3558             ;
6768   3558             L3558:
6769   3558 36 00                              LD      (HL),$00            ;
6770   355A 23                                 INC     HL                  ;
6771   355B 36 00                              LD      (HL),$00            ;
6772   355D C9                                 RET                         ;
6773   355E             
6774   3560                                    .ORG $3560
6775   3560             ;
6776   3560             L3560:
6777   3560 CD AA 30                           CALL    GetRandomNumber     ; 
6778   3563 47                                 LD      B,A                 ;
6779   3564 07                                 RLCA                        ; Multiply by 4 ..
6780   3565 07                                 RLCA                        ; ..
6781   3566 4F                                 LD      C,A                 ;
6782   3567 07                                 RLCA                        ; Multiply by 4 ..
6783   3568 07                                 RLCA                        ; ..
6784   3569 B0                                 OR      B                   
6785   356A 32 6F 43                           LD      (M436F),A           ; 
6786   356D 3A B8 43                           LD      A,(LevelAndRound)   ; 
6787   3570 FE 40                              CP      $40                 ;
6788   3572 DA 77 35                           JP      C,L3577             ; if game round < 4
6789   3575 3E 30                              LD      A,$30               
6790   3577             L3577:
6791   3577 E6 30                              AND     $30                 
6792   3579 0F                                 RRCA                        
6793   357A 47                                 LD      B,A                 
6794   357B 3A BB 43                           LD      A,(BirdsLeft)       ; 
6795   357E 3D                                 DEC     A                   
6796   357F FE 04                              CP      $04                 
6797   3581 DA 86 35                           JP      C,L3586             ; 
6798   3584 3E 03                              LD      A,$03               
6799   3586             L3586:
6800   3586 07                                 RLCA                        ; Multiply by 2
6801   3587 B0                                 OR      B                   
6802   3588 47                                 LD      B,A                 
6803   3589 3A 9A 43                           LD      A,(Counter9A)       ; 
6804   358C 07                                 RLCA                        ; Multiply by 4 ..
6805   358D 07                                 RLCA                        ; ..
6806   358E E6 20                              AND     $20                 ; mask out 0010_0000
6807   3590 B0                                 OR      B                   
6808   3591 C6 80                              ADD     $80                 
6809   3593 6F                                 LD      L,A                 
6810   3594 26 3E                              LD      H,$3E               
6811   3596 7E                                 LD      A,(HL)              ; data from table T3E80
6812   3597 32 6E 43                           LD      (M436E),A           ; 
6813   359A 2C                                 INC     L                   
6814   359B 7E                                 LD      A,(HL)              ; data from table T3E80
6815   359C 81                                 ADD     A,C                 
6816   359D E6 F8                              AND     $F8                 
6817   359F 32 6D 43                           LD      (M436D),A           ; 
6818   35A2 C9                                 RET                         
6819   35A3             
6820   35B0                                    .ORG $35B0
6821   35B0             ;
6822   35B0             L35B0:
6823   35B0 7E                                 LD      A,(HL)              ; get index character block shape
6824   35B1 A7                                 AND     A                   ; updates the zero flag
6825   35B2 C8                                 RET     Z                   ; if index is 0
6826   35B3 47                                 LD      B,A                 ; save index to B
6827   35B4 2C                                 INC     L                   ;
6828   35B5 2C                                 INC     L                   ;
6829   35B6 2C                                 INC     L                   ;
6830   35B7 2C                                 INC     L                   ;
6831   35B8 7E                                 LD      A,(HL)              ;
6832   35B9 A7                                 AND     A                   ; updates the zero flag
6833   35BA CA BE 35                           JP      Z,L35BE             ; 
6834   35BD 35                                 DEC     (HL)                ;
6835   35BE             L35BE:
6836   35BE EB                                 EX      DE,HL               ;
6837   35BF D5                                 PUSH    DE                  ;
6838   35C0 78                                 LD      A,B                 ; load index
6839   35C1 07                                 RLCA                        ; Multiply by 8 ..
6840   35C2 07                                 RLCA                        ; ..
6841   35C3 07                                 RLCA                        ; ..
6842   35C4 6F                                 LD      L,A                 ;
6843   35C5 26 3F                              LD      H,$3F               ; MSB of table T3F00 for stack manipulation
6844   35C7 46                                 LD      B,(HL)              ; get 1st byte
6845   35C8 23                                 INC     HL                  ;
6846   35C9 4E                                 LD      C,(HL)              ; get 2nd byte
6847   35CA C5                                 PUSH    BC                  ; to stack
6848   35CB 23                                 INC     HL                  ;
6849   35CC 46                                 LD      B,(HL)              ; get 3rd byte
6850   35CD 23                                 INC     HL                  ;
6851   35CE 4E                                 LD      C,(HL)              ; get 4rd byte
6852   35CF C5                                 PUSH    BC                  ; to stack
6853   35D0 23                                 INC     HL                  ;
6854   35D1 46                                 LD      B,(HL)              ; get MSB of 1st address
6855   35D2 23                                 INC     HL                  ;
6856   35D3 4E                                 LD      C,(HL)              ; get LSB of 1st address
6857   35D4 C5                                 PUSH    BC                  ; to stack
6858   35D5 23                                 INC     HL                  ;
6859   35D6 46                                 LD      B,(HL)              ; get MSB of 2nd address
6860   35D7 23                                 INC     HL                  ;
6861   35D8 4E                                 LD      C,(HL)              ; get LSB of 2nd address
6862   35D9 C5                                 PUSH    BC                  ; to stack
6863   35DA EB                                 EX      DE,HL               ;
6864   35DB C9                                 RET                         ; calls the 2nd address
6865   35DC             
6866   35E0                                    .ORG $35E0
6867   35E0             ; called by $35B0
6868   35E0             L35E0:
6869   35E0 2C                                 INC     L                   
6870   35E1 2C                                 INC     L                   
6871   35E2 7E                                 LD      A,(HL)              
6872   35E3 FE 10                              CP      $10                 
6873   35E5 D2 28 36                           JP      NC,L3628            ; 
6874   35E8 47                                 LD      B,A                 
6875   35E9 2D                                 DEC     L                   
6876   35EA 86                                 ADD     A,(HL)              
6877   35EB 77                                 LD      (HL),A              
6878   35EC 2D                                 DEC     L                   
6879   35ED 2D                                 DEC     L                   
6880   35EE 78                                 LD      A,B                 
6881   35EF 86                                 ADD     A,(HL)              
6882   35F0 77                                 LD      (HL),A              
6883   35F1 FE 08                              CP      $08                 
6884   35F3 DA 6A 36                           JP      C,L366A             ; 
6885   35F6 E6 07                              AND     $07                 
6886   35F8 77                                 LD      (HL),A              
6887   35F9 2D                                 DEC     L                   
6888   35FA 7E                                 LD      A,(HL)              
6889   35FB D6 20                              SUB     $20                 
6890   35FD 77                                 LD      (HL),A              
6891   35FE D2 04 36                           JP      NC,L3604            ; 
6892   3601 2D                                 DEC     L                   
6893   3602 35                                 DEC     (HL)                
6894   3603 2C                                 INC     L                   
6895   3604             L3604:
6896   3604 2C                                 INC     L                   
6897   3605 2C                                 INC     L                   
6898   3606 2C                                 INC     L                   
6899   3607 4E                                 LD      C,(HL)              
6900   3608 2C                                 INC     L                   
6901   3609 2C                                 INC     L                   
6902   360A 7E                                 LD      A,(HL)              
6903   360B 2D                                 DEC     L                   
6904   360C 36 10                              LD      (HL),$10            
6905   360E 91                                 SUB     C                   
6906   360F CA 72 36                           JP      Z,L3672             ; 
6907   3612 3D                                 DEC     A                   
6908   3613 0F                                 RRCA                        
6909   3614 0F                                 RRCA                        
6910   3615 0F                                 RRCA                        
6911   3616 E6 1F                              AND     $1F                 
6912   3618 B8                                 CP      B                   
6913   3619 3C                                 INC     A                   
6914   361A 77                                 LD      (HL),A              
6915   361B D8                                 RET     C                   
6916   361C 3A 6E 43                           LD      A,(M436E)           ; 
6917   361F 77                                 LD      (HL),A              
6918   3620 B8                                 CP      B                   
6919   3621 C8                                 RET     Z                   
6920   3622 04                                 INC     B                   
6921   3623 70                                 LD      (HL),B              
6922   3624 C9                                 RET                         
6923   3625             
6924   3628                                    .ORG $3628
6925   3628             L3628:
6926   3628 E6 0F                              AND     $0F                 
6927   362A CA 44 37                           JP      Z,L3744             ; 
6928   362D 47                                 LD      B,A                 
6929   362E 2D                                 DEC     L                   
6930   362F 7E                                 LD      A,(HL)              
6931   3630 90                                 SUB     B                   
6932   3631 77                                 LD      (HL),A              
6933   3632 2D                                 DEC     L                   
6934   3633 2D                                 DEC     L                   
6935   3634 7E                                 LD      A,(HL)              
6936   3635 90                                 SUB     B                   
6937   3636 77                                 LD      (HL),A              
6938   3637 D2 95 36                           JP      NC,L3695            ; 
6939   363A E6 07                              AND     $07                 
6940   363C 77                                 LD      (HL),A              
6941   363D 2D                                 DEC     L                   
6942   363E 7E                                 LD      A,(HL)              
6943   363F C6 20                              ADD     $20                 
6944   3641 77                                 LD      (HL),A              
6945   3642 D2 48 36                           JP      NC,L3648            ; 
6946   3645 2D                                 DEC     L                   
6947   3646 34                                 INC     (HL)                
6948   3647 2C                                 INC     L                   
6949   3648             L3648:
6950   3648 2C                                 INC     L                   
6951   3649 2C                                 INC     L                   
6952   364A 2C                                 INC     L                   
6953   364B 7E                                 LD      A,(HL)              
6954   364C 2C                                 INC     L                   
6955   364D 2C                                 INC     L                   
6956   364E 96                                 SUB     (HL)                
6957   364F 0F                                 RRCA                        
6958   3650 0F                                 RRCA                        
6959   3651 0F                                 RRCA                        
6960   3652 E6 1F                              AND     $1F                 
6961   3654 B8                                 CP      B                   
6962   3655 3C                                 INC     A                   
6963   3656 2D                                 DEC     L                   
6964   3657 DA 63 36                           JP      C,L3663             ; 
6965   365A 3A 6E 43                           LD      A,(M436E)           ; 
6966   365D B8                                 CP      B                   
6967   365E CA 63 36                           JP      Z,L3663             ; 
6968   3661 78                                 LD      A,B                 
6969   3662 3C                                 INC     A                   
6970   3663             L3663:
6971   3663 F6 10                              OR      $10                 
6972   3665 77                                 LD      (HL),A              
6973   3666 C9                                 RET                         
6974   3667             
6975   366A                                    .ORG $366A
6976   366A             ;
6977   366A             L366A:
6978   366A 78                                 LD      A,B                 
6979   366B A7                                 AND     A                   ; updates the zero flag
6980   366C C0                                 RET     NZ                  
6981   366D 2C                                 INC     L                   
6982   366E 2C                                 INC     L                   
6983   366F 2C                                 INC     L                   
6984   3670 34                                 INC     (HL)                
6985   3671 C9                                 RET                         
6986   3672             ;
6987   3672             L3672:
6988   3672 2D                                 DEC     L                   
6989   3673 46                                 LD      B,(HL)              
6990   3674 2C                                 INC     L                   
6991   3675 2C                                 INC     L                   
6992   3676 3A C2 43                           LD      A,(PlayerShipX)     ; 
6993   3679 E6 F8                              AND     $F8                 
6994   367B B8                                 CP      B                   
6995   367C D2 80 36                           JP      NC,L3680            ; 
6996   367F 47                                 LD      B,A                 
6997   3680             L3680:
6998   3680 3A 6D 43                           LD      A,(M436D)           ; 
6999   3683 4F                                 LD      C,A                 
7000   3684 C6 08                              ADD     $08                 
7001   3686 32 6D 43                           LD      (M436D),A           ; 
7002   3689 78                                 LD      A,B                 
7003   368A 91                                 SUB     C                   
7004   368B 36 08                              LD      (HL),$08            
7005   368D D8                                 RET     C                   
7006   368E FE 08                              CP      $08                 
7007   3690 D8                                 RET     C                   
7008   3691 77                                 LD      (HL),A              
7009   3692 C9                                 RET                         
7010   3693             
7011   3695                                    .ORG $3695
7012   3695             ;
7013   3695             L3695:
7014   3695 2C                                 INC     L                   
7015   3696 2C                                 INC     L                   
7016   3697 46                                 LD      B,(HL)              
7017   3698 2C                                 INC     L                   
7018   3699 2C                                 INC     L                   
7019   369A 7E                                 LD      A,(HL)              
7020   369B B8                                 CP      B                   
7021   369C C0                                 RET     NZ                  
7022   369D 2D                                 DEC     L                   
7023   369E 36 00                              LD      (HL),$00            
7024   36A0 2C                                 INC     L                   
7025   36A1 3A C2 43                           LD      A,(PlayerShipX)     ; 
7026   36A4 E6 F8                              AND     $F8                 
7027   36A6 B8                                 CP      B                   
7028   36A7 DA AB 36                           JP      C,L36AB             ; 
7029   36AA 47                                 LD      B,A                 
7030   36AB             L36AB:
7031   36AB 3A 6D 43                           LD      A,(M436D)           ; 
7032   36AE C6 08                              ADD     $08                 
7033   36B0 32 6D 43                           LD      (M436D),A           ; 
7034   36B3 80                                 ADD     A,B                 
7035   36B4 36 C8                              LD      (HL),$C8            
7036   36B6 D8                                 RET     C                   
7037   36B7 FE C8                              CP      $C8                 
7038   36B9 D0                                 RET     NC                  
7039   36BA 77                                 LD      (HL),A              
7040   36BB C9                                 RET                         
7041   36BC             
7042   36C0                                    .ORG $36C0
7043   36C0             ; called by $35B0
7044   36C0             L36C0:
7045   36C0 7E                                 LD      A,(HL)              ;
7046   36C1 0F                                 RRCA                        ;
7047   36C2 D8                                 RET     C                   ;
7048   36C3 2D                                 DEC     L                   
7049   36C4 7E                                 LD      A,(HL)              
7050   36C5 3C                                 INC     A                   
7051   36C6 E6 07                              AND     $07                 
7052   36C8 77                                 LD      (HL),A              
7053   36C9 C9                                 RET                         
7054   36CA             
7055   36CC                                    .ORG $36CC
7056   36CC             ; called by $35B0
7057   36CC             L36CC:
7058   36CC D1                                 POP     DE                  
7059   36CD C1                                 POP     BC                  
7060   36CE E1                                 POP     HL                  
7061   36CF C9                                 RET                         
7062   36D0             
7063   36D2                                    .ORG $36D2
7064   36D2             ; called by $35B0
7065   36D2             L36D2:
7066   36D2 D1                                 POP     DE                  ;
7067   36D3 C1                                 POP     BC                  ;
7068   36D4 E1                                 POP     HL                  ;
7069   36D5 7E                                 LD      A,(HL)              ;
7070   36D6 A7                                 AND     A                   ; updates the zero flag
7071   36D7 C0                                 RET     NZ                  ;
7072   36D8 70                                 LD      (HL),B              
7073   36D9 2D                                 DEC     L                   
7074   36DA 2D                                 DEC     L                   
7075   36DB 2D                                 DEC     L                   
7076   36DC 2D                                 DEC     L                   
7077   36DD 72                                 LD      (HL),D              
7078   36DE 3A 68 43                           LD      A,(M4368)           ; 
7079   36E1 F6 01                              OR      $01                 
7080   36E3 32 68 43                           LD      (M4368),A           ; 
7081   36E6 C9                                 RET                         
7082   36E7             
7083   36EA                                    .ORG $36EA
7084   36EA             ; called by $35B0
7085   36EA             L36EA:
7086   36EA D1                                 POP     DE                  
7087   36EB C1                                 POP     BC                  
7088   36EC E1                                 POP     HL                  
7089   36ED 7E                                 LD      A,(HL)              
7090   36EE A7                                 AND     A                   ; updates the zero flag
7091   36EF C0                                 RET     NZ                  
7092   36F0 2C                                 INC     L                   
7093   36F1 2C                                 INC     L                   
7094   36F2 7E                                 LD      A,(HL)              
7095   36F3 E6 0F                              AND     $0F                 
7096   36F5 C0                                 RET     NZ                  
7097   36F6 2D                                 DEC     L                   
7098   36F7 2D                                 DEC     L                   
7099   36F8 70                                 LD      (HL),B              
7100   36F9 2D                                 DEC     L                   
7101   36FA 2D                                 DEC     L                   
7102   36FB 2D                                 DEC     L                   
7103   36FC 2D                                 DEC     L                   
7104   36FD 72                                 LD      (HL),D              
7105   36FE 3A 68 43                           LD      A,(M4368)           ; 
7106   3701 F6 02                              OR      $02                 
7107   3703 32 68 43                           LD      (M4368),A           ; 
7108   3706 C9                                 RET                         
7109   3707             
7110   370A                                    .ORG $370A
7111   370A             ; called by $35B0
7112   370A             L370A:
7113   370A D1                                 POP     DE                  
7114   370B C1                                 POP     BC                  
7115   370C E1                                 POP     HL                  
7116   370D 7E                                 LD      A,(HL)              
7117   370E A7                                 AND     A                   ; updates the zero flag
7118   370F C0                                 RET     NZ                  
7119   3710 2C                                 INC     L                   
7120   3711 2C                                 INC     L                   
7121   3712 7E                                 LD      A,(HL)              
7122   3713 E6 0F                              AND     $0F                 
7123   3715 C0                                 RET     NZ                  
7124   3716 2D                                 DEC     L                   
7125   3717 2D                                 DEC     L                   
7126   3718 70                                 LD      (HL),B              
7127   3719 2D                                 DEC     L                   
7128   371A 2D                                 DEC     L                   
7129   371B 2D                                 DEC     L                   
7130   371C 2D                                 DEC     L                   
7131   371D 72                                 LD      (HL),D              
7132   371E 3A 68 43                           LD      A,(M4368)           ; 
7133   3721 F6 04                              OR      $04                 
7134   3723 32 68 43                           LD      (M4368),A           ; 
7135   3726 3A 6F 43                           LD      A,(M436F)           ; 
7136   3729 A3                                 AND     E                   
7137   372A E6 F0                              AND     $F0                 
7138   372C C0                                 RET     NZ                  
7139   372D 7B                                 LD      A,E                 
7140   372E E6 0F                              AND     $0F                 
7141   3730 77                                 LD      (HL),A              
7142   3731 2C                                 INC     L                   
7143   3732 2C                                 INC     L                   
7144   3733 2C                                 INC     L                   
7145   3734 2C                                 INC     L                   
7146   3735 71                                 LD      (HL),C              
7147   3736 3A 68 43                           LD      A,(M4368)           ; 
7148   3739 F6 08                              OR      $08                 
7149   373B 32 68 43                           LD      (M4368),A           ; 
7150   373E C9                                 RET                         
7151   373F             
7152   3744                                    .ORG $3744
7153   3744             L3744:
7154   3744 36 11                              LD      (HL),$11            
7155   3746 2D                                 DEC     L                   
7156   3747 35                                 DEC     (HL)                
7157   3748 2D                                 DEC     L                   
7158   3749 2D                                 DEC     L                   
7159   374A 36 07                              LD      (HL),$07            
7160   374C 2D                                 DEC     L                   
7161   374D 7E                                 LD      A,(HL)              
7162   374E C6 20                              ADD     $20                 
7163   3750 77                                 LD      (HL),A              
7164   3751 D0                                 RET     NC                  
7165   3752 2D                                 DEC     L                   
7166   3753 34                                 INC     (HL)                
7167   3754 C9                                 RET                         
7168   3755             
7169   3758                                    .ORG $3758
7170   3758             ;
7171   3758             L3758:
7172   3758 7E                                 LD      A,(HL)              
7173   3759 A7                                 AND     A                   ; updates the zero flag
7174   375A C8                                 RET     Z                   ; if 0
7175   375B 35                                 DEC     (HL)                
7176   375C CA CC 37                           JP      Z,L37CC             ; 
7177   375F 7E                                 LD      A,(HL)              
7178   3760 0F                                 RRCA                        
7179   3761 D2 B0 37                           JP      NC,L37B0            ; Prints the score value in the middle of the bonus explosion
7180   3764 3E 0F                              LD      A,$0F               
7181   3766 96                                 SUB     (HL)                
7182   3767 E6 0E                              AND     $0E                 ; mask out 0000_1110
7183   3769 07                                 RLCA                        ; Multiply by 16 ..
7184   376A 07                                 RLCA                        ; ..
7185   376B 07                                 RLCA                        ; ..
7186   376C 07                                 RLCA                        ; ..
7187   376D 2C                                 INC     L                   
7188   376E 2C                                 INC     L                   
7189   376F 56                                 LD      D,(HL)              
7190   3770 2C                                 INC     L                   
7191   3771 5E                                 LD      E,(HL)              
7192   3772 F5                                 PUSH    AF                  
7193   3773 D5                                 PUSH    DE                  
7194   3774 01 DF FF                           LD      BC,$FFDF            ; Screen offset constant -33 right one column (-1), up one row (-32)
7195   3777 CD 96 37                           CALL    L3796               ; left part of bonus explosion animation
7196   377A D1                                 POP     DE                  
7197   377B F1                                 POP     AF                  
7198   377C 2F                                 CPL                         
7199   377D 6F                                 LD      L,A                 
7200   377E 26 FF                              LD      H,$FF               
7201   3780 23                                 INC     HL                  
7202   3781 19                                 ADD     HL,DE               
7203   3782 EB                                 EX      DE,HL               
7204   3783 21 A0 BF                           LD      HL,$BFA0            
7205   3786 19                                 ADD     HL,DE               
7206   3787 D0                                 RET     NC                  
7207   3788 EB                                 EX      DE,HL               
7208   3789 11 D6 17                           LD      DE,T17D6            ; (Bonus explosion right part)
7209   378C 36 00                              LD      (HL),$00            
7210   378E 23                                 INC     HL                  
7211   378F 36 00                              LD      (HL),$00            
7212   3791 09                                 ADD     HL,BC               
7213   3792 C3 40 35                           JP      Draw3x2             ; 
7214   3795             
7215   3796                                    .ORG $3796
7216   3796             ;*****************************************************************************
7217   3796             ;* Draws the left part of bonus explosion animation.
7218   3796             ;*****************************************************************************
7219   3796             L3796:
7220   3796 C6 60                              ADD     $60                 
7221   3798 6F                                 LD      L,A                 
7222   3799 26 00                              LD      H,$00               
7223   379B D2 9F 37                           JP      NC,L379F            ; 
7224   379E 24                                 INC     H                   
7225   379F             L379F:
7226   379F 19                                 ADD     HL,DE               
7227   37A0 EB                                 EX      DE,HL               
7228   37A1 21 C0 BC                           LD      HL,$BCC0            
7229   37A4 19                                 ADD     HL,DE               
7230   37A5 D8                                 RET     C                   
7231   37A6 EB                                 EX      DE,HL               
7232   37A7 11 D0 17                           LD      DE,T17D0            ; (Bonus explosion left part)
7233   37AA C3 40 35                           JP      Draw3x2             ; 
7234   37AD             
7235   37B0                                    .ORG $37B0
7236   37B0             ; Prints the score value in the middle of the bonus explosion animation.
7237   37B0             ; First two digits are from $4379. Last digit is ever 0.
7238   37B0             L37B0:
7239   37B0 2C                                 INC     L                   ;
7240   37B1 7E                                 LD      A,(HL)              ;
7241   37B2 27                                 DAA                         ;
7242   37B3 77                                 LD      (HL),A              ;
7243   37B4 2C                                 INC     L                   ;
7244   37B5 56                                 LD      D,(HL)              ;
7245   37B6 2C                                 INC     L                   ;
7246   37B7 5E                                 LD      E,(HL)              ;
7247   37B8 2D                                 DEC     L                   ;
7248   37B9 2D                                 DEC     L                   ;
7249   37BA 00                                 NOP                         ;
7250   37BB CD 17 02                           CALL    RightOneColumn      ; 
7251   37BE 3E 20                              LD      A,$20               ; character code for '0' (the right digit of bonus score)
7252   37C0 12                                 LD      (DE),A              ; write to screen ram (upper left corner of object 17D6)
7253   37C1 CD 10 02                           CALL    LeftOneColumn       ; 
7254   37C4 06 02                              LD      B,$02               ; for the left two digits
7255   37C6 C3 C4 00                           JP      PrintNumber         ; score value for bonus explosion
7256   37C9             
7257   37CC                                    .ORG $37CC
7258   37CC             ;
7259   37CC             L37CC:
7260   37CC 2C                                 INC     L                   
7261   37CD 2C                                 INC     L                   
7262   37CE 2C                                 INC     L                   
7263   37CF 7E                                 LD      A,(HL)              
7264   37D0 E6 1F                              AND     $1F                 
7265   37D2 C6 20                              ADD     $20                 
7266   37D4 6F                                 LD      L,A                 
7267   37D5 26 43                              LD      H,$43               
7268   37D7 01 DF FF                           LD      BC,$FFDF            ; Screen offset constant -33 right one column (-1), up one row (-32)
7269   37DA 11 1A 00                           LD      DE,$001A            
7270   37DD             L37DD:
7271   37DD 72                                 LD      (HL),D              
7272   37DE 23                                 INC     HL                  
7273   37DF 72                                 LD      (HL),D              
7274   37E0 09                                 ADD     HL,BC               
7275   37E1 1D                                 DEC     E                   
7276   37E2 C2 DD 37                           JP      NZ,L37DD            ; 
7277   37E5 C9                                 RET                         
7278   37E6             
7279   3800                                    .ORG $3800
7280   3800             ;*****************************************************************************
7281   3800             ;* Collision detection for birds.
7282   3800             ;*****************************************************************************
7283   3800             L3800:
7284   3800 3A C4 43                           LD      A,(PlayerBulletState)
7285   3803 E6 08                              AND     $08                 
7286   3805 C8                                 RET     Z                   
7287   3806 3A E6 43                           LD      A,(AbovePlayerBulletMSB)
7288   3809 C6 08                              ADD     $08                 
7289   380B 57                                 LD      D,A                 
7290   380C 3A D2 4B                           LD      A,(M4BD2)           ; 
7291   380F 5F                                 LD      E,A                 
7292   3810 3A E7 43                           LD      A,(AbovePlayerBulletLSB)
7293   3813 E6 E0                              AND     $E0                 
7294   3815 47                                 LD      B,A                 
7295   3816 3A E7 43                           LD      A,(AbovePlayerBulletLSB)
7296   3819 93                                 SUB     E                   
7297   381A 00                                 NOP                         
7298   381B E6 1F                              AND     $1F                 
7299   381D B0                                 OR      B                   
7300   381E 5F                                 LD      E,A                 
7301   381F 1A                                 LD      A,(DE)              
7302   3820 D6 90                              SUB     $90                 
7303   3822 D8                                 RET     C                   
7304   3823 47                                 LD      B,A                 
7305   3824 3A C6 43                           LD      A,(PlayerBulletX)   ; 
7306   3827 E6 07                              AND     $07                 
7307   3829 C6 00                              ADD     $00                 
7308   382B 6F                                 LD      L,A                 
7309   382C 26 3E                              LD      H,$3E               
7310   382E 4E                                 LD      C,(HL)              
7311   382F 7B                                 LD      A,E                 
7312   3830 E6 0E                              AND     $0E                 
7313   3832 07                                 RLCA                        ; Multiply by 4 ..
7314   3833 07                                 RLCA                        ; ..
7315   3834 5F                                 LD      E,A                 
7316   3835 3E A8                              LD      A,$A8               
7317   3837 93                                 SUB     E                   
7318   3838 5F                                 LD      E,A                 
7319   3839 16 4B                              LD      D,$4B               
7320   383B 78                                 LD      A,B                 
7321   383C FE 50                              CP      $50                 
7322   383E DC 44 38                           CALL    C,L3844             ; 
7323   3841 C3 1C 39                           JP      L391C               ; 
7324   3844             
7325   3844             ; A bird has been hit
7326   3844             L3844:
7327   3844 C6 60                              ADD     $60                 ; LSB of table T3B60
7328   3846 6F                                 LD      L,A                 
7329   3847 26 3B                              LD      H,$3B               ; MSB of table T3B60
7330   3849 7E                                 LD      A,(HL)              
7331   384A A1                                 AND     C                   
7332   384B C8                                 RET     Z                   
7333   384C CD A1 38                           CALL    L38A1               ; 
7334   384F EB                                 EX      DE,HL               
7335   3850 7E                                 LD      A,(HL)              
7336   3851 36 00                              LD      (HL),$00            
7337   3853 2C                                 INC     L                   
7338   3854 2C                                 INC     L                   
7339   3855 2C                                 INC     L                   
7340   3856 2C                                 INC     L                   
7341   3857 56                                 LD      D,(HL)              
7342   3858 E1                                 POP     HL                  
7343   3859 21 BB 43                           LD      HL,BirdsLeft        ; 
7344   385C 35                                 DEC     (HL)                ; decrement number of BirdsLeft
7345   385D FE 0B                              CP      $0B                 
7346   385F DA 94 38                           JP      C,L3894             ; 
7347   3862 5F                                 LD      E,A                 
7348   3863 3E FF                              LD      A,$FF               ; set bonus explosion flag
7349   3865 32 69 43                           LD      (M4369),A           ; 
7350   3868 21 78 43                           LD      HL,M4378            ; 
7351   386B 01 10 10                           LD      BC,$1010            ; C reg. set to: 'bonus explosion score 100'.
7352   386E 7B                                 LD      A,E                 
7353   386F FE 0F                              CP      $0F                 
7354   3871 CA FB 38                           JP      Z,L38FB             ; 
7355   3874 7A                                 LD      A,D                 
7356   3875 0F                                 RRCA                        
7357   3876 E6 7C                              AND     $7C                 
7358   3878 C6 30                              ADD     $30                 
7359   387A 4F                                 LD      C,A                 
7360   387B 7B                                 LD      A,E                 
7361   387C FE 0E                              CP      $0E                 
7362   387E CA FB 38                           JP      Z,L38FB             ; 
7363   3881 79                                 LD      A,C                 
7364   3882 0F                                 RRCA                        
7365   3883 4F                                 LD      C,A                 
7366   3884 7B                                 LD      A,E                 
7367   3885 FE 0C                              CP      $0C                 
7368   3887 D2 FB 38                           JP      NC,L38FB            ; 
7369   388A 79                                 LD      A,C                 
7370   388B 0F                                 RRCA                        
7371   388C 4F                                 LD      C,A                 
7372   388D C3 FB 38                           JP      L38FB               ; 
7373   3890             
7374   3894                                    .ORG $3894
7375   3894             ;
7376   3894             L3894:
7377   3894 01 05 0D                           LD      BC,$0D05            
7378   3897 3E FF                              LD      A,$FF               
7379   3899 32 64 43                           LD      (M4364),A           ; 
7380   389C C3 F8 38                           JP      L38F8               ; 
7381   389F             
7382   38A1                                    .ORG $38A1
7383   38A1             ;
7384   38A1             L38A1:
7385   38A1 D5                                 PUSH    DE                  
7386   38A2 0E 20                              LD      C,$20               
7387   38A4 EB                                 EX      DE,HL               
7388   38A5 23                                 INC     HL                  
7389   38A6 56                                 LD      D,(HL)              
7390   38A7 23                                 INC     HL                  
7391   38A8 5E                                 LD      E,(HL)              
7392   38A9             ; This is a simple protection against plagiarism !
7393   38A9             ; Changing this single letter will result in a disturbing graphics garbage,
7394   38A9             ; when you hit a bird.
7395   38A9 3A 8C 19                           LD      A,(L198C)           ; First letter 'R' from: " AMSTAR ELECTRONICS CORP. "
7396   38AC C6 DE                              ADD     $DE                 ; 1101_1110
7397   38AE 6F                                 LD      L,A                 
7398   38AF 26 17                              LD      H,$17               ; HL=$17F0 (FourByFourEmpty:)
7399   38B1 CD DE 34                           CALL    L34DE               ; 
7400   38B4 D1                                 POP     DE                  
7401   38B5 C9                                 RET                         
7402   38B6             
7403   38BC                                    .ORG $38BC
7404   38BC             ;
7405   38BC             L38BC:
7406   38BC C6 B0                              ADD     $B0                 
7407   38BE 6F                                 LD      L,A                 
7408   38BF 26 3B                              LD      H,$3B               
7409   38C1 7E                                 LD      A,(HL)              
7410   38C2 A1                                 AND     C                   
7411   38C3 C8                                 RET     Z                   
7412   38C4 CD A1 38                           CALL    L38A1               ; 
7413   38C7 1A                                 LD      A,(DE)              
7414   38C8 D6 0B                              SUB     $0B                 
7415   38CA DA E9 38                           JP      C,L38E9             ; 
7416   38CD FE 03                              CP      $03                 
7417   38CF D2 E9 38                           JP      NC,L38E9            ; 
7418   38D2 47                                 LD      B,A                 
7419   38D3 62                                 LD      H,D                 
7420   38D4 7B                                 LD      A,E                 
7421   38D5 C6 05                              ADD     $05                 
7422   38D7 6F                                 LD      L,A                 
7423   38D8 3A C6 43                           LD      A,(PlayerBulletX)   ; 
7424   38DB BE                                 CP      (HL)                
7425   38DC 17                                 RLA                         
7426   38DD 07                                 RLCA                        ; Multiply by 4 ..
7427   38DE 07                                 RLCA                        ; ..
7428   38DF E6 04                              AND     $04                 
7429   38E1 B0                                 OR      B                   
7430   38E2 C6 B8                              ADD     $B8                 
7431   38E4 6F                                 LD      L,A                 
7432   38E5 26 3D                              LD      H,$3D               
7433   38E7 7E                                 LD      A,(HL)              
7434   38E8 12                                 LD      (DE),A              
7435   38E9             L38E9:
7436   38E9 3E FF                              LD      A,$FF               
7437   38EB 32 66 43                           LD      (M4366),A           ; 
7438   38EE 01 02 07                           LD      BC,$0702            
7439   38F1 C3 F8 38                           JP      L38F8               ; 
7440   38F4             
7441   38F8                                    .ORG $38F8
7442   38F8             ;
7443   38F8             L38F8:
7444   38F8 21 70 43                           LD      HL,M4370            ; 
7445   38FB             L38FB:
7446   38FB AF                                 XOR     A                   ; A=0
7447   38FC BE                                 CP      (HL)                
7448   38FD CA 06 39                           JP      Z,L3906             ; 
7449   3900 2C                                 INC     L                   
7450   3901 2C                                 INC     L                   
7451   3902 2C                                 INC     L                   
7452   3903 2C                                 INC     L                   
7453   3904 BE                                 CP      (HL)                
7454   3905 C0                                 RET     NZ                  
7455   3906             L3906:
7456   3906 70                                 LD      (HL),B              
7457   3907 2C                                 INC     L                   
7458   3908 71                                 LD      (HL),C              
7459   3909 2C                                 INC     L                   
7460   390A 3A E6 43                           LD      A,(AbovePlayerBulletMSB)
7461   390D 77                                 LD      (HL),A              
7462   390E 2C                                 INC     L                   
7463   390F 3A E7 43                           LD      A,(AbovePlayerBulletLSB)
7464   3912 77                                 LD      (HL),A              
7465   3913 3A C4 43                           LD      A,(PlayerBulletState)
7466   3916 E6 F7                              AND     $F7                 
7467   3918 32 C4 43                           LD      (PlayerBulletState),A
7468   391B C9                                 RET                         
7469   391C             ;
7470   391C             L391C:
7471   391C 78                                 LD      A,B                 
7472   391D FE 20                              CP      $20                 
7473   391F D2 BC 38                           JP      NC,L38BC            ; 
7474   3922 C9                                 RET                         
7475   3923             ;
7476   3923             L3923:
7477   3923 C8                                 RET     Z                   
7478   3924 35                                 DEC     (HL)                
7479   3925 2E 8D                              LD      L,$8D               
7480   3927 7E                                 LD      A,(HL)              
7481   3928 E6 3F                              AND     $3F                 
7482   392A F6 80                              OR      $80                 
7483   392C 77                                 LD      (HL),A              
7484   392D C9                                 RET                         
7485   392E             
7486   3930                                    .ORG $3930
7487   3930             ;
7488   3930             L3930:
7489   3930 3A D2 4B                           LD      A,(M4BD2)           ; 
7490   3933 E6 1E                              AND     $1E                 
7491   3935 C6 C0                              ADD     T3DC0 & $FF         ; LSB of table T3DC0
7492   3937 6F                                 LD      L,A                 
7493   3938 26 3D                              LD      H,T3DC0 >> 8        ; MSB of table T3DC0
7494   393A 5E                                 LD      E,(HL)              
7495   393B 2C                                 INC     L                   
7496   393C 6E                                 LD      L,(HL)              
7497   393D 26 4B                              LD      H,$4B               
7498   393F CD 00 3A                           CALL    L3A00               ; 
7499   3942 3A 9F 43                           LD      A,(M439F)           ; 
7500   3945 82                                 ADD     A,D                 
7501   3946 4F                                 LD      C,A                 
7502   3947 3A 9E 43                           LD      A,(M439E)           ; 
7503   394A 92                                 SUB     D                   
7504   394B 47                                 LD      B,A                 
7505   394C             L394C:
7506   394C E5                                 PUSH    HL                  
7507   394D CD 5C 39                           CALL    L395C               ; 
7508   3950 E1                                 POP     HL                  
7509   3951 7D                                 LD      A,L                 
7510   3952 C6 08                              ADD     $08                 
7511   3954 6F                                 LD      L,A                 
7512   3955 1D                                 DEC     E                   
7513   3956 C2 4C 39                           JP      NZ,L394C            ; 
7514   3959 C9                                 RET                         
7515   395A             
7516   395C                                    .ORG $395C
7517   395C             ;
7518   395C             L395C:
7519   395C 7E                                 LD      A,(HL)              
7520   395D FE 05                              CP      $05                 
7521   395F D8                                 RET     C                   
7522   3960 7D                                 LD      A,L                 
7523   3961 C6 05                              ADD     $05                 
7524   3963 6F                                 LD      L,A                 
7525   3964 7E                                 LD      A,(HL)              
7526   3965 B8                                 CP      B                   
7527   3966 D8                                 RET     C                   
7528   3967 B9                                 CP      C                   
7529   3968 D0                                 RET     NC                  
7530   3969 D6 04                              SUB     $04                 
7531   396B 47                                 LD      B,A                 
7532   396C 2D                                 DEC     L                   
7533   396D 2D                                 DEC     L                   
7534   396E 2D                                 DEC     L                   
7535   396F 3A D2 4B                           LD      A,(M4BD2)           ; 
7536   3972 86                                 ADD     A,(HL)              
7537   3973 E6 1F                              AND     $1F                 
7538   3975 07                                 RLCA                        ; Multiply by 8 ..
7539   3976 07                                 RLCA                        ; ..
7540   3977 07                                 RLCA                        ; ..
7541   3978 C6 08                              ADD     $08                 
7542   397A 4F                                 LD      C,A                 
7543   397B C3 B7 25                           JP      L25B7               ; 
7544   397E             
7545   3980                                    .ORG $3980
7546   3980             ;
7547   3980             L3980:
7548   3980 3A D2 4B                           LD      A,(M4BD2)           ; 
7549   3983 D6 0C                              SUB     $0C                 
7550   3985 D8                                 RET     C                   
7551   3986 FE 10                              CP      $10                 
7552   3988 D0                                 RET     NC                  
7553   3989 21 C4 43                           LD      HL,PlayerBulletState
7554   398C 11 C0 4B                           LD      DE,M4BC0            ; 
7555   398F 06 04                              LD      B,$04               
7556   3991 CD E0 05                           CALL    CopyBbytesHLtoDE    ; 
7557   3994 2E E6                              LD      L,$E6               
7558   3996 06 02                              LD      B,$02               
7559   3998 CD E0 05                           CALL    CopyBbytesHLtoDE    ; 
7560   399B 2E E2                              LD      L,$E2               
7561   399D 11 E6 43                           LD      DE,AbovePlayerBulletMSB
7562   39A0 06 02                              LD      B,$02               
7563   39A2 CD E0 05                           CALL    CopyBbytesHLtoDE    ; 
7564   39A5 2E C4                              LD      L,$C4               
7565   39A7 36 08                              LD      (HL),$08            
7566   39A9 11 9E 43                           LD      DE,M439E            ; 
7567   39AC 3A 9B 43                           LD      A,(Counter9A+$1)    ; 
7568   39AF 0F                                 RRCA                        
7569   39B0 DA BF 39                           JP      C,L39BF             ; 
7570   39B3 1C                                 INC     E                   
7571   39B4 2E E7                              LD      L,$E7               
7572   39B6 7E                                 LD      A,(HL)              
7573   39B7 D6 20                              SUB     $20                 
7574   39B9 77                                 LD      (HL),A              
7575   39BA 2D                                 DEC     L                   
7576   39BB 7E                                 LD      A,(HL)              
7577   39BC DE 00                              SBC     $00                 
7578   39BE 77                                 LD      (HL),A              
7579   39BF             L39BF:
7580   39BF 1A                                 LD      A,(DE)              
7581   39C0 32 C6 43                           LD      (PlayerBulletX),A   ; 
7582   39C3             L39C3:
7583   39C3 CD 00 38                           CALL    L3800               ; Collision detection for birds
7584   39C6 21 C4 43                           LD      HL,PlayerBulletState
7585   39C9 7E                                 LD      A,(HL)              
7586   39CA E6 08                              AND     $08                 
7587   39CC CA F0 39                           JP      Z,L39F0             ; 
7588   39CF 21 E7 43                           LD      HL,AbovePlayerBulletLSB
7589   39D2 34                                 INC     (HL)                
7590   39D3 7E                                 LD      A,(HL)              
7591   39D4 E6 1F                              AND     $1F                 
7592   39D6 FE 1D                              CP      $1D                 
7593   39D8 DA C3 39                           JP      C,L39C3             ; 
7594   39DB             L39DB:
7595   39DB 21 C0 4B                           LD      HL,M4BC0            ; 
7596   39DE 11 C4 43                           LD      DE,PlayerBulletState
7597   39E1 06 04                              LD      B,$04               
7598   39E3 CD E0 05                           CALL    CopyBbytesHLtoDE    ; 
7599   39E6 1E E6                              LD      E,$E6               
7600   39E8 06 02                              LD      B,$02               
7601   39EA C3 E0 05                           JP      CopyBbytesHLtoDE    ; 
7602   39ED             
7603   39F0                                    .ORG $39F0
7604   39F0             ;
7605   39F0             L39F0:
7606   39F0 2E A6                              LD      L,$A6               
7607   39F2 7E                                 LD      A,(HL)              
7608   39F3 FE C0                              CP      $C0                 
7609   39F5 DA C4 0C                           JP      C,L0CC4             ; 
7610   39F8 D6 01                              SUB     $01                 
7611   39FA 77                                 LD      (HL),A              
7612   39FB C3 DB 39                           JP      L39DB               ; 
7613   39FE             
7614   3A00                                    .ORG $3A00
7615   3A00             ;
7616   3A00             L3A00:
7617   3A00 3A BB 43                           LD      A,(BirdsLeft)       ; 
7618   3A03 D6 0C                              SUB     $0C                 
7619   3A05 2F                                 CPL                         
7620   3A06 3C                                 INC     A                   
7621   3A07 57                                 LD      D,A                 
7622   3A08 3A 9B 43                           LD      A,(Counter9A+$1)    ; 
7623   3A0B 0F                                 RRCA                        
7624   3A0C 0F                                 RRCA                        
7625   3A0D D8                                 RET     C                   
7626   3A0E E1                                 POP     HL                  
7627   3A0F C9                                 RET                         
7628   3A10             ;
7629   3A10             L3A10:
7630   3A10 21 B8 43                           LD      HL,LevelAndRound    ; 
7631   3A13 7E                                 LD      A,(HL)              ; get it
7632   3A14 A7                                 AND     A                   ; updates the zero flag
7633   3A15 C2 43 3B                           JP      NZ,L3B43            ; if LevelAndRound is not 0.
7634   3A18 2E 8D                              LD      L,$8D               ; set SoundControlB for...
7635   3A1A 36 CF                              LD      (HL),$CF            ; ... 1100_1111 triggers Tune3 -- ESTUDIO (Phoenix theme song)
7636   3A1C C9                                 RET                         ;
7637   3A1D             ;
7638   3A1D             L3A1D:
7639   3A1D 21 69 43                           LD      HL,M4369            ; 
7640   3A20 7E                                 LD      A,(HL)              ;
7641   3A21 A7                                 AND     A                   ; updates the zero flag
7642   3A22 CA 40 3A                           JP      Z,L3A40             ; if $4369 is 0.
7643   3A25 FE 20                              CP      $20                 
7644   3A27 DA 2C 3A                           JP      C,L3A2C             ; 
7645   3A2A 36 20                              LD      (HL),$20            
7646   3A2C             L3A2C:
7647   3A2C 35                                 DEC     (HL)                
7648   3A2D 7E                                 LD      A,(HL)              
7649   3A2E 07                                 RLCA                        ; Multiply by 4 ..
7650   3A2F 07                                 RLCA                        ; ..
7651   3A30 00                                 NOP                         
7652   3A31 2F                                 CPL                         
7653   3A32 E6 0E                              AND     $0E                 
7654   3A34 2E 8D                              LD      L,$8D               
7655   3A36 77                                 LD      (HL),A              
7656   3A37 2E 68                              LD      L,$68               
7657   3A39 36 00                              LD      (HL),$00            
7658   3A3B 2E 66                              LD      L,$66               
7659   3A3D 36 00                              LD      (HL),$00            
7660   3A3F C9                                 RET                         
7661   3A40             ;
7662   3A40             L3A40:
7663   3A40 2E 64                              LD      L,$64               
7664   3A42 7E                                 LD      A,(HL)              
7665   3A43 A7                                 AND     A                   ; updates the zero flag
7666   3A44 CA 62 3A                           JP      Z,L3A62             ; 
7667   3A47 FE 10                              CP      $10                 
7668   3A49 DA 4E 3A                           JP      C,L3A4E             ; 
7669   3A4C 36 10                              LD      (HL),$10            
7670   3A4E             L3A4E:
7671   3A4E 35                                 DEC     (HL)                
7672   3A4F 7E                                 LD      A,(HL)              
7673   3A50 0F                                 RRCA                        
7674   3A51 00                                 NOP                         
7675   3A52 00                                 NOP                         
7676   3A53 2F                                 CPL                         
7677   3A54 E6 07                              AND     $07                 
7678   3A56 F6 10                              OR      $10                 
7679   3A58 2E 8C                              LD      L,$8C               
7680   3A5A 77                                 LD      (HL),A              
7681   3A5B 2E 66                              LD      L,$66               
7682   3A5D 36 00                              LD      (HL),$00            
7683   3A5F C9                                 RET                         
7684   3A60             
7685   3A62                                    .ORG $3A62
7686   3A62             ;
7687   3A62             L3A62:
7688   3A62 2E 66                              LD      L,$66               
7689   3A64 7E                                 LD      A,(HL)              
7690   3A65 A7                                 AND     A                   ; updates the zero flag
7691   3A66 C8                                 RET     Z                   
7692   3A67 FE 10                              CP      $10                 
7693   3A69 DA 78 3A                           JP      C,L3A78             ; 
7694   3A6C 36 10                              LD      (HL),$10            
7695   3A6E 3A B8 43                           LD      A,(LevelAndRound)   ; 
7696   3A71 E6 08                              AND     $08                 
7697   3A73 CA 78 3A                           JP      Z,L3A78             ; 
7698   3A76 36 05                              LD      (HL),$05            
7699   3A78             L3A78:
7700   3A78 35                                 DEC     (HL)                
7701   3A79 2E 8C                              LD      L,$8C               
7702   3A7B 7E                                 LD      A,(HL)              
7703   3A7C E6 08                              AND     $08                 
7704   3A7E F6 04                              OR      $04                 
7705   3A80 77                                 LD      (HL),A              
7706   3A81 C9                                 RET                         
7707   3A82             ;
7708   3A82             L3A82:
7709   3A82 21 9A 43                           LD      HL,Counter9A        ; 
7710   3A85 7E                                 LD      A,(HL)              
7711   3A86 FE 03                              CP      $03                 
7712   3A88 D8                                 RET     C                   
7713   3A89 2E 8D                              LD      L,$8D               
7714   3A8B 7E                                 LD      A,(HL)              
7715   3A8C E6 3F                              AND     $3F                 
7716   3A8E 77                                 LD      (HL),A              
7717   3A8F C9                                 RET                         
7718   3A90             ;
7719   3A90             L3A90:
7720   3A90 21 6B 43                           LD      HL,M436B            ; 
7721   3A93 7E                                 LD      A,(HL)              
7722   3A94 A7                                 AND     A                   ; updates the zero flag
7723   3A95 C3 23 39                           JP      L3923               ; 
7724   3A98             ;
7725   3A98             L3A98:
7726   3A98 21 70 4B                           LD      HL,M4B70            ; 
7727   3A9B 01 00 08                           LD      BC,$0800            
7728   3A9E 11 B0 03                           LD      DE,$03B0            
7729   3AA1             L3AA1:
7730   3AA1 7E                                 LD      A,(HL)              
7731   3AA2 2C                                 INC     L                   
7732   3AA3 A0                                 AND     B                   
7733   3AA4 CA AE 3A                           JP      Z,L3AAE             ; 
7734   3AA7 7E                                 LD      A,(HL)              
7735   3AA8 FE 28                              CP      $28                 
7736   3AAA DA AE 3A                           JP      C,L3AAE             ; 
7737   3AAD 0C                                 INC     C                   
7738   3AAE             L3AAE:
7739   3AAE 7D                                 LD      A,L                 
7740   3AAF 82                                 ADD     A,D                 
7741   3AB0 6F                                 LD      L,A                 
7742   3AB1 BB                                 CP      E                   
7743   3AB2 C2 A1 3A                           JP      NZ,L3AA1            ; 
7744   3AB5 79                                 LD      A,C                 
7745   3AB6 A7                                 AND     A                   ; updates the zero flag
7746   3AB7 C8                                 RET     Z                   
7747   3AB8 FE 08                              CP      $08                 
7748   3ABA DA BF 3A                           JP      C,L3ABF             ; 
7749   3ABD 3E 08                              LD      A,$08               
7750   3ABF             L3ABF:
7751   3ABF C6 25                              ADD     $25                 
7752   3AC1 4F                                 LD      C,A                 
7753   3AC2 21 8C 43                           LD      HL,SoundControlA    ; 
7754   3AC5 7E                                 LD      A,(HL)              
7755   3AC6 E6 C0                              AND     $C0                 ; mask out 1100_0000
7756   3AC8 B1                                 OR      C                   
7757   3AC9 77                                 LD      (HL),A              ; trigger sound control A
7758   3ACA C9                                 RET                         
7759   3ACB             
7760   3AD0                                    .ORG $3AD0
7761   3AD0             ;
7762   3AD0             L3AD0:
7763   3AD0 21 8E 43                           LD      HL,M438E            ; 
7764   3AD3 7E                                 LD      A,(HL)              
7765   3AD4 E6 01                              AND     $01                 
7766   3AD6 07                                 RLCA                        ; Multiply by 4 ..
7767   3AD7 07                                 RLCA                        ; ..
7768   3AD8 F6 20                              OR      $20                 
7769   3ADA 47                                 LD      B,A                 
7770   3ADB 2D                                 DEC     L                   
7771   3ADC 7E                                 LD      A,(HL)              
7772   3ADD E6 C0                              AND     $C0                 
7773   3ADF B0                                 OR      B                   
7774   3AE0 77                                 LD      (HL),A              
7775   3AE1 2E 96                              LD      L,$96               
7776   3AE3 7E                                 LD      A,(HL)              
7777   3AE4 34                                 INC     (HL)                
7778   3AE5 A7                                 AND     A                   ; updates the zero flag
7779   3AE6 CA F8 3A                           JP      Z,L3AF8             ; 
7780   3AE9 3A D6 4B                           LD      A,(M4BD6)           ; 
7781   3AEC C6 E0                              ADD     $E0                 ; LSB of table T3DE0
7782   3AEE 5F                                 LD      E,A                 
7783   3AEF 16 3D                              LD      D,$3D               ; MSB of table T3DE0
7784   3AF1 1A                                 LD      A,(DE)              
7785   3AF2 BE                                 CP      (HL)                
7786   3AF3 D0                                 RET     NC                  
7787   3AF4 36 00                              LD      (HL),$00            
7788   3AF6 C9                                 RET                         
7789   3AF7             
7790   3AF8                                    .ORG $3AF8
7791   3AF8             ;
7792   3AF8             L3AF8:
7793   3AF8 2E 8E                              LD      L,$8E               
7794   3AFA 34                                 INC     (HL)                
7795   3AFB 2D                                 DEC     L                   
7796   3AFC 7E                                 LD      A,(HL)              
7797   3AFD F6 10                              OR      $10                 
7798   3AFF 77                                 LD      (HL),A              
7799   3B00 C9                                 RET                         
7800   3B01             
7801   3B02                                    .ORG $3B02
7802   3B02             ;
7803   3B02             L3B02:
7804   3B02 21 9A 43                           LD      HL,Counter9A        ; 
7805   3B05 7E                                 LD      A,(HL)              
7806   3B06 FE 02                              CP      $02                 
7807   3B08 D0                                 RET     NC                  
7808   3B09 2C                                 INC     L                   
7809   3B0A 7E                                 LD      A,(HL)              
7810   3B0B 47                                 LD      B,A                 
7811   3B0C E6 60                              AND     $60                 
7812   3B0E 2E 8D                              LD      L,$8D               
7813   3B10 36 0A                              LD      (HL),$0A            
7814   3B12 C0                                 RET     NZ                  
7815   3B13 78                                 LD      A,B                 
7816   3B14 E6 02                              AND     $02                 
7817   3B16 C6 1C                              ADD     $1C                 
7818   3B18 77                                 LD      (HL),A              
7819   3B19 C9                                 RET                         
7820   3B1A             
7821   3B1B                                    .ORG $3B1B
7822   3B1B             ;
7823   3B1B             L3B1B:
7824   3B1B 21 62 43                           LD      HL,M4362            ; 
7825   3B1E 7E                                 LD      A,(HL)              
7826   3B1F A7                                 AND     A                   ; updates the zero flag
7827   3B20 C8                                 RET     Z                   ; if $4362 is 0.
7828   3B21 FE 40                              CP      $40                 
7829   3B23 DA 28 3B                           JP      C,L3B28             ; 
7830   3B26 36 40                              LD      (HL),$40            
7831   3B28             L3B28:
7832   3B28 35                                 DEC     (HL)                
7833   3B29 7E                                 LD      A,(HL)              
7834   3B2A E6 06                              AND     $06                 
7835   3B2C 07                                 RLCA                        ; Multiply by 2
7836   3B2D 00                                 NOP                         
7837   3B2E 2E 8D                              LD      L,$8D               
7838   3B30 77                                 LD      (HL),A              
7839   3B31 C9                                 RET                         
7840   3B32             
7841   3B33                                    .ORG $3B33
7842   3B33             ;
7843   3B33             L3B33:
7844   3B33 21 6A 43                           LD      HL,M436A            ; 
7845   3B36 7E                                 LD      A,(HL)              
7846   3B37 A7                                 AND     A                   ; updates the zero flag
7847   3B38 C8                                 RET     Z                   ; if $436A is 0.
7848   3B39 35                                 DEC     (HL)                
7849   3B3A E6 08                              AND     $08                 
7850   3B3C F6 07                              OR      $07                 
7851   3B3E 2E 8D                              LD      L,$8D               
7852   3B40 77                                 LD      (HL),A              
7853   3B41 C9                                 RET                         
7854   3B42             
7855   3B43                                    .ORG $3B43
7856   3B43             ;
7857   3B43             L3B43:
7858   3B43 21 A4 43                           LD      HL,GameState        ; 
7859   3B46 7E                                 LD      A,(HL)              ;
7860   3B47 FE 03                              CP      $03                 ;
7861   3B49 CC D6 23                           CALL    Z,L23D6             ; if GameState is 'normal game play'
7862   3B4C CD 33 3B                           CALL    L3B33               ; 
7863   3B4F CD 1B 3B                           CALL    L3B1B               ; 
7864   3B52 CD 1D 3A                           CALL    L3A1D               ; 
7865   3B55 CD BD 27                           CALL    L27BD               ; 
7866   3B58 CD 82 3A                           CALL    L3A82               ; 
7867   3B5B C3 90 3A                           JP      L3A90               ; 
7868   3B5E             
7869   3B60                                    .ORG $3B60
7870   3B60             ;?
7871   3B60             T3B60:
7872   3B60 1F 7C F0 01                        .DB $1F, $7C, $F0, $01, $C0
7872   3B64 C0 
7873   3B65 07 7F FC F0                        .DB $07, $7F, $FC, $F0, $07, $C0, $1F, $FF, $FC, $03, $F0
7873   3B69 07 C0 1F FF 
7873   3B6D FC 03 F0 
7874   3B70 0F C0 3F FC                        .DB $0F, $C0, $3F, $FC, $1F, $F0, $07, $FE, $3F, $F8, $0F, $FF, $FF, $FC, $1F, $FF
7874   3B74 1F F0 07 FE 
7874   3B78 3F F8 0F FF 
7874   3B7C FF FC 1F FF 
7875   3B80 FC 1F FC 1F                        .DB $FC, $1F, $FC, $1F, $F0, $7F, $F0, $7F, $C0, $FF, $01, $C0, $FF, $01, $00, $FF
7875   3B84 F0 7F F0 7F 
7875   3B88 C0 FF 01 C0 
7875   3B8C FF 01 00 FF 
7876   3B90 07 00 FF 07                        .DB $07, $00, $FF, $07, $FC, $1F, $FC, $1F, $F0, $7F, $F0, $7F, $C0, $FF, $01, $C0
7876   3B94 FC 1F FC 1F 
7876   3B98 F0 7F F0 7F 
7876   3B9C C0 FF 01 C0 
7877   3BA0 FF 01 00 FF                        .DB $FF, $01, $00, $FF, $07, $FF, $07, $FC, $1F, $F8, $0F, $F0, $C0, $03, $FF, $FF
7877   3BA4 07 FF 07 FC 
7877   3BA8 1F F8 0F F0 
7877   3BAC C0 03 FF FF 
7878   3BB0 03 E0 03 E0                        .DB $03, $E0, $03, $E0, $0F, $80, $0F, $00, $3C, $00, $1E, $3F, $00, $FC, $F0, $00
7878   3BB4 0F 80 0F 00 
7878   3BB8 3C 00 1E 3F 
7878   3BBC 00 FC F0 00 
7879   3BC0 7F FE 00 F0                        .DB $7F, $FE, $00, $F0, $03, $E0, $00, $00, $0F, $80, $00, $00, $3F, $00, $FE, $30
7879   3BC4 03 E0 00 00 
7879   3BC8 0F 80 00 00 
7879   3BCC 3F 00 FE 30 
7880   3BD0 00 06 FF 00                        .DB $00, $06, $FF, $00, $F8, $00, $00, $03, $E0, $00, $E0, $08, $20, $04, $C0, $01
7880   3BD4 F8 00 00 03 
7880   3BD8 E0 00 E0 08 
7880   3BDC 20 04 C0 01 
7881   3BE0 E0 03 F8 0F                        .DB $E0, $03, $F8, $0F, $07, $E0, $3F, $03, $FF, $FF, $FF, $3F, $FC, $FF, $F8, $FF
7881   3BE4 07 E0 3F 03 
7881   3BE8 FF FF FF 3F 
7881   3BEC FC FF F8 FF 
7882   3BF0 FF 07 E0 1F                        .DB $FF, $07, $E0, $1F, $F0, $FF, $FC, $FF, $07, $1E, $FC, $1F, $1F, $7F, $FF, $FF
7882   3BF4 F0 FF FC FF 
7882   3BF8 07 1E FC 1F 
7882   3BFC 1F 7F FF FF 
7883   3C00             ;bird character block shapes table (using character set B)
7884   3C00             T3C00:
7885   3C00 E8 00 E9 00                        .DB $E8, $00, $E9, $00, $C4, $C6, $C5, $C7, $EA, $00, $EB, $00, $00, $00       ;bird shape #24 Object 3C00
7885   3C04 C4 C6 C5 C7 
7885   3C08 EA 00 EB 00 
7885   3C0C 00 00 
7886   3C0E EC 00 E9 00                        .DB $EC, $00, $E9, $00, $C8, $CA, $C9, $CB, $EA, $00, $ED, $00, $00, $00       ;#28 Object 3C0E
7886   3C12 C8 CA C9 CB 
7886   3C16 EA 00 ED 00 
7886   3C1A 00 00 
7887   3C1C EE 00 EF 00                        .DB $EE, $00, $EF, $00, $CC, $CF, $CD, $D0, $CE, $D1, $F0, $00, $F1, $00       ;#29 Object 3C1C
7887   3C20 CC CF CD D0 
7887   3C24 CE D1 F0 00 
7887   3C28 F1 00 
7888   3C2A F2 00 EF 00                        .DB $F2, $00, $EF, $00, $D2, $00, $D3, $D5, $D4, $D6, $F0, $00, $F3, $00       ;#30 Object 3C2A
7888   3C2E D2 00 D3 D5 
7888   3C32 D4 D6 F0 00 
7888   3C36 F3 00 
7889   3C38 E8 00 E9 00                        .DB $E8, $00, $E9, $00, $C4, $C6, $C5, $C7, $00, $00                   ;#24 without right wing Object 3C38
7889   3C3C C4 C6 C5 C7 
7889   3C40 00 00 
7890   3C42 EC 00 E9 00                        .DB $EC, $00, $E9, $00, $C8, $CA, $C9, $CB, $00, $00                   ;#28 without right wing Object 3C42
7890   3C46 C8 CA C9 CB 
7890   3C4A 00 00 
7891   3C4C EE 00 EF 00                        .DB $EE, $00, $EF, $00, $CC, $CF, $CD, $D0, $DD, $D1                   ;#29 without right wing and regrowing ($DD) Object 3C4C
7891   3C50 CC CF CD D0 
7891   3C54 DD D1 
7892   3C56 F2 00 EF 00                        .DB $F2, $00, $EF, $00, $D2, $00, $D3, $D5, $DD, $D6                   ;#30 without right wing and regrowing ($DD) Object 3C56
7892   3C5A D2 00 D3 D5 
7892   3C5E DD D6 
7893   3C60 00 00 00 00                        .DB $00, $00, $00, $00, $C4, $C6, $C5, $C7, $EA, $00, $EB, $00, $00, $00       ;#24 without left wing Object 3C60
7893   3C64 C4 C6 C5 C7 
7893   3C68 EA 00 EB 00 
7893   3C6C 00 00 
7894   3C6E 00 00 00 00                        .DB $00, $00, $00, $00, $DB, $CA, $C9, $CB, $EA, $00, $ED, $00, $00, $00       ;#28 without left wing and regrowing ($DB) Object 3C6E
7894   3C72 DB CA C9 CB 
7894   3C76 EA 00 ED 00 
7894   3C7A 00 00 
7895   3C7C 00 00 00 00                        .DB $00, $00, $00, $00, $DC, $CF, $CD, $D0, $CE, $D1, $F0, $00, $F1, $00       ;#29 without left wing and regrowing ($DC) Object 3C7C
7895   3C80 DC CF CD D0 
7895   3C84 CE D1 F0 00 
7895   3C88 F1 00 
7896   3C8A 00 00 00 00                        .DB $00, $00, $00, $00, $00, $00, $D3, $D5, $D4, $D6, $F0, $00, $F3, $00       ;#30 without left wing Object 3C8A
7896   3C8E 00 00 D3 D5 
7896   3C92 D4 D6 F0 00 
7896   3C96 F3 00 
7897   3C98 00 00 00 00                        .DB $00, $00, $00, $00, $C4, $C6, $C5, $C7, $00, $00                   ;#24 without left and right wing Object 3C98
7897   3C9C C4 C6 C5 C7 
7897   3CA0 00 00 
7898   3CA2 00 00 00 00                        .DB $00, $00, $00, $00, $DB, $CA, $C9, $CB, $00, $00                   ;#28 without left and right wing and regrowing ($DB) Object 3CA2
7898   3CA6 DB CA C9 CB 
7898   3CAA 00 00 
7899   3CAC 00 00 00 00                        .DB $00, $00, $00, $00, $DC, $CF, $CD, $D0, $DD, $D1                   ;#29 without left and right wing and regrowing ($DC,$DD) Object 3CAC
7899   3CB0 DC CF CD D0 
7899   3CB4 DD D1 
7900   3CB6 00 00 00 00                        .DB $00, $00, $00, $00, $00, $00, $D3, $D5, $DD, $D6                   ;#30 without left and right wing and regrowing ($DD) Object 3CB6
7900   3CBA 00 00 D3 D5 
7900   3CBE DD D6 
7901   3CC0 00 00 DE E2                        .DB $00, $00, $DE, $E2, $AB, $B2, $AC, $B3, $DF, $E3, $00, $00             ;#21 Object 3CC0
7901   3CC4 AB B2 AC B3 
7901   3CC8 DF E3 00 00 
7902   3CCC 00 00 00 E5                        .DB $00, $00, $00, $E5, $B4, $B6, $B5, $B7, $E4, $E6, $00, $00             ;#25 Object 3CCC
7902   3CD0 B4 B6 B5 B7 
7902   3CD4 E4 E6 00 00 
7903   3CD8 00 00 00 00                        .DB $00, $00, $00, $00, $B8, $BB, $B9, $BC, $BA, $BD, $00, $00             ;#26 Object 3CD8
7903   3CDC B8 BB B9 BC 
7903   3CE0 BA BD 00 00 
7904   3CE4 00 00 00 00                        .DB $00, $00, $00, $00, $BE, $C1, $BF, $C2, $C0, $C3, $00, $E7             ;#27 Object 3CE4
7904   3CE8 BE C1 BF C2 
7904   3CEC C0 C3 00 E7 
7905   3CF0 FF FF FF FF                        .DB $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF ;not used
7905   3CF4 FF FF FF FF 
7905   3CF8 FF FF FF FF 
7905   3CFC FF FF FF FF 
7906   3D00 00 00 FA FC                        .DB $00, $00, $FA, $FC, $D7, $D9, $D8, $DA, $FB, $FD, $00, $00             ;#22 Object 3D00
7906   3D04 D7 D9 D8 DA 
7906   3D08 FB FD 00 00 
7907   3D0C F4 F6 F5 00                        .DB $F4, $F6, $F5, $00, $C4, $C6, $C5, $C7, $F7, $00, $F8, $F9             ;#23 Object 3D0C
7907   3D10 C4 C6 C5 C7 
7907   3D14 F7 00 F8 F9 
7908   3D18 00 00 00 00                        .DB $00, $00, $00, $00, $A7, $A9, $A8, $AA, $00, $00                   ;#17 Object 3D18
7908   3D1C A7 A9 A8 AA 
7908   3D20 00 00 
7909   3D22 00 00 00 00                        .DB $00, $00, $00, $00, $AB, $AD, $AC, $AE, $00, $00                   ;#18 Object 3D22
7909   3D26 AB AD AC AE 
7909   3D2A 00 00 
7910   3D2C 00 00 DE 00                        .DB $00, $00, $DE, $00, $AB, $B0, $AC, $B1, $DF, $00                   ;#19 Object 3D2C
7910   3D30 AB B0 AC B1 
7910   3D34 DF 00 
7911   3D36 00 00 DE E0                        .DB $00, $00, $DE, $E0, $AB, $B2, $AC, $B3, $DF, $E1                   ;#20 Object 3D36
7911   3D3A AB B2 AC B3 
7911   3D3E DF E1 
7912   3D40 00 00 9D 00                        .DB $00, $00, $9D, $00, $9E, $00, $00, $00                         ;#12 Object 3D40
7912   3D44 9E 00 00 00 
7913   3D48 00 00 9F 00                        .DB $00, $00, $9F, $00, $A0, $00, $00, $00                         ;#13 Object 3D48
7913   3D4C A0 00 00 00 
7914   3D50 00 00 00 00                        .DB $00, $00, $00, $00, $9C, $00, $00, $00                         ;#11 Object 3D50
7914   3D54 9C 00 00 00 
7915   3D58 00 00 00 00                        .DB $00, $00, $00, $00, $A3, $A5, $A4, $A6                         ;#16 Object 3D58
7915   3D5C A3 A5 A4 A6 
7916   3D60 00 00 9C 00                        .DB $00, $00, $9C, $00, $00, $00                               ;#11 one pos moved to the left Object 3D60
7916   3D64 00 00 
7917   3D66 00 00 9D 00                        .DB $00, $00, $9D, $00, $9E, $00                               ;#12 (but 3x2) Object 3D66
7917   3D6A 9E 00 
7918   3D6C 00 00 9F 00                        .DB $00, $00, $9F, $00, $A0, $00                               ;#13 Object 3D6C
7918   3D70 A0 00 
7919   3D72 00 00 A1 00                        .DB $00, $00, $A1, $00, $A2, $00                               ;#14 Object 3D72
7919   3D76 A2 00 
7920   3D78 00 00 96 00                        .DB $00, $00, $96, $00, $00, $00                               ;#7 Object 3D78
7920   3D7C 00 00 
7921   3D7E 00 00 97 00                        .DB $00, $00, $97, $00, $93, $00                               ;#8 Object 3D7E
7921   3D82 93 00 
7922   3D84 00 00 98 00                        .DB $00, $00, $98, $00, $99, $00                               ;#9 Object 3D84
7922   3D88 99 00 
7923   3D8A 00 00 9A 00                        .DB $00, $00, $9A, $00, $9B, $00                               ;#10 Object 3D8A
7923   3D8E 9B 00 
7924   3D90 00 00 90 00                        .DB $00, $00, $90, $00, $00, $00                               ;#3 Object 3D90
7924   3D94 00 00 
7925   3D96 00 00 91 00                        .DB $00, $00, $91, $00, $00, $00                               ;#4 Object 3D96
7925   3D9A 00 00 
7926   3D9C 00 00 92 00                        .DB $00, $00, $92, $00, $93, $00                               ;#5 Object 3D9C
7926   3DA0 93 00 
7927   3DA2 00 00 94 00                        .DB $00, $00, $94, $00, $95, $00                               ;#6 Object 3DA2
7927   3DA6 95 00 
7928   3DA8 00 00 01 00                        .DB $00, $00, $01, $00                                     ;like small star Object 3DA8
7929   3DAC 00 00 08 00                        .DB $00, $00, $08, $00                                     ;like medium star Object 3DAC
7930   3DB0 00 00 0A 00                        .DB $00, $00, $0A, $00                                     ;like big star Object 3DB0
7931   3DB4 00 00 0B 00                        .DB $00, $00, $0B, $00, $0C, $0C, $0E, $FF                         ;group of stars Object 3DB4
7931   3DB8 0C 0C 0E FF 
7932   3DBC 0D 0E 0D FF                        .DB $0D, $0E, $0D, $FF                                     ;group of stars Object 3DBC
7933   3DC0             
7934   3DC0             ; ?
7935   3DC0             T3DC0:
7936   3DC0 06 70                              .DB $06, $70
7937   3DC2 07 70                              .DB $07, $70
7938   3DC4 08 70                              .DB $08, $70
7939   3DC6 08 70                              .DB $08, $70
7940   3DC8 08 70                              .DB $08, $70
7941   3DCA 07 78                              .DB $07, $78
7942   3DCC 06 80                              .DB $06, $80
7943   3DCE 05 88                              .DB $05, $88
7944   3DD0 04 90                              .DB $04, $90
7945   3DD2 03 98                              .DB $03, $98
7946   3DD4 02 A0                              .DB $02, $A0
7947   3DD6 01 A8                              .DB $01, $A8
7948   3DD8 02 70                              .DB $02, $70
7949   3DDA 03 70                              .DB $03, $70
7950   3DDC 04 70                              .DB $04, $70
7951   3DDE 05 70                              .DB $05, $70
7952   3DE0             
7953   3DE0             ; sinus motion like, y pos table used by big birds ?
7954   3DE0             T3DE0:
7955   3DE0 40 40 40 40                        .DB $40, $40, $40, $40, $40, $40, $40, $34, $2C, $26, $20, $1C, $18, $14, $12, $0F
7955   3DE4 40 40 40 34 
7955   3DE8 2C 26 20 1C 
7955   3DEC 18 14 12 0F 
7956   3DF0 0D 0B 09 08                        .DB $0D, $0B, $09, $08, $07, $06, $05, $04, $03, $02, $02, $02, $02, $02, $02, $02
7956   3DF4 07 06 05 04 
7956   3DF8 03 02 02 02 
7956   3DFC 02 02 02 02 
7957   3E00 01 02 04 08                        .DB $01, $02, $04, $08, $10, $20, $40, $80
7957   3E04 10 20 40 80 
7958   3E08             
7959   3E08             ;address table for bird character block shapes (grouped by animation pattern)
7960   3E08             T3E08:
7961   3E08 3D A8                              .DB $3D, $A8 ;like small star                  2x2
7962   3E0A 3D AC                              .DB $3D, $AC ;like medium star                 2x2
7963   3E0C 3D B0                              .DB $3D, $B0 ;like big star                    2x2
7964   3E0E             
7965   3E0E 3D B4                              .DB $3D, $B4 ;group of stars
7966   3E10             
7967   3E10             ;growing up
7968   3E10 3D 90                              .DB $3D, $90 ;#3                               3x2
7969   3E12 3D 96                              .DB $3D, $96 ;#4                               3x2
7970   3E14 3D 9C                              .DB $3D, $9C ;#5                               3x2
7971   3E16 3D A2                              .DB $3D, $A2 ;#6                               3x2
7972   3E18 3D 78                              .DB $3D, $78 ;#7                               3x2
7973   3E1A 3D 7E                              .DB $3D, $7E ;#8                               3x2
7974   3E1C 3D 84                              .DB $3D, $84 ;#9                               3x2
7975   3E1E 3D 8A                              .DB $3D, $8A ;#10                              3x2
7976   3E20 3D 60                              .DB $3D, $60 ;#11 one pos moved to the left    3x2
7977   3E22 3D 66                              .DB $3D, $66 ;#12 (but 3x2)                    3x2
7978   3E24 3D 6C                              .DB $3D, $6C ;#13                              3x2
7979   3E26 3D 72                              .DB $3D, $72 ;#14                              3x2
7980   3E28             
7981   3E28 3D 40                              .DB $3D, $40 ;#12                              4x2
7982   3E2A 3D 48                              .DB $3D, $48 ;#13                              4x2
7983   3E2C 3D 50                              .DB $3D, $50 ;#11                              4x2
7984   3E2E 3D 58                              .DB $3D, $58 ;#16                              4x2
7985   3E30             
7986   3E30 3D 18                              .DB $3D, $18 ;#17                              5x2
7987   3E32 3D 22                              .DB $3D, $22 ;#18                              5x2
7988   3E34 3D 2C                              .DB $3D, $2C ;#19                              5x2
7989   3E36 3D 36                              .DB $3D, $36 ;#20                              5x2
7990   3E38             
7991   3E38 3C C0                              .DB $3C, $C0 ;#21                              6x2
7992   3E3A 3D 00                              .DB $3D, $00 ;#22                              6x2
7993   3E3C 3D 0C                              .DB $3D, $0C ;#23                              6x2
7994   3E3E             
7995   3E3E 3C 00                              .DB $3C, $00 ;#24                              7x2
7996   3E40             
7997   3E40             ;get smaller and move to left
7998   3E40 3D 58                              .DB $3D, $58 ;#16                              4x2
7999   3E42 3D 50                              .DB $3D, $50 ;#11                              4x2
8000   3E44 3D 48                              .DB $3D, $48 ;#13                              4x2
8001   3E46 3D 40                              .DB $3D, $40 ;#12                              4x2
8002   3E48             
8003   3E48             ;get smaller
8004   3E48 3D 36                              .DB $3D, $36 ;#20                              5x2
8005   3E4A 3D 2C                              .DB $3D, $2C ;#19                              5x2
8006   3E4C 3D 22                              .DB $3D, $22 ;#18                              5x2
8007   3E4E 3D 18                              .DB $3D, $18 ;#17                              5x2
8008   3E50             
8009   3E50             ;wings going down
8010   3E50 3C 00                              .DB $3C, $00 ;#24                              7x2
8011   3E52 3D 0C                              .DB $3D, $0C ;#23                              6x2
8012   3E54 3D 00                              .DB $3D, $00 ;#22                              6x2
8013   3E56 3C C0                              .DB $3C, $C0 ;#21                              6x2
8014   3E58             
8015   3E58             ;wings up and move to right
8016   3E58 3C 00                              .DB $3C, $00 ;#24                              7x2
8017   3E5A 3C 0E                              .DB $3C, $0E ;#28                              7x2
8018   3E5C 3C 1C                              .DB $3C, $1C ;#29                              7x2
8019   3E5E 3C 2A                              .DB $3C, $2A ;#30                              7x2
8020   3E60             
8021   3E60             ;wings up and move to right
8022   3E60 3C 38                              .DB $3C, $38 ;#24 without right wing           5x2
8023   3E62 3C 42                              .DB $3C, $42 ;#28 without right wing           5x2
8024   3E64 3C 4C                              .DB $3C, $4C ;#29 without right wing reg.      5x2
8025   3E66 3C 56                              .DB $3C, $56 ;#30 without right wing reg.      5x2
8026   3E68             
8027   3E68             ;wings up and move to right
8028   3E68 3C 60                              .DB $3C, $60 ;#24 without left wing            7x2
8029   3E6A 3C 6E                              .DB $3C, $6E ;#28 without left wing reg.       7x2
8030   3E6C 3C 7C                              .DB $3C, $7C ;#29 without left wing reg.       7x2
8031   3E6E 3C 8A                              .DB $3C, $8A ;#30 without left wing            7x2
8032   3E70             
8033   3E70             ;wings up and move to right
8034   3E70 3C 98                              .DB $3C, $98 ;#24 without left/right wing      5x2
8035   3E72 3C A2                              .DB $3C, $A2 ;#28 without left/right wing reg  5x2
8036   3E74 3C AC                              .DB $3C, $AC ;#29 without left/right wing reg  5x2
8037   3E76 3C B6                              .DB $3C, $B6 ;#30 without left/right wing reg  5x2
8038   3E78             
8039   3E78             ;wings down and move to right
8040   3E78 3C C0                              .DB $3C, $C0 ;#21                              6x2
8041   3E7A 3C CC                              .DB $3C, $CC ;#25                              6x2
8042   3E7C 3C D8                              .DB $3C, $D8 ;#26                              6x2
8043   3E7E 3C E4                              .DB $3C, $E4 ;#27                              6x2
8044   3E80             
8045   3E80             ;for birds
8046   3E80             ;copy to $436E,(+10) $436D
8047   3E80             T3E80:
8048   3E80 05 40                              .DB $05, $40
8049   3E82 05 20                              .DB $05, $20
8050   3E84 04 30                              .DB $04, $30
8051   3E86 04 10                              .DB $04, $10
8052   3E88             ;not used?
8053   3E88 06 48                              .DB $06, $48
8054   3E8A 06 28                              .DB $06, $28
8055   3E8C 05 38                              .DB $05, $38
8056   3E8E 05 18                              .DB $05, $18
8057   3E90             ;not used?
8058   3E90 07 50                              .DB $07, $50
8059   3E92 07 30                              .DB $07, $30
8060   3E94 06 40                              .DB $06, $40
8061   3E96 06 20                              .DB $06, $20
8062   3E98             ;not used?
8063   3E98 08 58                              .DB $08, $58
8064   3E9A 08 38                              .DB $08, $38
8065   3E9C 07 48                              .DB $07, $48
8066   3E9E 07 28                              .DB $07, $28
8067   3EA0             ;copy to $436E,(+10) $436D
8068   3EA0 06 10                              .DB $06, $10
8069   3EA2 05 20                              .DB $05, $20
8070   3EA4 05 30                              .DB $05, $30
8071   3EA6 05 40                              .DB $05, $40
8072   3EA8             ;not used?
8073   3EA8 08 18                              .DB $08, $18
8074   3EAA 07 28                              .DB $07, $28
8075   3EAC 07 38                              .DB $07, $38
8076   3EAE 06 48                              .DB $06, $48
8077   3EB0             ;not used?
8078   3EB0 08 20                              .DB $08, $20
8079   3EB2 07 30                              .DB $07, $30
8080   3EB4 07 40                              .DB $07, $40
8081   3EB6 07 50                              .DB $07, $50
8082   3EB8             ;not used?
8083   3EB8 08 30                              .DB $08, $30
8084   3EBA 08 40                              .DB $08, $40
8085   3EBC 08 50                              .DB $08, $50
8086   3EBE 08 60                              .DB $08, $60
8087   3EC0             
8088   3EC0             ; LSB table for draw routine ($3520) entry.
8089   3EC0             ; $3548, $3540, aso...
8090   3EC0             ; for: 7x2, 7x3, 7x3, 7x3, 7x4, 7x5, 7x6, 7x4, 7x5, 7x6, 7x7, 7x5, 7x7, 7x5, 7x4.
8091   3EC0             T3EC0:
8092   3EC0 FF                                 .DB $FF
8093   3EC1 48 40 40 40                        .DB $48, $40, $40, $40, $38, $30, $28, $38, $30, $28, $20, $30, $20, $30, $28
8093   3EC5 38 30 28 38 
8093   3EC9 30 28 20 30 
8093   3ECD 20 30 28 
8094   3ED0             
8095   3ED0             ;big birds related. offsets for movement ?
8096   3ED0             T3ED0:
8097   3ED0 01 01 01 01                        .DB $01, $01, $01, $01
8098   3ED4 00 00 01 01                        .DB $00, $00, $01, $01
8099   3ED8 00 01 01 01                        .DB $00, $01, $01, $01
8100   3EDC 00 00 00 01                        .DB $00, $00, $00, $01
8101   3EE0             
8102   3EE0 05 04 03 02                        .DB $05, $04, $03, $02, $01, $00
8102   3EE4 01 00 
8103   3EE6 00 00 00 00                        .DB $00, $00, $00, $00, $01, $01
8103   3EEA 01 01 
8104   3EEC 01 01 02 02                        .DB $01, $01, $02, $02
8105   3EF0 02 02 03 03                        .DB $02, $02, $03, $03
8106   3EF4 03 04 04 04                        .DB $03, $04, $04, $04
8107   3EF8 05 05 06 06                        .DB $05, $05, $06, $06
8108   3EFC 07 08 07 06                        .DB $07, $08, $07, $06
8109   3F00             
8110   3F00             ; Register contents and address for stack manipulation
8111   3F00             ; used at level 3,4,8,9.
8112   3F00             T3F00:
8113   3F00                                    .MSFIRST
8114   3F00             ; for bird index to character block shape (0)
8115   3F00 FF FF FF FF                        .DB $FF, $FF, $FF, $FF   ; not used
8116   3F04 FF FF                              .DB $FF, $FF         ; not used
8117   3F06 FF FF                              .DB $FF, $FF,        ; not used
8118   3F08             ; for bird index to character block shape (1)
8119   3F08 20 FF 02 FF                        .DB $20, $FF, $02, $FF   ;BC and DE register contents
8120   3F0C 36 D2                              .DW L36D2         ;address to call
8121   3F0E 36 C0                              .DW L36C0         ;address to call
8122   3F10             ; for bird index to character block shape (2)
8123   3F10 20 FF 03 FF                        .DB $20, $FF, $03, $FF   ;
8124   3F14 36 D2                              .DW L36D2         ;address
8125   3F16 35 E0                              .DW L35E0         ;address
8126   3F18             ; for bird index to character block shape (3)
8127   3F18 30 FF 04 FF                        .DB $30, $FF, $04, $FF   ;
8128   3F1C 36 D2                              .DW L36D2         ;address
8129   3F1E 35 E0                              .DW L35E0         ;address
8130   3F20             ; for bird index to character block shape (4)
8131   3F20 10 FF 05 FF                        .DB $10, $FF, $05, $FF   ;
8132   3F24 36 EA                              .DW L36EA         ;address
8133   3F26 35 E0                              .DW L35E0         ;address
8134   3F28             ; for bird index to character block shape (5)
8135   3F28 10 FF 06 FF                        .DB $10, $FF, $06, $FF   ;
8136   3F2C 36 EA                              .DW L36EA         ;address
8137   3F2E 36 C0                              .DW L36C0         ;address
8138   3F30             ; for bird index to character block shape (6)
8139   3F30 10 60 07 1F                        .DB $10, $60, $07, $1F   ;
8140   3F34 37 0A                              .DW L370A         ;address
8141   3F36 36 C0                              .DW L36C0         ;address
8142   3F38             ; for bird index to character block shape (7)
8143   3F38 F0 10 0B 1A                        .DB $F0, $10, $0B, $1A   ;
8144   3F3C 37 0A                              .DW L370A         ;address
8145   3F3E 36 C0                              .DW L36C0         ;address
8146   3F40             ; for bird index to character block shape (8)
8147   3F40 40 FF 04 FF                        .DB $40, $FF, $04, $FF   ;
8148   3F44 36 EA                              .DW L36EA,        ;address
8149   3F46 36 C0                              .DW L36C0         ;address
8150   3F48             ; for bird index to character block shape (9)
8151   3F48 10 FF 08 FF                        .DB $10, $FF, $08, $FF   ;
8152   3F4C 36 EA                              .DW L36EA         ;address
8153   3F4E 36 C0                              .DW L36C0         ;address
8154   3F50             ; for bird index to character block shape (A)
8155   3F50 40 10 0F 17                        .DB $40, $10, $0F, $17   ;
8156   3F54 37 0A                              .DW L370A         ;address
8157   3F56 36 C0                              .DW L36C0         ;address
8158   3F58             ; for bird index to character block shape (B)
8159   3F58 10 FF 0A FF                        .DB $10, $FF, $0A, $FF   ;
8160   3F5C 36 EA                              .DW L36EA         ;address
8161   3F5E 35 E0                              .DW L35E0         ;address
8162   3F60             ; for bird index to character block shape (C)
8163   3F60 FF FF FF FF                        .DB $FF, $FF, $FF, $FF   ;
8164   3F64 36 CC                              .DW L36CC         ;address
8165   3F66 35 E0                              .DW L35E0         ;address
8166   3F68             ; for bird index to character block shape (D)
8167   3F68 FF FF FF FF                        .DB $FF, $FF, $FF, $FF   ;
8168   3F6C 36 CC                              .DW L36CC         ;address
8169   3F6E 35 E0                              .DW L35E0         ;address
8170   3F70             ; for bird index to character block shape (E)
8171   3F70 10 FF 06 FF                        .DB $10, $FF, $06, $FF   ;
8172   3F74 36 EA                              .DW L36EA         ;address
8173   3F76 35 E0                              .DW L35E0         ;address
8174   3F78             ; for bird index to character block shape (F)
8175   3F78 10 10 07 79                        .DB $10, $10, $07, $79   ;
8176   3F7C 37 0A                              .DW L370A         ;address
8177   3F7E 35 E0                              .DW L35E0         ;address
8178   3F80             
8179   3F80             ;
8180   3F80             ;level 3 and 8 initial data for the 8 birds.
8181   3F80             ;data will be copied to $4B70-$4BAF
8182   3F80             ;..........................:index to first character block shape
8183   3F80             ;...............................:MSB of initial screen address
8184   3F80             ;....................................:LSB of the initial screen address
8185   3F80             ;.........................................:?
8186   3F80             ;..............................................:?
8187   3F80             ;...................................................:? grid coordinate x
8188   3F80             ;........................................................:?
8189   3F80             ;.............................................................:? grid coordinate y
8190   3F80             T3F80:
8191   3F80 01 48 EE 00                        .DB $01, $48, $EE, $00, $10, $B0, $10, $20       ; 0
8191   3F84 10 B0 10 20 
8192   3F88 01 49 2C 00                        .DB $01, $49, $2C, $00, $10, $A0, $00, $B0       ; 1
8192   3F8C 10 A0 00 B0 
8193   3F90 01 49 6A 00                        .DB $01, $49, $6A, $00, $10, $90, $00, $B8       ; 2
8193   3F94 10 90 00 B8 
8194   3F98 01 49 A8 00                        .DB $01, $49, $A8, $00, $10, $80, $00, $C0       ; 3
8194   3F9C 10 80 00 C0 
8195   3FA0 01 49 E6 00                        .DB $01, $49, $E6, $00, $10, $70, $00, $C8       ; 4
8195   3FA4 10 70 00 C8 
8196   3FA8 01 4A 24 00                        .DB $01, $4A, $24, $00, $10, $60, $00, $C8       ; 5
8196   3FAC 10 60 00 C8 
8197   3FB0 01 4A 62 00                        .DB $01, $4A, $62, $00, $10, $50, $00, $C8       ; 6
8197   3FB4 10 50 00 C8 
8198   3FB8 01 4A A0 00                        .DB $01, $4A, $A0, $00, $10, $40, $00, $C8       ; 7
8198   3FBC 10 40 00 C8 
8199   3FC0             
8200   3FC0             ;level 4 and 9 initial data for the 8 birds.
8201   3FC0 01 4A CE 00                        .DB $01, $4A, $CE, $00, $10, $38, $00, $B0       ; 0
8201   3FC4 10 38 00 B0 
8202   3FC8 01 48 CC 00                        .DB $01, $48, $CC, $00, $10, $B8, $10, $20       ; 1
8202   3FCC 10 B8 10 20 
8203   3FD0 01 4A CA 00                        .DB $01, $4A, $CA, $00, $10, $38, $00, $B8       ; 2
8203   3FD4 10 38 00 B8 
8204   3FD8 01 48 C8 00                        .DB $01, $48, $C8, $00, $10, $B8, $10, $18       ; 3
8204   3FDC 10 B8 10 18 
8205   3FE0 01 4A C6 00                        .DB $01, $4A, $C6, $00, $10, $38, $00, $C0       ; 4
8205   3FE4 10 38 00 C0 
8206   3FE8 01 48 C4 00                        .DB $01, $48, $C4, $00, $10, $B8, $10, $10       ; 5
8206   3FEC 10 B8 10 10 
8207   3FF0 01 4A C2 00                        .DB $01, $4A, $C2, $00, $10, $38, $00, $C8       ; 6
8207   3FF4 10 38 00 C8 
8208   3FF8 01 48 C0 00                        .DB $01, $48, $C0, $00, $10, $B8, $10, $08       ; 7
8208   3FFC 10 B8 10 08 
8209   4000             ;********************************************************************
8210   4000             ;* End                                                              *
8211   4000             ;********************************************************************
8212   4000             .END
